import{a9 as Qe,r,w as Ue,v as Ze,u,av as es,a8 as ss,bG as ts,t as as,I as rs,cz as is,bJ as be,m as s,aU as os,G as ls,c7 as w,bK as R,bL as N,bM as p,bN as ns,b5 as cs,bO as ds,c8 as V,bW as ps,ay as ms,bX as xs,bY as us,bZ as hs,b_ as fs,aM as bs,aN as gs,b$ as ys,c9 as js}from"./index-MiPrx3ME.js";import{u as ws}from"./useRefreshUser-Mjy4k_3S.js";import{S as Ns}from"./SendContactDealModal-B2R64tKR.js";import"./lodash-G4LMV4Fw.js";const O="/assets/aii-DktkrhoQ.webp",As=()=>{var se,te,ae,re,ie,oe,le,ne,ce,de,pe,me,xe,ue,he,fe;const{id:n}=Qe(),[vs,h]=r.useState(!0),[_s,ge]=r.useState(null),[ye,G]=r.useState(!1),v=Ue(),m=Ze();ws();const $=u(t=>t.deal.currentStep),je=u(t=>t.deal.comparableMode);u(t=>t.deal.newComperableData),u(t=>t.deal.SAnewComperableData);const i=u(t=>t.deal.AivideoUrl),e=u(t=>t.deal.deal),[_,we]=r.useState(!0),[C,Ne]=r.useState(!0),[k,ve]=r.useState(!0),[E,_e]=r.useState(!0),[S,D]=r.useState(!1),[Ce,z]=r.useState(!1),[ke,H]=r.useState(!1),Ee="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{loading:Se}=es(),{data:P}=ss(ts,e!=null&&e.id?e==null?void 0:e.id:n,{type:je});(se=P==null?void 0:P.data)!=null&&se.dealComparables;const[Cs,ks]=r.useState(!1),[De,T]=r.useState([]),{user:I}=u(t=>t.user),{showSnackbar:Pe}=as(),M=r.useRef(null),F=((...t)=>t.find(a=>Array.isArray(a)&&a.length>0)||[])(e==null?void 0:e.newcomperable,e==null?void 0:e.property_deal_comparables,e==null?void 0:e.property_deal_sa_comparables),[Ie,B]=r.useState(!1),[K,Fe]=r.useState(!1);r.useEffect(()=>{sessionStorage.getItem(`video_generated_${e==null?void 0:e.id}`)&&!K&&(e!=null&&e.ai_video_id)&&(B(!0),Fe(!0),sessionStorage.removeItem(`video_generated_${e==null?void 0:e.id}`))},[e==null?void 0:e.id,e==null?void 0:e.ai_video_id,K]);const Le=()=>{B(!1)},Y=r.useCallback(async()=>{var t;h(!0);try{const a=await rs(n);a&&a.data&&m(is((t=a.data.data)==null?void 0:t.deal))}catch{ge("Failed to load deal details")}finally{h(!1)}},[n]),X=async t=>{if(!(!t||S)){h(!0);try{const l=await(await fetch(`https://api.heygen.com/v1/video_status.get?video_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"sk_V2_hgu_kKqknA6ytKH_2KwO3bxcX62IB12c285JDCoAIdiiuduk"}})).json();m(ys(l.data)),D(!0)}catch(a){console.error("API error:",a)}finally{h(!1)}}};r.useEffect(()=>{e!=null&&e.ai_video_id&&!S&&!i&&X(e.ai_video_id)},[e==null?void 0:e.ai_video_id,S,i]),r.useEffect(()=>{e!=null&&e.ai_video_id&&e.ai_video_id!==(i==null?void 0:i.video_id)&&(D(!1),X(e.ai_video_id))},[e==null?void 0:e.ai_video_id]),r.useEffect(()=>{D(!1)},[n]),r.useEffect(()=>{n&&Y()},[Y,n]),e!=null&&e.address_line_1,e!=null&&e.address_line_2,e!=null&&e.post_code,(te=e==null?void 0:e.country)!=null&&te.name;const q=(e==null?void 0:e.image_url)||null,Ae=(e==null?void 0:e.map_image_url)||null,Re=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const a={lat:t.coords.latitude,lng:t.coords.longitude};setUserLocation(a),setAddressCoordinates(a)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},Ve=t=>{var o,c,d,j;const a=[];if(t!=null&&t.no_of_dwelling){const x=(t==null?void 0:t.deal_type_id)===2?t.no_of_dwelling>1?" Beds":" Bed":t.no_of_dwelling>1?" Bedrooms":" Bedroom";a.push(t.no_of_dwelling+x)}if(t!=null&&t.deal_type&&a.push(t.deal_type.title),(o=t==null?void 0:t.sub_category)!=null&&o.title&&a.push(t.sub_category.title),(c=t==null?void 0:t.property_type_category)!=null&&c.title&&a.push((d=t.property_type_category)==null?void 0:d.title),(j=t==null?void 0:t.exit_type)!=null&&j.title){let x=t.exit_type.title.toLowerCase();x==="sell"?x="Flip":x==="refinance"&&(x="BRRR"),a.push(x)}return a.join(",")},b={description:(e==null?void 0:e.description_type)==="ai"?(e==null?void 0:e.description_ai)||"No AI description available":(e==null?void 0:e.description)||"No description available"},Oe={location:(e==null?void 0:e.description_type)==="ai"?(e==null?void 0:e.location_ai)||"No AI location available":(e==null?void 0:e.location)||"No location available"};r.useEffect(()=>(m(be(!0)),m({type:"deal/setCurrentStep",payload:Math.max($,5)}),()=>{m(be(!1))}),[m,$]);const Ge=()=>{n&&(T([n]),G(!0))},$e=async()=>{try{const a=await(await fetch(i.video_url,{mode:"cors"})).blob(),l=window.URL.createObjectURL(a),o=document.createElement("a");o.href=l,o.download="ai-generated-video.mp4",document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(l)}catch(t){console.error("Video download failed",t),alert("Unable to download video")}},ze=async()=>{var t;h(!0);try{const l=await(await fetch("https://api.heygen.com/v2/templates",{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"sk_V2_hgu_kKqknA6ytKH_2KwO3bxcX62IB12c285JDCoAIdiiuduk"}})).json();m(js((t=l==null?void 0:l.data)==null?void 0:t.templates)),v("/deal-view-ai-video-generator")}catch(a){console.error("API error:",a)}finally{h(!1)}},[He,L]=r.useState(!1);r.useEffect(()=>{const t=localStorage.getItem(`videoFailedPopup_${e==null?void 0:e.ai_video_id}`);(i==null?void 0:i.status)==="failed"&&!t&&z(!0)},[i==null?void 0:i.status,e==null?void 0:e.ai_video_id]);const Te=()=>{localStorage.setItem(`videoFailedPopup_${e==null?void 0:e.ai_video_id}`,"true"),z(!1)},[J,Me]=r.useState(!1),[Ss,Be]=r.useState(!1),[Ke,Ye]=r.useState(!1),[Ds,Xe]=r.useState(!1),g=r.useRef(null),A=r.useRef(null);r.useEffect(()=>{if(g.current){const a=parseFloat(getComputedStyle(g.current).lineHeight)*3;Ye(g.current.scrollHeight>a)}if(A.current){const a=parseFloat(getComputedStyle(A.current).lineHeight)*3;Xe(A.current.scrollHeight>a)}},[b,Oe]);const qe=()=>{Me(t=>{const a=!t;return a&&Be(!1),a})},[W,y]=r.useState(0),Je=((ae=I==null?void 0:I.user_subscription)==null?void 0:ae.ai_video_limit)===0,f=((re=e==null?void 0:e.property_deal_media)==null?void 0:re.map(t=>{var a;return(a=t==null?void 0:t.media)==null?void 0:a.media_url}))||[],Q=t=>{y(t),L(!0)},U=t=>{t.stopPropagation(),L(!1)},Z=t=>{t.stopPropagation(),y(a=>(a+1)%f.length)},ee=t=>{t.stopPropagation(),y(a=>(a-1+f.length)%f.length)};r.useEffect(()=>{L(!1),y(0)},[n]);const We=()=>{if(Je){Pe("Video Generation credit limit has been reached","warning");return}ze()};return s.jsxs("div",{className:"create-deal-summary-page-wrap",children:[s.jsx(Ns,{isOpen:ye,onClose:()=>{G(!1),T([])},selectedDeals:De}),s.jsxs("div",{className:"flex flex-col lg:flex-row md:items-end justify-between my-5",children:[s.jsxs("div",{className:"",children:[s.jsx("h4",{className:"text-[#333333] font-bold light-black dark:text-[#ECECEC]",children:"Deal View"}),s.jsx("p",{className:"text-[#333333] dark:text-[#ECECEC]",children:"Preview deal before sending to your investors"})]}),s.jsx("div",{className:"buttons",children:s.jsxs("div",{className:"deals-share-btn-wrap flex flex-row justify-around md:items-center gap-3",children:[(e==null?void 0:e.step_completed)===5&&s.jsxs("button",{onClick:We,className:"ai-description-tab transition flex items-center gap-2 md:ms-auto purple-gradient-btn",children:[s.jsx(os,{}),s.jsx("span",{className:"hidden md:inline",children:e!=null&&e.ai_video_id?"Re-generate AI Video":"AI Video Generator"})]}),s.jsxs("button",{type:"button",className:`share-btn ${(e==null?void 0:e.step_completed)!==5?"cursor-not-allowed opacity-50":""}`,onClick:t=>{t.preventDefault(),(e==null?void 0:e.step_completed)===5&&Ge()},disabled:(e==null?void 0:e.step_completed)!==5,children:[s.jsx(ls,{className:"text-2xl"}),s.jsx("span",{className:"hidden md:inline",children:"Share"})]})]})})]}),Se?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:s.jsx("div",{children:s.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"summary-add-details-wrap",children:[s.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>we(!_),children:[s.jsx("h5",{className:"text-lg font-semibold",children:"Title"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs("button",{type:"button",className:"edit-address-detail-btn purple-outline-btn items-center gap-3",style:{display:"flex"},onClick:()=>v("/create-deal/address"),children:[s.jsx(w,{className:"text-lg"}),"Edit details"]}),_?s.jsx(R,{className:"text-gray-600 dark:text-[#ECECEC]",size:20}):s.jsx(N,{className:"text-gray-600 dark:text-[#ECECEC]",size:20})]})]}),s.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${_?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"summary-property-map-wrap",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between purchased-price-with-location",children:[s.jsx("p",{className:"text-[#242424] font-medium property-location-text mb-4 dark:text-[#ECECEC]",children:Ve(e)}),(e==null?void 0:e.deal_type_id)===2?s.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#ECECEC]",children:["Rent:"," ",s.jsx("span",{className:"text-[#242424] dark:text-[#ECECEC]",children:(ie=e==null?void 0:e.property_deal_sa_investment)!=null&&ie.rent?`£${parseFloat((oe=e==null?void 0:e.property_deal_sa_investment)==null?void 0:oe.rent).toLocaleString()}`:"0"})]}):s.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#ECECEC]",children:["Purchased Price:"," ",s.jsx("span",{className:"text-[#242424] dark:text-[#ECECEC]",children:(le=e==null?void 0:e.property_deal_investment)!=null&&le.purchase_price?`£${parseFloat((ne=e==null?void 0:e.property_deal_investment)==null?void 0:ne.purchase_price).toLocaleString()}`:"0"})]})]}),s.jsxs("div",{className:"summary-property-map-grid-wrap",children:[s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`${((ce=e==null?void 0:e.property_deal_media)==null?void 0:ce.length)>0?"summary-property-col":""}`,children:[s.jsx("div",{className:"summary-property-subimages-div",children:(de=e==null?void 0:e.property_deal_media)==null?void 0:de.slice(0,4).map((t,a)=>{var c,d;const o=(((c=e==null?void 0:e.property_deal_media)==null?void 0:c.length)||0)-4;return s.jsx("div",{className:"summary-property-subimages relative",children:t?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:(d=t==null?void 0:t.media)==null?void 0:d.media_url,alt:"Property",className:"w-full h-full object-cover cursor-pointer",onClick:()=>Q(a)}),a===3&&o>0&&s.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center text-white text-lg font-semibold cursor-pointer",onClick:()=>Q(a),children:["+",o]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:p.noImageAvailable})},a)})}),s.jsx("div",{className:"summary-property-main-images-div h-full",children:s.jsx("div",{className:"w-full bg-gray-700 summary-property-div",children:q?s.jsx("img",{src:q,alt:"Property",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:p.noImageAvailable})})})]}),He&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:U,children:s.jsxs("div",{className:"relative max-w-4xl w-full p-4 flex items-center justify-center",onClick:t=>t.stopPropagation(),children:[s.jsx("img",{src:f[W],alt:"Large view",className:"max-h-[80vh] max-w-full object-contain mx-auto rounded-lg shadow-lg"}),s.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 cursor-pointer",onClick:t=>{t.stopPropagation(),ee(t)}}),s.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 cursor-pointer",onClick:t=>{t.stopPropagation(),Z(t)}}),s.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:t=>{t.stopPropagation(),ee(t)},children:"❮"}),s.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:t=>{t.stopPropagation(),Z(t)},children:"❯"}),s.jsx("button",{className:"fixed top-4 right-4 text-white text-3xl z-50",onClick:U,children:s.jsx(ns,{})}),s.jsxs("div",{className:"absolute bottom-4 text-white text-center w-full",children:[W+1," / ",f.length]})]})})]}),s.jsxs("div",{className:"summary-map-loaction-col",children:[s.jsxs("div",{className:"w-full summary-map-wrapper flex items-center justify-center min-h-[200px]",children:[e!=null&&e.ai_video_id?s.jsxs(s.Fragment,{children:[((i==null?void 0:i.status)==="waiting"||(i==null?void 0:i.status)==="processing")&&s.jsxs("div",{className:"relative w-full flex justify-center",children:[s.jsx("img",{src:O,alt:"placeholder",className:"mx-auto object-cover max-h-[360px] rounded-md"}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/20 rounded-md",children:[s.jsx(cs,{className:"text-white animate-spin text-3xl"}),s.jsx("p",{className:"text-white mt-2",children:"Generating..."})]})]}),(i==null?void 0:i.status)==="completed"&&s.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",onClick:()=>H(!0),children:[s.jsx("img",{src:i.thumbnail_url,alt:"Generated video thumbnail",className:"mx-auto w-full max-w-md h-auto object-contain"}),s.jsx(ds,{className:"absolute inset-0 m-auto text-[#6C5DD3]",size:70,style:{pointerEvents:"none"}})]}),(i==null?void 0:i.status)==="failed"&&s.jsx(s.Fragment,{children:Ce?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[s.jsx("p",{className:"text-red-500 font-semibold mb-4",children:"Video generation failed. Please contact admin at contact@investier.uk"}),s.jsx("button",{className:"bg-[#6C5DD3] text-white px-4 py-2 rounded hover:bg-[#5647b6]",onClick:Te,children:"OK"})]})}):s.jsxs("div",{className:"relative w-full max-h-[360px] flex flex-col justify-center items-center bg-gray-100 rounded-md overflow-hidden",children:[s.jsx("p",{className:"absolute text-gray-800 text-sm font-medium bg-gray-200 bg-opacity-80 px-3 py-1 rounded-md",children:"Generated video will show here"}),s.jsx("img",{src:O,alt:"placeholder",className:"mx-auto object-cover max-h-[360px] rounded-md"})]})})]}):s.jsxs("div",{className:"relative w-full max-h-[360px] flex flex-col justify-center items-center bg-gray-100 rounded-md overflow-hidden",children:[s.jsx("p",{className:"absolute text-gray-800 text-sm font-medium bg-gray-200 bg-opacity-80 px-3 py-1 rounded-md",children:"Generated video will show here"}),s.jsx("img",{src:O,alt:"placeholder",className:"mx-auto object-cover max-h-[360px] rounded-md"})]}),ke&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b",children:[s.jsx("div",{className:"flex items-center gap-2 text-gray-700 font-medium",children:"← Download AI generated video"}),s.jsx("button",{className:"text-gray-500 hover:text-gray-800 text-xl",onClick:()=>H(!1),children:"✕"})]}),s.jsx("div",{className:"p-4",children:s.jsx("video",{src:i.video_url,controls:!0,autoPlay:!0,className:"w-full rounded-lg"})}),s.jsx("div",{className:"px-4 pb-4",children:s.jsx("button",{onClick:$e,className:"flex items-center justify-center gap-2 w-full bg-[#6C5DD3] text-white py-3 rounded-lg hover:bg-[#5647b6] transition",children:"⬇ Download video"})})]})})]}),Ie&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[s.jsx("p",{className:"text-gray-700 font-semibold mb-4",children:"Your video is being generated. This may take a few minutes depending on complexity."}),s.jsx("button",{className:"bg-[#6C5DD3] text-white px-4 py-2 rounded hover:bg-blue-600",onClick:Le,children:"OK"})]})})]})]})]})})]}),s.jsxs("div",{className:"deal-summart-description-wrap mt-6",children:[s.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Ne(!C),children:[s.jsx("h5",{className:"text-lg font-semibold",children:"Description"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs(V,{to:"/create-deal/description",className:"edit-address-detail-btn purple-outline-btn items-center gap-3",style:{display:"flex"},children:[s.jsx(w,{className:"text-lg"}),p.editDetails]}),C?s.jsx(R,{className:"text-gray-600 dark:text-[#ECECEC]",size:20}):s.jsx(N,{className:"text-gray-600 dark:text-[#ECECEC]",size:20})]})]}),s.jsx("div",{className:`transition-all duration-500 ease-in-out ${C?"opacity-100":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"summary-description-text flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"w-full md:w-[60%]",children:s.jsxs("div",{className:"summary-description-heading-wrap",children:[s.jsx("h4",{className:"text-lg text-[#333333] font-normal mb-2 dark:text-[#ECECEC]",children:"Property description:"}),s.jsx("p",{ref:g,className:`text-[#595959] whitespace-pre-line overflow-hidden transition-all duration-300 dark:text-[#ECECEC] ${J?"":"line-clamp-12"}`,dangerouslySetInnerHTML:{__html:ps(b==null?void 0:b.description)}}),Ke&&s.jsx("button",{onClick:qe,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:J?"Read less":"Read more"})]})}),s.jsx("div",{className:"w-full md:w-[40%] relative bg-gray-700 summary-map-wrapper",children:Ae?s.jsxs(s.Fragment,{children:[s.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${Ee}&q=${e==null?void 0:e.lat},${e==null?void 0:e.lng}&zoom=16`,title:"Google Map"}),s.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:Re,children:s.jsx(ms,{})})]}):s.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:p.noMapImageAvailable})})]})})]}),s.jsx("div",{className:"mt-10",children:(e==null?void 0:e.deal_type_id)===2?s.jsx(xs,{deal:e}):s.jsx(us,{deal:e})}),s.jsxs("div",{className:"mt-6 DealsDetails-page-wrapper summary-financials-details-wrap",children:[s.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>_e(!E),children:[s.jsx("h5",{className:"text-lg font-semibold",children:p.financials}),s.jsxs("div",{className:"flex justify-center items-center gap-4",children:[s.jsxs(V,{to:"/create-deal/financials",className:"edit-address-detail-btn purple-outline-btn items-center gap-3",style:{display:"flex"},children:[s.jsx(w,{className:"text-lg"}),p.editDetails]}),E?s.jsx(R,{className:"text-gray-500 transition-transform duration-300 dark:text-[#ECECEC]",size:20}):s.jsx(N,{className:"text-gray-500 transition-transform duration-300 dark:text-[#ECECEC]",size:20})]})]}),s.jsx("div",{className:`transition-all duration-300 ${E?"opacity-100":"max-h-0 opacity-0"}`,children:s.jsx("div",{className:"min-h-screen financial-page-main-div-wrap",children:s.jsx("div",{className:"financial-page-inner-div-wrap",children:s.jsx(hs,{deal:e})})})})]}),s.jsxs("div",{className:((e==null?void 0:e.deal_type_id)===2||(e==null?void 0:e.exit_type_id)===2,"summary-page-comparables-sec border rounded-xl overflow-hidden dark:border-[#454545]"),children:[s.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer bg-[#F8F8F8] px-4 py-2",onClick:()=>ve(t=>!t),children:[s.jsx("h5",{className:"text-lg font-semibold",children:p.comparables}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs(V,{to:(F==null?void 0:F.length)>0?(e==null?void 0:e.deal_type_id)===2?"/create-deal/sa-comparable-table":"/create-deal/comparable-table":"/create-deal/comparables",className:"edit-address-detail-btn purple-outline-btn items-center gap-3",style:{display:"flex"},onClick:()=>v("/create-deal/comparable-table"),children:[s.jsx(w,{className:"text-lg"}),p.editDetails]}),s.jsx(N,{className:`text-xl transition-transform duration-300 ${k?"rotate-180":""}`})]})]}),s.jsx("div",{ref:M,style:{maxHeight:k?`${(pe=M.current)==null?void 0:pe.scrollHeight}px`:"0px",opacity:k?1:0,transition:"all 0.4s ease-in-out",overflow:"hidden"},children:s.jsx("div",{className:(e==null?void 0:e.deal_type_id)===2?"p-4":"",children:(e==null?void 0:e.deal_type_id)===2?((me=e==null?void 0:e.property_deal_sa_comparables)==null?void 0:me.length)===0?s.jsx("p",{className:"p-1",children:"No comparables available"}):s.jsx("div",{className:"overflow-x-auto comparable-listing-table-wrap",children:(xe=e==null?void 0:e.property_deal_sa_comparables)==null?void 0:xe.map((t,a)=>s.jsx(fs,{comp:t},a))}):((ue=e==null?void 0:e.property_deal_comparables)==null?void 0:ue.length)===0?s.jsx("p",{className:"p-1",children:"No comparables available"}):s.jsx("div",{className:"border dark:border-[#454545]",children:s.jsx("div",{className:"overflow-y-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse  ",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-[#F8F8F8] text-dark text-[12px] border-b dark:bg-[#242424] dark:border-b-[#454545]",children:[s.jsx("th",{className:"p-4",children:"SL NO."}),s.jsx("th",{className:"p-4",children:"PROPERTY"}),s.jsx("th",{className:"p-4",children:"CATEGORY"}),s.jsx("th",{className:"p-4",children:"BEDROOMS"}),s.jsx("th",{className:"p-4",children:"PRICE"}),s.jsx("th",{className:"p-4",children:"YEAR"}),s.jsx("th",{className:"p-4",children:"DISTANCE"})]})}),s.jsx("tbody",{children:(he=e==null?void 0:e.property_deal_comparables)==null?void 0:he.map((t,a)=>{var l,o,c,d;return s.jsxs("tr",{className:"border-b dark:border-[#454545]",children:[s.jsx("td",{className:"p-4",children:a+1}),s.jsxs("td",{className:"p-4 flex items-normal gap-2",children:[s.jsx("img",{src:(t==null?void 0:t.image_url)||bs,alt:"Image",className:"w-12 h-12 rounded object-cover"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold truncate max-w-[100px]",children:t==null?void 0:t.address}),t!=null&&t.linked_search_url?s.jsx("a",{href:t.linked_search_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#3673D5] font-bold text-sm cursor-pointer",children:"Website"}):s.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Website"})]}),(t==null?void 0:t.type)==="ai"&&s.jsx("span",{className:"mr-1 inline-block w-4 h-4 align-top",children:s.jsx("img",{src:gs,alt:"AI",className:"w-full h-full object-contain"})})]}),s.jsx("td",{className:"p-4",children:(c=(o=(l=(t==null?void 0:t.property_type_string)||(t==null?void 0:t.sub_category))==null?void 0:l.toLowerCase())==null?void 0:o.replace(/_/g," "))==null?void 0:c.replace(/\b\w/g,j=>j.toUpperCase())}),s.jsx("td",{className:"p-4",children:t.no_of_bedroom}),s.jsxs("td",{className:"p-4",children:["£",Number(t.price).toLocaleString("en-GB",{maximumFractionDigits:0})]}),s.jsx("td",{className:"p-4",children:t.year}),s.jsx("td",{className:"p-4",children:(t==null?void 0:t.distance)!=null?`${(d=parseInt(t==null?void 0:t.distance))==null?void 0:d.toFixed(2)} Mile${(t==null?void 0:t.distance)>1?"s":""}`:"-"})]},t.id||a)})})]})})})})})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-lg text-gray-600 my-2 dark:text-[#F8F8F8]",children:[s.jsxs("span",{children:["Last updated by: ",s.jsx("strong",{children:((fe=e==null?void 0:e.last_updated_by)==null?void 0:fe.name)||"-"})]}),s.jsx("span",{children:e!=null&&e.updated_at?new Date(e.updated_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""})]})]})};export{As as default};
