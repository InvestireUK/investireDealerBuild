import{r as d,m as e,av as ke,aw as kt,v as St,aa as Lt,V as Dt,ax as At,w as It,u as rt,ay as k,z as Ut,az as Et,aA as Rt,aB as Ue,aC as Pt,aD as $t,aE as Ee,aF as Ot,aG as Ft,aH as Tt,ad as Mt,aI as zt,Q as lt,aJ as Bt,aK as qt,aq as Gt}from"./index-_rvvEIkh.js";import{M as Vt}from"./ModifiedAutoAddressInput-DmL_VqRi.js";import{a as Wt}from"./index-B5invyFK.js";import{u as Yt}from"./index-K-9EWMBp.js";const Kt=async(y,o,L,N,J,M,g,c,me,F)=>{var h,le,fe;if(!y)return{valid:!1};g(null),N(!0),M(!1);let P=o?(le=(h=L==null?void 0:L.data)==null?void 0:h.countries)==null?void 0:le.find(I=>I.id==o):null,xe=(P==null?void 0:P.iso)||(P==null?void 0:P.iso3);if(!/^[A-Za-z0-9\s-]+$/.test(y))return J("Post code format is invalid"),M(!1),N(!1),{valid:!1};try{const I="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44";let Z;if(P){const w=[];c&&w.push(c),me&&w.push(me),c!="33 Old Broad Street"&&w.push(y),w.push(P.nicename),Z=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(w.join(", "))}&key=${I}`}else Z=`https://maps.googleapis.com/maps/api/geocode/json?address=${y}&key=${I}`;const Y=await(await fetch(Z)).json();if(Y.status==="OK"&&Y.results.length>0){const w=Y.results[0].address_components,H=w.find(S=>S.types.includes("postal_code")),oe=w.find(S=>S.types.includes("country")),ue=w.find(S=>S.types.includes("administrative_area_level_1"));if(!o&&oe&&((fe=L==null?void 0:L.data)!=null&&fe.countries)){let S=L.data.countries.find(D=>D.iso===oe.short_name||D.iso3===oe.short_name||D.nicename===oe.long_name||D.name===oe.long_name);!S&&ue&&(S=L.data.countries.find(D=>D.nicename===ue.long_name||D.name===ue.long_name)),S&&(F("country_id",S.id,{shouldValidate:!0,shouldDirty:!0}),P=S,xe=S.iso||S.iso3)}if(H){const S=H.long_name.replace(/\s+/g,"").toUpperCase(),D=y.replace(/\s+/g,"").toUpperCase();if(S===D||S.includes(D)||D.includes(S)){const X=Y.results[0].geometry.location;if(X&&g({lat:X.lat,lng:X.lng}),M(!0),J(""),c&&!me){let f="";const _=w.find(v=>v.types.includes("postal_town")),j=w.find(v=>v.types.includes("locality"));_?f=_.long_name:j&&(f=j.long_name),f&&F("address_line_2",f,{shouldValidate:!0,shouldDirty:!0})}return N(!1),{valid:!0,coordinates:X?{lat:X.lat,lng:X.lng}:null}}else return J(`Did you mean ${H.long_name}?`),M(!1),g(null),N(!1),{valid:!1}}else return J("No valid postal code found for this location"),M(!1),g(null),N(!1),{valid:!1}}else{let w="";return Y.status==="ZERO_RESULTS"||Y.status==="INVALID_REQUEST"?w="Post code format is invalid":Y.status==="OVER_QUERY_LIMIT"?w="Too many requests. Please try again later":Y.status==="REQUEST_DENIED"?w="API request denied. Please check your configuration":w="Post code format is invalid",J(w),M(!1),g(null),N(!1),{valid:!1}}}catch{return J("Post code format is invalid"),M(!1),g(null),N(!1),{valid:!1}}},Qt=y=>typeof y=="string"?y:URL.createObjectURL(y),ot=y=>typeof y=="string"?"image":y.type.startsWith("video/")?"video":"image";function Zt({onImagesChange:y,maxFiles:o=10,initialImages:L=[],onClose:N,title:J="Upload Images",acceptedFileTypes:M="image",initialActiveIndex:g=0,otherImages:c,removeOtherImage:me}){const[F,P]=d.useState([]),[xe,ce]=d.useState([]),[h,le]=d.useState([]),[fe,I]=d.useState(g),[Z,G]=d.useState(""),[Y,w]=d.useState([]);d.useEffect(()=>{if(L.length){const f=[],_=[],j=[];L.forEach(v=>{const V=Qt(v);f.push(V),typeof v!="string"&&j.push(V),_.push(ot(v))}),P(L),ce(f),le(_),w(j),I(g<L.length?g:0)}else P([]),ce([]),le([]),w([]),I(0)},[L,g]);const H=d.useCallback(f=>{if(F.length+f.length>o){G(`You can only upload up to ${o} files.`);return}const _=f,j=[],v=[],V=[];_.forEach(E=>{const Ne=URL.createObjectURL(E);j.push(Ne),v.push(ot(E)),V.push(Ne)}),P(E=>[...E,..._]),ce(E=>[...E,...j]),le(E=>[...E,...v]),w(E=>[...E,...V]),G("")},[F.length,o]),oe=d.useMemo(()=>{const f={};return M==="image"?(f["image/png"]=[".png"],f["image/jpeg"]=[".jpg",".jpeg"]):M==="video"&&(f["video/mp4"]=[".mp4"],f["video/webm"]=[".webm"],f["video/ogg"]=[".ogg"],f["video/quicktime"]=[".mov"]),f},[M]),{getRootProps:ue,getInputProps:S,isDragActive:D}=Yt({onDrop:H,accept:oe,maxSize:20971520,onDropRejected:f=>{var j,v;const _=(v=(j=f[0])==null?void 0:j.errors[0])==null?void 0:v.code;G(_==="file-too-large"?"File is too large. Max size is 20MB.":_==="file-invalid-type"?`Only ${M.replace("*","")} files are allowed.`:"Invalid file. Please try again.")}}),_e=f=>{P(_=>{const j=[..._];return j.splice(f,1),j}),ce(_=>{const j=[..._],[v]=j.splice(f,1);return v!=null&&v.startsWith("blob:")&&URL.revokeObjectURL(v),j}),le(_=>{const j=[..._];return j.splice(f,1),j}),I(_=>_===f?0:_>f?_-1:_)};d.useEffect(()=>()=>{Y.forEach(f=>{f.startsWith("blob:")&&URL.revokeObjectURL(f)})},[Y]);const X=()=>{y(F),N()};return e.jsx("div",{className:"comparables-upload-image-popup fixed inset-0 bg-gray-900/75 flex items-center justify-center z-50",children:e.jsx("div",{className:"dark:bg-[#121212] bg-white rounded-lg p-6 w-full max-w-3xl mx-4",children:e.jsxs("div",{className:"overflow-y-auto max-h-[90vh] pe-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h6",{className:"text-black dark:text-white",children:J}),e.jsx("button",{onClick:N,className:"dark:text-gray-400 text-red-500",children:e.jsx(ke,{size:24})})]}),e.jsxs("div",{...ue(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer mb-6 transition-colors ${D?"border-purple-500 bg-purple-900/10":"border-gray-600 hover:border-purple-400"}`,children:[e.jsx("input",{...S()}),e.jsx(kt,{className:"mx-auto text-purple-500",size:48}),e.jsx("p",{className:"mt-2 text-gray-400",children:D?"Drop the files here ...":"Drag & drop or click to select files"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Supported: ",M.replace(/\*/g,"")]})]}),Z&&e.jsx("div",{className:"text-red-500 mb-4 p-2 bg-red-900/20 rounded",children:Z}),xe.length>0&&e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-6",children:xe.map((f,_)=>e.jsxs("div",{className:`relative h-20 rounded overflow-hidden border-2 cursor-pointer ${_===fe?"border-purple-500":"border-transparent"}`,onClick:()=>I(_),children:[e.jsx("img",{src:f,alt:`Thumbnail ${_}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:j=>{j.stopPropagation(),_e(_)},className:"absolute top-1 right-1 p-1 rounded-full flex items-center justify-center",style:{width:20,height:20},children:e.jsx(ke,{size:14,className:"text-red-500"})})]},_))}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsx("button",{onClick:X,className:"purple-btn items-center",children:F.length?"Save":"Cancel"})})]})})})}const Jt="/assets/deal-creation-PFOLVc3R.webp",Ht=()=>e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("img",{src:Jt,alt:""}),e.jsx("p",{className:"text-[#595959]",children:"Deal creation is under maintenance"})]}),Xt=y=>{var o;return y?(o=y.media)!=null&&o.media_url?y.media.media_url:y.preview?y.preview:typeof y=="string"?y:null:null},es=y=>y.map(o=>{var L;return o?o.file?o.file:(L=o.media)!=null&&L.media_url?o.media.media_url:typeof o=="string"?o:null:null}).filter(Boolean),ts=y=>y.map(o=>typeof o=="string"?{media:{media_url:o}}:{file:o,preview:URL.createObjectURL(o)}),ds=()=>{var Ve,We,Ye,Ke,Qe,Ze,Je,He,Xe,et,tt,st;const y=St(),{data:o,loading:L}=Lt(Mt),{register:N,handleSubmit:J,getValues:M,setValue:g,watch:c,control:me,clearErrors:F,setError:P,trigger:xe,reset:ce,formState:{errors:h}}=Dt({defaultValues:{property_type_id:""}});console.log("errors",h);const le={0:Wt,1:Ft,2:Ot},fe={0:Ee,1:$t,2:Pt},[I,Z]=d.useState([]),[G,Y]=d.useState(null),[w,H]=d.useState(!1),[oe,ue]=d.useState(0),[S,D]=d.useState(!1),_e=d.useCallback(t=>{ue(t),H(!0)},[]),X=d.useCallback(t=>{const s=ts(t);Z(s),H(!1)},[]),f=Math.max(0,I.length-3),_=I.slice(0,3),[j,v]=d.useState(""),[V,E]=d.useState([null,null]),{handleApiCall:Ne,loading:Re}=At(),Pe=It(),[ee,te]=d.useState(null),[z,se]=d.useState(null),[ss,ge]=d.useState(!1),[$e,Oe]=d.useState(!1),[Se,we]=d.useState(""),[Le,W]=d.useState(!1),[De,$]=d.useState(!1),[be,C]=d.useState(""),[Ae,K]=d.useState(!1),[ie,he]=d.useState(!1),[Fe,it]=d.useState(!1),a=rt(t=>{var s;return(s=t==null?void 0:t.deal)==null?void 0:s.deal}),[B,Q]=d.useState([null,null]),ae=c("address_line_1"),q=c("address_line_2"),T=c("post_code"),re=c("country_id"),Te=rt(t=>t.deal.currentStep),nt="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",[dt,ct]=d.useState(null),[as,rs]=d.useState(!1),[pt,ut]=d.useState(!1),mt=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const s={lat:t.coords.latitude,lng:t.coords.longitude};ct(s),se(s)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},ft=()=>{const t=dt||z;return t?`https://www.google.com/maps/embed/v1/place?key=${nt}&q=${t.lat},${t.lng}&zoom=16`:""};d.useEffect(()=>{var t,s;if(q&&T){if(C(""),T.trim().length<5){C(""),P("address_line_1",{type:"manual",message:"Please input complete address"}),K(!1);return}else F("address_line_1");const r=re?(s=(t=o==null?void 0:o.data)==null?void 0:t.countries)==null?void 0:s.find(i=>i.id==re):null;if(r){const i=r.iso||r.iso3;if(["GB","UK","GB-ENG","GB-SCT","GB-WLS","GB-NIR"].includes(i)||["United Kingdom","England","Scotland","Wales","Northern Ireland"].some(l=>r.nicename.includes(l)||l.includes(r.nicename))){if(!/^[A-Za-z0-9\s]+$/.test(T)){C("Post code format is invalid"),K(!1);return}}else if(!/^[A-Za-z0-9\s-]+$/.test(T)){C("Post code format is invalid"),K(!1);return}}else if(!/^[A-Za-z0-9\s-]+$/.test(T)){C("Post code format is invalid"),K(!1);return}T&&(ae||q)&&re&&(async()=>await je())()}else K(!1)},[q,T,re,(Ve=o==null?void 0:o.data)==null?void 0:Ve.countries]);const je=async()=>{const t=c("post_code"),s=c("country_id"),r=c("address_line_1"),i=c("address_line_2");if(!t)return;$(!0),W(!1),K(!1),se(null),te(null);const n=[...B];n[0]&&!(a!=null&&a.map_image)&&(n[0]=null,Q(n));const l=await Kt(t,s,o,$,C,he,se,r,i,g);t===c("post_code")&&(l&&l.valid&&l.coordinates?(he(!0),C(""),se(l.coordinates),W(!0),i&&t&&K(!0)):(he(!1),W(!1),K(!1),se(null)))},ve=()=>{var r,i,n;const t=document.createElement("canvas");t.width=600,t.height=400;const s=t.getContext("2d");if(s.fillStyle="#e8e8e8",s.fillRect(0,0,t.width,t.height),s.fillStyle="#333",s.font="20px Arial",s.textAlign="center",s.font="16px Arial",s.fillText("We couldn't generate a detailed map for this address",t.width/2,150),q||T){s.textAlign="left",s.font="14px Arial",ae&&s.fillText(`Address Line 1: ${ae||""}`,50,220),s.fillText(`Address Line 2: ${q||""}`,50,250),s.fillText(`Postal Code: ${T||""}`,50,280);const l=(n=(i=(r=o==null?void 0:o.data)==null?void 0:r.countries)==null?void 0:i.find(m=>m.id==re))==null?void 0:n.nicename;l&&s.fillText(`Country: ${l}`,50,310)}t.toBlob(l=>{const m=URL.createObjectURL(l);te(m);const x=[...B];x[0]=m,Q(x);const b=new File([l],"map-image.png",{type:"image/png"}),R=[...V];R[0]=b,E(R)},"image/png")};d.useEffect(()=>{if(a&&(["country_id","post_code","city","address_line_1","address_line_2","property_type_id","exit_type_id","deal_type_id","no_of_dwelling","no_of_guests","tenure_type"].forEach(s=>{a[s]!==void 0&&a[s]!==null&&g(s,a[s].toString())}),a.property_type_category_id&&g("property_type_category_id",a.property_type_category_id.toString()),a.map_image_url&&(te(a==null?void 0:a.map_image_url),Q(s=>{const r=[...s];return r[0]=a==null?void 0:a.map_image_url,r})),a.image_url&&Q(s=>{const r=[...s];return r[1]=a==null?void 0:a.image_url,r}),E([null,null]),a.property_deal_media&&Array.isArray(a.property_deal_media))){const s=a.property_deal_media.map(r=>r||null).filter(Boolean);Z(s)}},[a,g]),d.useEffect(()=>{if(window.google&&window.google.maps&&window.google.maps.Geocoder)Oe(!0);else{const t=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.Geocoder&&(Oe(!0),clearInterval(t))},500);return()=>clearInterval(t)}},[]),d.useEffect(()=>{Ae&&!De&&!Le&&($(!0),$e?gt():(ge(!0),ve(),$(!1),W(!0)))},[Ae,$e,Le]),d.useEffect(()=>{z&&ie&&ie&&(Me(),$(!1),W(!0),C(""))},[z,ie]);const gt=()=>{var m,x;if(!q||!T||!re){$(!1),C("postal code is not valid");return}if(z&&ie){$(!1),W(!0),C(""),Me();return}const t=(x=(m=o==null?void 0:o.data)==null?void 0:m.countries)==null?void 0:x.find(b=>b.id==re);if(!t){$(!1),C("Selected country is invalid");return}const s=t.nicename,r=t.iso||t.iso3,i=[q,T,s].filter(Boolean);if(i.length<3){$(!1),C("Complete address information is required");return}const n=i.join(", ");if(!window.google||!window.google.maps||!window.google.maps.Geocoder){ge(!0),ve(),$(!1),W(!0);return}new window.google.maps.Geocoder().geocode({address:n},(b,R)=>{if(R==="OK"&&b[0]){const u=b[0].address_components.find(U=>U.types.includes("country"));if(u){const U=u.long_name,ne=u.short_name;if(!(ne===r||ne===t.iso3||U.toLowerCase().includes(s.toLowerCase())||s.toLowerCase().includes(U.toLowerCase()))){C(`Address not found in ${s}`),ge(!0),ve(),$(!1),W(!0);return}}const A=b[0].geometry.location_type,p=b[0].geometry.viewport!==void 0;if(A==="ROOFTOP"||A==="RANGE_INTERPOLATED"||p){const U=b[0].geometry.location;se({lat:U.lat(),lng:U.lng()}),ge(!1)}else ge(!0),C("post code is not valid"),ve()}else{let u="Address validation failed";R==="ZERO_RESULTS"?u="Address not found":R==="INVALID_REQUEST"?u="Invalid address format":R==="OVER_QUERY_LIMIT"&&(u="Too many requests, please try again later"),C(u),ge(!0),ve()}$(!1),W(!0)})},ht=t=>{if(!t||typeof t!="string")return!1;const s=["rd","road","st","street","ln","lane","ave","avenue","blvd","boulevard","ct","court","dr","drive","pl","place","sq","square","way","terrace","ter"],r=t.toLowerCase().split(" "),i=r[r.length-1];return s.includes(i)||i.endsWith(".")&&s.includes(i.slice(0,-1))?(g("address_line_1",t),!0):!1},yt=t=>{var R;if(!t||!t.address_components)return;W(!1),$(!1),K(!1),C(""),se(null),te(null);const s=[...B];s[0]&&!(a!=null&&a.map_image)&&(s[0]=null,Q(s));const r=t.address_components,i=r.find(u=>u.types.includes("postal_code")),n=r.find(u=>u.types.includes("administrative_area_level_1")),l=r.find(u=>u.types.includes("street_number")),m=r.find(u=>u.types.includes("administrative_area_level_2")),x=r.find(u=>u.types.includes("route")),b=r.find(u=>u.types.includes("locality")||u.types.includes("postal_town")||u.types.includes("administrative_area_level_2"));if(l&&x){const u=`${l.long_name} ${x.long_name}`;g("address_line_1",u)}else if(t.formatted_address){const u=t.formatted_address.split(",").map(A=>A.trim());if(u.length>0){const A=u[0];g("address_line_1",A)}}if(b)g("address_line_2",b.long_name),F("address_line_2");else if(t.formatted_address){const u=t.formatted_address.split(",").map(A=>A.trim());u.length>1&&(g("address_line_2",u[1]),F("address_line_2"))}if(i&&(g("post_code",i.long_name),F("post_code")),m&&(g("city",m.long_name),F("city")),n&&((R=o==null?void 0:o.data)!=null&&R.countries)){const u=o.data.countries.find(A=>A.iso.toLowerCase()===n.short_name.toLowerCase()||A.nicename.toLowerCase()===n.long_name.toLowerCase());u&&(g("country_id",u.id),F("country_id"))}},Me=()=>{if(!z)return;ee&&(URL.revokeObjectURL(ee),te(null));const t="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{lat:s,lng:r}=z,i=`https://maps.googleapis.com/maps/api/staticmap?center=${s},${r}&zoom=16&size=600x400&maptype=roadmap&markers=color:red%7C${s},${r}&key=${t}`,n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const l=document.createElement("canvas");l.width=n.width,l.height=n.height,l.getContext("2d").drawImage(n,0,0),l.toBlob(x=>{const b=URL.createObjectURL(x);te(b),C(""),he(!0);const R=[...B];R[0]=b,Q(R);const u=new File([x],"map-image.png",{type:"image/png"}),A=[...V];A[0]=u,E(A)},"image/png")},n.onerror=l=>{C("Failed to generate map. Please try again.");const m=document.createElement("canvas");m.width=600,m.height=400;const x=m.getContext("2d");x.fillStyle="#e8e8e8",x.fillRect(0,0,m.width,m.height),x.fillStyle="#333",x.font="16px Arial",x.fillText(`Location: ${s}, ${r}`,20,30),x.fillText(`Address: ${ae||""}`,20,60),x.fillText(`${q||""}`,20,90),x.fillText(`${T||""}`,20,120),x.fillStyle="red",x.beginPath(),x.arc(m.width/2,m.height/2,10,0,2*Math.PI),x.fill(),m.toBlob(b=>{const R=URL.createObjectURL(b);te(R);const u=[...B];u[0]=R,Q(u);const A=new File([b],"map-image.png",{type:"image/png"}),p=[...V];p[0]=A,E(p)},"image/png")},n.src=i},ze=d.useRef(null),xt=d.useRef(null),_t=()=>ze.current.click(),bt=(t,s)=>{const r=[...B];r[s]=URL.createObjectURL(t),Q(r);const i=[...V];i[s]=t,E(i)},jt=t=>{event.stopPropagation();const s=[...B];s[t]=null,Q(s);const r=[...V];r[t]=null,E(r)},Be=async(t,s)=>{const{media_id:r,property_deal_id:i}=s;Z(n=>{const l=[...n];return l.splice(t,1),l});try{const n=await zt(i,r);n&&n.data}catch{console.log("Failed to delete deal media")}},qe=["image/png","image/jpeg","image/jpg"],Ge=25,vt=t=>{const s=t.target.files[0];if(s){if(!qe.includes(s.type)){v("Only PNG, JPG, and JPEG formats are allowed.");return}if(s.size>Ge*1024*1024){v("File size must be less than 25 MB.");return}v(""),bt(s,1),t.target.value=""}},Nt=t=>{const s=Array.from(t.target.files);if(!s.length)return;if(s.filter(n=>!qe.includes(n.type)||n.size>Ge*1024*1024).length>0){v("Only PNG, JPG, and JPEG formats are allowed (max 25MB).");return}v("");const i=s.map(n=>({file:n,preview:URL.createObjectURL(n)}));Z(n=>{let l=[...n];if(G===3){let m=0;for(;m<i.length&&l.length<3;)l.push(i[m]),m++;m<i.length&&l.push(...i.slice(m))}else if(G!=null&&G<3){l[G]&&l.push(l[G]),l[G]=i[0];let m=1;for(let x=0;x<3&&m<i.length;x++)l[x]||(l[x]=i[m],m++);m<i.length&&l.push(...i.slice(m))}return l}),t.target.value=""},wt=async t=>{var u,A;const s=O.property_types.find(p=>p.id==t.property_type_id);if((((A=(u=s==null?void 0:s.property_type_categories)==null?void 0:u.find(p=>p.id==t.property_type_category_id))==null?void 0:A.sub_categories)??[]).length===0&&(t.sub_category_id=""),!Le&&!ie&&(C("Please validate the postal code by completing the address"),q&&T&&re&&await je(),!ie))return;if(Fe&&!t.tenure_type){C("Please select a tenure type (Freehold or Leasehold)");return}const i=V[0],n=V[1],l=!!(a!=null&&a.id);if(!l&&(!i||!n)){v("Thumbnail image is required.");return}const m=Object.keys(t).some(p=>{var de,pe;const U=(de=t[p])==null?void 0:de.toString(),ne=(pe=a==null?void 0:a[p])==null?void 0:pe.toString();return U!==ne}),x=!!i||!!n||I.some(p=>p.file instanceof File);if(!m&&!x){const p={...a,step:2};y(lt(p)),y({type:"deal/setCurrentStep",payload:Math.max(Te,2)}),Pe("/create-deal/financials");return}const b=new FormData;Object.keys(t).forEach(p=>{t[p]!==void 0&&t[p]!==null&&b.append(p,t[p])}),b.append("step","1"),l&&b.append("_method","PATCH"),z!=null&&z.lat&&(z!=null&&z.lng)&&(b.append("lat",z.lat),b.append("lng",z.lng)),i instanceof File&&b.append("map_image",i),n instanceof File&&b.append("image",n),I.forEach((p,U)=>{p.file instanceof File&&b.append("images[]",p.file)}),await Ne({apiFn:l?()=>Bt(a.id,b):()=>qt(b),data:b,headers:{"Content-Type":"multipart/form-data"},onSuccess:p=>{var ne,de,pe;y(Gt(!0));const U={...p.deal,step:2};(ne=p.deal)!=null&&ne.map_image_url&&(U.map_image=p.deal.map_image_url),(de=p.deal)!=null&&de.image_url&&(U.image=p.deal.image_url),Array.isArray((pe=p.deal)==null?void 0:pe.property_deal_media)&&(U.other_images=p.deal.property_deal_media.map(Ce=>Ce||null).filter(Boolean)),y(lt(U)),y({type:"deal/setCurrentStep",payload:Math.max(Te,2)}),Pe("/create-deal/financials")},onError:p=>{var de,pe,Ce,at;console.log("API error:",p);const U=((pe=(de=p==null?void 0:p.response)==null?void 0:de.data)==null?void 0:pe.message)||(p==null?void 0:p.message)||"",ne=((at=(Ce=p==null?void 0:p.response)==null?void 0:Ce.data)==null?void 0:at.status)||"";if(U.toLowerCase().includes("under maintenance")||ne.toLowerCase().includes("disabled")||U.toLowerCase().includes("deal creation is currently disabled")){ut(!0),p.suppressToast=!0;return}}})},O=(o==null?void 0:o.data)||{property_types:[],deal_types:[],exit_types:[]},Ct=((We=o==null?void 0:o.data)==null?void 0:We.countries)||[],ye=c("property_type_id");c("sub_category_id");const Ie=c("deal_type_id");return d.useEffect(()=>{var t;if(ye&&((t=o==null?void 0:o.data)!=null&&t.property_types)){const s=o.data.property_types.find(r=>r.id==ye);if(s){const r=s.slug==="commercial"||s.slug==="mixed-Use";it(r),r?a!=null&&a.tenure_type&&c("tenure_type")!==a.tenure_type&&g("tenure_type",a.tenure_type):c("tenure_type")!==""&&g("tenure_type","")}}},[ye,(Ye=o==null?void 0:o.data)==null?void 0:Ye.property_types,g,a]),d.useEffect(()=>{var t,s;if(ye){const r=(t=O.property_types)==null?void 0:t.find(l=>l.id==ye),i=c("property_type_category_id");!((s=r==null?void 0:r.property_type_categories)!=null&&s.some(l=>l.id==i))&&i!==""&&g("property_type_category_id","")}},[ye,O.property_types,g]),d.useEffect(()=>{if(Ie&&O.deal_types){const t=O.deal_types.find(s=>s.id===Number(Ie));t&&(t.slug==="single_let"?(we(k.dwellingsforSingleLet),D(!1)):t.slug==="hmo"?(we(k.dwellingsforHMO),D(!1)):t.slug==="sa"?(we(k.dwellingsforSA),D(!0)):(we(k.dwellingsforAll),D(!1)))}},[Ie,O.deal_types]),d.useEffect(()=>{try{if(ie&&ae&&typeof ae=="string"&&!q){const t=ae.trim().split(/\s+/);if(t.length>2){const s=["rd","road","st","street","ln","lane","ave","avenue","blvd","boulevard","ct","court","dr","drive","pl","place","sq","square","way","terrace","ter"];let r=-1;for(let l=0;l<t.length;l++){const m=t[l].toLowerCase().replace(/\W/g,"");if(s.includes(m)){r=l;break}}let i,n;if(r>=0)i=t.slice(0,r+1).join(" "),n=t.slice(r+1).join(" ");else{const l=Math.ceil(t.length/2);i=t.slice(0,l).join(" "),n=t.slice(l).join(" ")}(ae!==i||n&&q!==n)&&(g("address_line_1",i,{shouldValidate:!1,shouldDirty:!0}),n&&g("address_line_2",n,{shouldValidate:!1,shouldDirty:!0}))}}}catch(t){console.error("Error in address splitting useEffect:",t)}},[ie,ae,q,g]),d.useEffect(()=>()=>{ee&&URL.revokeObjectURL(ee),I.forEach(t=>{t.preview&&typeof t.preview=="string"&&t.preview.startsWith("blob:")&&URL.revokeObjectURL(t.preview)}),B.forEach(t=>{t&&typeof t=="string"&&t.startsWith("blob:")&&URL.revokeObjectURL(t)})},[]),d.useEffect(()=>{var t;(t=O.property_types)!=null&&t.length&&(ce({property_type_id:O.property_types[0].id}),F("property_type_id"))},[O.property_types,ce]),e.jsx(e.Fragment,{children:pt?e.jsx(Ht,{}):e.jsxs("div",{className:"create-deal-address-form-wrap",children:[L?e.jsx(Ut,{}):e.jsxs(e.Fragment,{children:[Re&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}),e.jsx("div",{className:"address-detail-form-wrap",children:e.jsxs("form",{onSubmit:J(wt),className:"create-deal-address-form",children:[e.jsxs("div",{className:"address-details-form-sec",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2 dark:text-white",children:"Address details"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-2 lg:gap-5 mb-2 lg:mb-10 ",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold light-black mb-2 dark:text-white",children:k.addressLine1}),e.jsx(Et,{name:"address_line_1",placeholder:"Enter a Address1",control:me,defaultValue:(a==null?void 0:a.address_line_1)||"",rules:{required:`${k.addressLine1} is required`},render:({field:t})=>e.jsx(Vt,{value:t.value,onChange:s=>{t.onChange(s),ht(s)},onPlaceSelected:yt,className:"form-control focus:outline-none"})}),h.address_line_1&&e.jsx("p",{className:"text-red-500 text-sm",children:h.address_line_1.message})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold light-black mb-2  dark:text-white",children:k.addressLine2}),e.jsx("input",{type:"text",placeholder:"Enter a Address2",...N("address_line_2",{required:`${k.addressLine2} is required`,onChange:t=>{if(W(!1),$(!1),K(!1),se(null),C(""),ee&&!(a!=null&&a.map_image)){URL.revokeObjectURL(ee),te(null);const r=[...B];r[0]&&(r[0]=null,Q(r))}t.target.value&&T&&re&&setTimeout(()=>{je()},500)}}),defaultValue:(a==null?void 0:a.address_line_2)||"",className:"form-control focus:outline-none"}),h.address_line_2&&e.jsx("p",{className:"text-red-500 text-sm",children:h.address_line_2.message})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-2 md:gap-5 mb-5",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold light-black mb-2 dark:text-white",children:k.city}),e.jsx("input",{...N("city",{required:"City is required",pattern:{value:/^[A-Za-z\s]+$/,message:"City name should contain only letters"}}),type:"text",placeholder:"Enter city",className:"form-control"}),h.city&&e.jsx("p",{className:"text-red-500 text-sm",children:h.city.message})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold light-black mb-2 dark:text-white",children:k.country}),e.jsxs("select",{...N("country_id",{required:`${k.country} is required`,onChange:t=>{if(W(!1),$(!1),K(!1),se(null),he(!1),C(""),ee){URL.revokeObjectURL(ee),te(null);const r=[...B];r[0]&&!(a!=null&&a.map_image)&&(r[0]=null,Q(r))}t.target.value&&T&&q&&setTimeout(()=>{je()},500)}}),className:"form-select focus:outline-none",children:[e.jsx("option",{value:"",children:"Select a country"}),Ct.map(t=>e.jsx("option",{value:t.id,selected:(a==null?void 0:a.country_id)===t.id,children:t.nicename},t.id))]}),h.country_id&&e.jsx("p",{className:"text-red-500 text-sm",children:h.country_id.message})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold light-black mb-2 dark:text-white",children:k.postCode}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Enter Post Code",maxLength:10,...N("post_code",{required:`${k.postCode} is required`,minLength:{value:5,message:"Post code must be at least 5 characters"},onChange:t=>{const s=t.target.value;if(W(!1),$(!1),K(!1),he(!1),C(""),se(null),ee){URL.revokeObjectURL(ee),te(null);const r=[...B];r[0]&&!(a!=null&&a.map_image)&&(r[0]=null,Q(r))}s&&s.length>=5&&re&&(ae||q)&&setTimeout(()=>{s===c("post_code")&&je()},500)}}),defaultValue:(a==null?void 0:a.post_code)||"",className:`form-control focus:outline-none ${be&&!h.post_code?"border-red-500":""}`}),be&&!h.post_code&&e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-red-500 font-bold",children:"×"}),De&&e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})}),ie&&!De&&!h.post_code&&!be&&e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 font-bold",children:"✓"})]}),h.post_code&&e.jsx("p",{className:"text-red-500 text-sm",children:h.post_code.message}),be&&!h.post_code&&e.jsxs("div",{className:"mt-1 text-red-500 text-sm flex items-start",children:[e.jsx("span",{className:"mr-1 font-bold",children:"×"}),e.jsx("span",{children:be})]})]})]})]}),e.jsxs("div",{className:"map-generated-sec mb-10",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2  dark:text-white",children:"Map generated"}),e.jsx("div",{className:"bg-[#EBEBEC] dark:bg-[#282828] dark:border-[#454545] flex items-center justify-center relative create-deal-upload-document-wrap",children:B[0]?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"300",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:ft(),title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[120px] right-[15px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:mt,children:e.jsx(Rt,{})})]}):!Ae&&e.jsx("div",{className:"text-center px-4",children:e.jsx("p",{className:"text-gray-400 mb-2",children:k.mapImage})})})]}),e.jsxs("div",{className:"upload-media-sec mb-10",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2  dark:text-white",children:"Upload media"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-5",children:[e.jsx("div",{onClick:_t,className:"bg-[#EBEBEC] dark:bg-[#282828] dark:border-[#454545] flex items-center justify-center relative create-deal-upload-document-wrap",children:B[1]?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:B[1],alt:"Property",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",className:"absolute top-1 right-1 z-10 text-2xl text-red-500",onClick:t=>{t.stopPropagation(),jt(1)},children:e.jsx(ke,{})})]}):e.jsxs("p",{className:"text-gray-400 cursor-pointer text-[17px] flex flex-col items-center justify-center mx-5 text-center",children:[e.jsx("span",{children:e.jsx(Ue,{size:50})}),e.jsx("span",{className:"text-[#6C5DD3]",children:"Click to upload"})," or drag and drop files PNG, JPEG, JPG (max size 25MB)"]})}),e.jsxs("div",{className:"additional-images-grid-wrap grid grid-cols-4 gap-2",children:[Array.from({length:3}).map((t,s)=>{const r=_[s],i=Xt(r);return e.jsx("div",{className:"additional-images-grid-col flex items-center justify-center relative cursor-pointer",onClick:()=>_e(s),children:i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i,alt:`Other ${s}`,className:"w-full h-full object-cover rounded"}),e.jsx("button",{type:"button",className:"absolute top-1 right-1 text-xl text-red-500",onClick:n=>{n.stopPropagation(),Be(s,r)},children:e.jsx(ke,{size:16})}),s===2&&f>0&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center text-white font-semibold text-lg rounded pointer-events-none",children:["+",f]})]}):e.jsx(Ue,{className:"text-2xl text-[#DADADA]"})},s)}),e.jsx("div",{className:"additional-images-grid-col flex items-center justify-center relative cursor-pointer",onClick:()=>_e(3),children:e.jsx(Ue,{className:"text-2xl text-[#DADADA]"})})]}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,className:"hidden",ref:xt,onChange:Nt,onClick:t=>t.target.value=null}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:ze,onChange:vt,onClick:t=>{t.target.value=null}}),j&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j})]})]}),e.jsxs("div",{className:"property-type-details-sec mb-5",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2 dark:text-white",children:"Property details"}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-5 property-type-option-wrap",children:O.property_types.map((t,s)=>{const r=fe[s]||Ee;return e.jsxs("label",{className:`flex md:grid items-center gap-2 p-3 rounded-lg cursor-pointer border transition-all
                            ${c("property_type_id")==t.id?"border-2 border-[#6C5DD3] bg-[#EDF4FF] rounded-xl dark:bg-[#262145]":"border-gray-300 rounded-xl dark:border-[#454545]"}`,children:[e.jsx("input",{type:"radio",...N("property_type_id",{}),value:t.id,className:"hidden"}),e.jsx("span",{className:"property-type-icon-wrap",children:e.jsx(r,{className:"text-xl text-[#595959] dark:text-[#C5C5C5]"})}),e.jsx("span",{className:"font-medium text-[#595959] property-type-detail-text dark:text-[#C5C5C5]",children:t.title})]},t.id)})})]}),e.jsx("div",{className:"property-category-sec mb-5",children:c("property_type_id")&&e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block font-semibold mb-3 heading-color2 dark:text-white",children:k.propertyCategory}),e.jsxs("div",{className:"property-category-option-wrap grid lg:grid-cols-3 gap-5",children:[(Ke=O.property_types.find(t=>t.id==c("property_type_id")))==null?void 0:Ke.property_type_categories.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer property-category-radio-option",children:[e.jsx("input",{type:"radio",...N("property_type_category_id",{required:`Select a ${k.propertyCategory.toLowerCase()}`}),value:t.id,className:"hidden",defaultChecked:Number(a==null?void 0:a.property_type_category_id)===Number(t.id)}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border transition-all
                               ${Number(c("property_type_category_id"))===Number(t.id)?"border-[#6C5DD3] bg-[#fff] active":"border-[#DADADA]"}`,children:Number(c("property_type_category_id"))===Number(t.id)&&e.jsx("div",{className:"w-[8px] h-[8px] rounded-full bg-[#6C5DD3]"})}),e.jsx("span",{className:"text-[#595959] font-medium",children:t.title})]},t.id)),((Qe=O.property_types.find(t=>t.id==c("property_type_id")))==null?void 0:Qe.property_type_categories.length)===0&&e.jsx("span",{className:"text-gray-500",children:"No categories available for this property type"})]}),h.property_type_category_id&&e.jsx("p",{className:"text-red-500 text-sm",children:h.property_type_category_id.message})]})}),e.jsx("div",{className:"property-sub-category-sec mb-5",children:c("property_type_category_id")&&((Xe=(He=(Je=(Ze=O.property_types.find(t=>t.id==c("property_type_id")))==null?void 0:Ze.property_type_categories)==null?void 0:Je.find(t=>t.id==c("property_type_category_id")))==null?void 0:He.sub_categories)==null?void 0:Xe.length)>0&&e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block font-semibold mb-3 heading-color2 dark:text-white",children:k.propertySubCategory}),e.jsx("div",{className:"property-category-option-wrap grid lg:grid-cols-3 gap-5",children:(st=(tt=(et=O.property_types.find(t=>t.id==c("property_type_id")))==null?void 0:et.property_type_categories)==null?void 0:tt.find(t=>t.id==c("property_type_category_id")))==null?void 0:st.sub_categories.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer property-category-radio-option dark:!text-white",children:[e.jsx("input",{type:"radio",...N("sub_category_id",{required:`Select a ${k.propertySubCategory.toLowerCase()}`}),value:t.id,className:"hidden",defaultChecked:Number(a==null?void 0:a.sub_category_id)===Number(t.id)}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border-2 transition-all
                                ${Number(c("sub_category_id"))===Number(t.id)?"border-[#6C5DD3] bg-[#fff] active":"border-[#DADADA]"}`,children:Number(c("sub_category_id"))===Number(t.id)&&e.jsx("div",{className:"w-[8px] h-[8px] rounded-full bg-[#6C5DD3]"})}),e.jsx("span",{className:"text-dark dark:text-white",children:t.title})]},t.id))}),h.sub_category_id&&e.jsx("p",{className:"text-red-500 text-sm",children:h.sub_category_id.message})]})}),e.jsx("div",{className:"tenure-type-sec mb-10",children:Fe&&e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold mb-3 heading-color2 dark:text-white",children:"Tenure Type"}),e.jsxs("div",{className:"property-category-option-wrap grid lg:grid-cols-3 gap-5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer property-category-radio-option",children:[e.jsx("input",{type:"radio",...N("tenure_type",{required:"Select a tenure type"}),value:"freehold",className:"hidden"}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border-2 transition-all
                            ${c("tenure_type")==="freehold"?"border-[#6C5DD3] bg-[#fff] active":"border-[#DADADA]"}`,children:c("tenure_type")==="freehold"&&e.jsx("div",{className:"w-[8px] h-[8px] rounded-full bg-[#6C5DD3]"})}),e.jsx("span",{className:"text-dark dark:text-white",children:"Freehold"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer property-category-radio-option dark:text-white",children:[e.jsx("input",{type:"radio",...N("tenure_type",{required:"Select a tenure type"}),value:"leasehold",className:"hidden"}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border-2 transition-all
                            ${c("tenure_type")==="leasehold"?"border-[#6C5DD3] bg-[#fff] active":"border-[#DADADA]"}`,children:c("tenure_type")==="leasehold"&&e.jsx("div",{className:"w-[8px] h-[8px] rounded-full bg-[#6C5DD3]"})}),e.jsx("span",{className:"text-dark dark:text-white",children:"Leasehold"})]}),h.tenure_type&&e.jsx("p",{className:"text-red-500 text-sm",children:h.tenure_type.message})]})]})}),e.jsx("div",{className:"deal-type-sec mb-10",children:e.jsxs("div",{className:"",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2 dark:text-white",children:k.dealType}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-5 deal-type-option-wrap",children:[O.deal_types.map((t,s)=>{const r=le[s]||Ee;return e.jsxs("label",{className:"grid items-center cursor-pointer property-detail-radio-wrap",children:[e.jsx("input",{type:"radio",...N("deal_type_id",{required:`Select a ${k.dealType.toLowerCase()}`}),value:t.id,className:"hidden",defaultChecked:Number(a==null?void 0:a.deal_type_id)===Number(t.id)}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border-2 transition-all hidden
          ${c("deal_type_id")==t.id?"border-[#6C5DD3] bg-[#6C5DD3] active":"border-[#6C5DD3]"}`,children:c("deal_type_id")==t.id&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-[#6C5DD3]"})}),e.jsx("div",{className:"",children:e.jsx("span",{className:"property-type-icon-wrap",children:e.jsx(r,{className:"text-xl text-[#595959] dark:text-[#C5C5C5]"})})}),e.jsx("span",{className:"font-medium text-[#595959] property-type-detail-text dark:text-[#C5C5C5]",children:t.title})]},t.id)}),h.deal_type_id&&e.jsx("p",{className:"text-red-500 text-sm",children:h.deal_type_id.message})]})]})}),e.jsx("div",{className:"exit-type-sec mb-10",children:c("deal_type_id")==3&&e.jsxs("div",{className:"",children:[e.jsx("h4",{className:"font-semibold mb-4 heading-color2 dark:text-white",children:k.exitType}),e.jsxs("div",{className:"property-category-option-wrap grid lg:grid-cols-3 gap-5",children:[O.exit_types.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer property-category-radio-option",children:[e.jsx("input",{type:"radio",...N("exit_type_id",{required:`Select an ${k.exitType.toLowerCase()}`}),value:t.id,className:"hidden",defaultChecked:Number(a==null?void 0:a.exit_type_id)===Number(t.id)}),e.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full border-2 transition-all
                            ${c("exit_type_id")==t.id?"border-[#6C5DD3] bg-[#fff] active":"border-[#DADADA]"}`,children:c("exit_type_id")==t.id&&e.jsx("div",{className:"w-[8px] h-[8px] rounded-full bg-[#6C5DD3]"})}),e.jsx("span",{className:"text-dark dark:text-white",children:t.title})]},t.id)),h.exit_type_id&&e.jsx("p",{className:"text-red-500 text-sm",children:h.exit_type_id.message})]})]})}),e.jsx("div",{className:"no-of-bedrooms-sec mb-10",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-5",children:[Se&&e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-3 heading-color2 dark:text-white",children:Se}),e.jsx("input",{type:"text",maxLength:3,...N("no_of_dwelling",{required:`${Se} is required`,pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}),defaultValue:a==null?void 0:a.no_of_dwelling,className:"form-control focus:outline-none"}),h.no_of_dwelling&&e.jsx("p",{className:"text-red-500 text-sm",children:h.no_of_dwelling.message})]}),S&&e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold mb-3 heading-color2 dark:text-white",children:"No. of Guests"}),e.jsx("input",{type:"text",maxLength:3,...N("no_of_guests",{required:"No. of Guests is required",pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}),defaultValue:a==null?void 0:a.no_of_guests,className:"form-control focus:outline-none"}),h.no_of_guests&&e.jsx("p",{className:"text-red-500 text-sm",children:h.no_of_guests.message})]})]})}),e.jsx("div",{className:"mt-5 flex justify-end gap-4",children:e.jsxs("button",{type:"submit",className:"w-fit purple-btn items-center gap-3 justify-center",style:{display:"flex"},disabled:Re,children:["Next",e.jsx(Tt,{})]})})]})})]}),w&&e.jsx(Zt,{title:"Manage Images",initialImages:es(I),otherImages:I,initialActiveIndex:oe,maxFiles:20,onImagesChange:X,onClose:()=>H(!1),removeOtherImage:Be,acceptedFileTypes:"image"})]})})};export{ds as default};
