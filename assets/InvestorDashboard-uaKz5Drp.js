import{w as ae,t as re,u as B,r as l,aK as le,m as t,L as ne,x as ce,A as oe,z as ie,n as de,c5 as pe,c9 as xe,D as Ae,H as me}from"./index-BGle0hGA.js";import{P as ge}from"./PaginationNew-BLNvL_kh.js";import{A as ue}from"./index-D8ojAnuT.js";import{D as he}from"./DeleteConfirmationModal-BegBlAHX.js";import{A as fe,m as be}from"./proxy-B7LgR9by.js";const we="data:image/png;base64,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",ke="data:image/png;base64,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",je=D=>{const U=ae(),{showSnackbar:f}=re(),{user:b,role:Ie}=B(e=>e.user),[p,S]=l.useState(0),[u,_]=l.useState("all"),[T,j]=l.useState(!1),[K,ye]=l.useState(!1),[x,M]=l.useState([]),[I,y]=l.useState([]),[v,F]=l.useState(null),[O,ve]=l.useState(!1),X=le.useRef(null),[A,Fe]=l.useState("all"),[Ne,Ee]=l.useState(!1),[N,P]=l.useState(null),[Ce,Qe]=l.useState(null),[z,E]=l.useState(!1),[Be,De]=l.useState(!1),[R,C]=l.useState(!1),[o,L]=l.useState(),w=B(e=>e.deal.dealsTypes),[i,V]=l.useState({currentPage:1,totalPages:1,from:0,to:0,total:0,hasMorePages:!1}),[c,h]=l.useState({per_page:(i==null?void 0:i.total)>=5||(i==null?void 0:i.total)==0?5:(i==null?void 0:i.total)||1,page:1,status:"all",year:"",propertyTypeId:"",dealTypeId:"",sortColumn:"created_at",sortOrder:"desc",search:""}),k=async e=>{const r={user_id:e==null?void 0:e.user_id,property_deal_id:e==null?void 0:e.id};await me(r),U(`/deal-detail/${e.unique_id}`)},q=async()=>{var e;if(N)try{E(!0);let r=await Ae(N);f((e=r==null?void 0:r.data)==null?void 0:e.message),Q(),C(!1),P(null)}catch(r){console.error("Error deleting deal:",r),f("Failed to delete deal","error")}finally{E(!1)}},Q=async()=>{var e,r;try{j(!0);const s={page:c.page,perPage:c.per_page,status:c.status===""?null:c.status,year:c.year===""?null:c.year,propertyTypeId:c.propertyTypeId===""?null:c.propertyTypeId,sortColumn:c.sortColumn,sortOrder:c.sortOrder};A!=="all"&&A!=="tab"&&(s.dealTypeId=c.dealTypeId);const n=await pe(s);if(n&&n.data){S((r=(e=n==null?void 0:n.data)==null?void 0:e.data)==null?void 0:r.propertyDealShares),M(n.data.data.propertyDealShares||[]);const a=n.data.data.page_context;a&&V({currentPage:parseInt(a==null?void 0:a.page)||1,totalPages:Math.ceil(parseInt((a==null?void 0:a.total_records)||0)/parseInt((a==null?void 0:a.per_page)||10)),from:(parseInt(a.page)-1)*parseInt(a.per_page)+1,to:Math.min(parseInt(a==null?void 0:a.page)*parseInt(a==null?void 0:a.per_page),parseInt((a==null?void 0:a.total_records)||0)),total:parseInt((a==null?void 0:a.total_records)||0),hasMorePages:(a==null?void 0:a.has_more_page)==="true"})}}catch{f("Failed to fetch deals. Please try again.","error")}finally{j(!1)}};l.useEffect(()=>{h(e=>({...e,status:u==="all"?"all":u,page:1}))},[u]),l.useEffect(()=>{var r,s;const e=A==="all"?1:((s=(r=w==null?void 0:w.deal_types)==null?void 0:r.find(n=>n.slug===A))==null?void 0:s.id)??null;h(n=>({...n,dealTypeId:e,page:1}))},[A]);const J=[{label:"Deals sent to me",status:"all",icon:t.jsx(ne,{className:"w-5 h-5 text-[#595959] dark:text-[#C5C5C5]"}),count:(o==null?void 0:o.total)??0,monthly:(o==null?void 0:o.total_monthly)??0},{label:"Deals interested in",status:1,icon:t.jsx(ce,{className:"w-5 h-5 text-[#595959] dark:text-[#C5C5C5]"}),count:(o==null?void 0:o.interested)??0,monthly:(o==null?void 0:o.interested_monthly)??0},{label:"Deals not interested in",status:2,icon:t.jsxs(t.Fragment,{children:[t.jsx("img",{src:we,alt:"Uninterested",className:"w-5 h-5 dark:hidden"}),t.jsx("img",{src:ke,alt:"Uninterested",className:"w-5 h-5 hidden dark:block"})]}),count:(o==null?void 0:o.not_interested)??0,monthly:(o==null?void 0:o.not_interested_monthly)??0}],H=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"",[W,Z]=l.useState(""),G=e=>{const r=e.target.value;Z(r),debouncedSearch(r)},Y=e=>{switch(Number(e)){case 1:return t.jsx("span",{className:"border border-[#D9F99D] rounded-xl bg-[#F7FEE7] px-2 py-1 text-xs text-[#4D7C0F] dark:bg-[#1A2E05] dark:text-[#BEF264] dark:border-[#3F6212]",children:"Interested"});case 2:return t.jsx("span",{className:"border border-[#FFE0E0] rounded-xl bg-[#FEF2F2] px-2 py-1 text-xs text-[#DE2424] dark:bg-[#371C1C] dark:text-[#FFA9A9] dark:border-[#751D1D]",children:"Not Interested"});case 0:case 3:return t.jsx("span",{className:"border border-[#E2E8F0] rounded-xl bg-[#F8FAFC] px-2 py-1 text-xs text-[#334155] dark-text-[#CBD5E1] dark:bg-[#020617] dark:border-[#1E293B]",children:"Awaiting response"});default:return t.jsx("span",{className:"border border-[#E2E8F0] rounded-xl bg-[#F1F5F9] px-2 py-1 text-xs text-[#64748B]",children:"Unknown"})}},$=[{label:"All Status",status:"all",count:p==null?void 0:p.all,value:"all"},{label:"Interested",status:"interested",count:p==null?void 0:p.interested,value:"1"},{label:"Not Interested",status:"not_interested",count:p==null?void 0:p.not_interested,value:"2"}];l.useEffect(()=>{c.dealTypeId&&Q()},[c]);const ee=e=>{const{name:r,value:s}=e.target;h({...c,[r]:s,page:1})},te=async()=>{try{const e=await xe();L(e.data.data)}catch(e){console.error("Error fetching counts:",e)}};l.useEffect(()=>{te()},[]);const se=e=>{var n,a,m,g;const r=[];if(e!=null&&e.no_of_dwelling){const d=(e==null?void 0:e.deal_type_id)===2?e.no_of_dwelling>1?" Beds":" Bed":e.no_of_dwelling>1?" Bedrooms":" Bedroom";r.push(e.no_of_dwelling+d)}if(e!=null&&e.deal_type&&r.push(e.deal_type.title),(n=e==null?void 0:e.sub_category)!=null&&n.title&&r.push(e.sub_category.title),(a=e==null?void 0:e.property_type_category)!=null&&a.title&&r.push((m=e.property_type_category)==null?void 0:m.title),(g=e==null?void 0:e.exit_type)!=null&&g.title){let d=e.exit_type.title.toLowerCase();d==="sell"?d="Flip":d==="refinance"&&(d="BRRR"),r.push(d)}return r.join(",")};return t.jsxs("div",{children:[t.jsx(he,{isOpen:R,onClose:()=>C(!1),onConfirm:q,title:"Delete Deal",isLoading:z}),t.jsxs("h1",{className:"text-3xl font-semibold text-dark dark:text-white",children:["Welcome Back, ",H(b==null?void 0:b.first_name)]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-4 p-4",children:J.map(({label:e,status:r,icon:s,count:n,monthly:a})=>t.jsx("div",{className:`border rounded-xl px-4 dashboard-box-col cursor-pointer ${u===r?"!bg-[#F6F7FE] border-[#AFB6F2] text-black dark:!bg-[#262145] dark:!border-[#6C5DD3] dark:!text-white":"dark:border-[#454545]"}`,onClick:()=>_(r),children:t.jsxs("div",{className:"flex flex-col h-full py-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-[15px]",children:e}),t.jsx("div",{className:"text-[30px] text-[#595959] ",children:s})]}),t.jsxs("div",{className:"flex flex-col justify-center items-start flex-1",children:[t.jsx("span",{className:"text-[46px] font-semibold",children:n}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:a>0?"text-[#039855]":a<0?"text-[#D92D20]":"text-[#595959] dark:text-[#9f9f9f]",children:a>0?`+${a}%`:`${a}%`}),t.jsx("span",{className:"text-[#595959] dark:text-[#9f9f9f]",children:" from last month"})]})]})]})},r))}),t.jsx("h3",{className:"text-[#333333] dark:text-[#C5C5C5]",children:"Deals"}),t.jsxs("div",{className:"total-deal-table-wrapper",children:[t.jsxs("div",{className:"flex flex-col md:flex-row space-x-4 justify-between px-4 py-4 gap-4 md:gap-0",children:[t.jsxs("div",{className:"relative custom-input-w",children:[t.jsx("input",{type:"text",placeholder:"Search for deals",className:"form-control",value:W,onChange:G,style:{paddingLeft:"40px"}}),t.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),t.jsx("div",{className:"p-1 rounded-xl",children:t.jsx("div",{children:t.jsx("ul",{className:"flex flex-nowrap justify-between items-center gap-1 deal-types-tabs-wrap text-xs sm:text-sm",children:$.map(({label:e,value:r,icon:s,count:n})=>t.jsx("li",{className:"flex-1",children:t.jsxs("button",{onClick:()=>ee({target:{name:"status",value:r}}),className:`tab-btn flex items-center justify-center gap-1 w-full ${c.status===r?"active":""}`,children:[t.jsx("span",{className:"shrink-0",children:s}),t.jsx("span",{className:"truncate",children:e}),n!==null&&t.jsx("span",{className:"ml-1 font-medium text-[#242424]",children:n})]})},r))})})})]}),T||K?t.jsx(ie,{}):t.jsx("div",{className:"overflow-x-auto dark:bg-[#222632] bg-[#EBEBEC] comparable-listing-table-wrap",children:t.jsxs("table",{className:`${x.length<3?"overflow-dropdown-issue":""}  w-full text-left border-collapse`,children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[#F8F8F8] text-dark dark:text-[#F8F8F8] border dark:bg-[#242424] dark:border-[#454545]",children:[t.jsx("th",{className:"",children:t.jsx("input",{type:"checkbox",onChange:e=>{e.target.checked?y(x.map(r=>r.id)):y([])},checked:I.length===x.length&&x.length>0})}),t.jsx("th",{className:"",children:"TITLE"}),t.jsx("th",{className:"",children:"COMPANY"}),t.jsx("th",{className:"",children:"ROI"}),t.jsx("th",{className:"",children:"STATUS"}),t.jsx("th",{className:"",children:"DATE"}),t.jsx("th",{className:"",children:"ACTIONS"})]})}),t.jsx("tbody",{children:x.length>0?x.map((e,r)=>{var n,a,m,g,d;const s=e==null?void 0:e.property_deal;return t.jsxs("tr",{className:"",children:[t.jsx("td",{children:t.jsx("input",{type:"checkbox",checked:I.includes(s==null?void 0:s.id),onChange:()=>handleSelectDeal(s==null?void 0:s.id)})}),t.jsx("td",{className:"",children:t.jsx("div",{className:"line-clamp-3 max-w-[200px] overflow-hidden text-ellipsis cursor-pointer",onClick:()=>{k(s)},children:se(s)})}),t.jsx("td",{className:"",children:t.jsx("div",{className:"line-clamp-3 max-w-[200px] overflow-hidden text-ellipsis cursor-pointer",onClick:()=>{k(s)},children:((n=e==null?void 0:e.contact)==null?void 0:n.company_name)||"-"})}),t.jsx("td",{children:(a=s==null?void 0:s.property_deal_investment)!=null&&a.return_on_cash_investment_percentage?`${parseFloat((m=s==null?void 0:s.property_deal_investment)==null?void 0:m.return_on_cash_investment_percentage).toFixed(0)}%`:(g=s==null?void 0:s.property_deal_sa_investment)!=null&&g.net_roi_percentage?`${parseFloat((d=s==null?void 0:s.property_deal_sa_investment)==null?void 0:d.net_roi_percentage).toFixed(0)}%`:"0%"}),t.jsx("td",{className:"",children:Y(e.intrust_status)}),t.jsx("td",{className:"",children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"}),t.jsx("td",{className:"relative",children:t.jsxs("div",{id:`dropdown-${s==null?void 0:s.id}`,className:"flex justify-center relative",children:[t.jsx("button",{onClick:()=>F(v===(s==null?void 0:s.id)?null:s==null?void 0:s.id),className:"text-lg",children:t.jsx(de,{className:"text-[#595959]"})}),t.jsx(fe,{children:v===(s==null?void 0:s.id)&&t.jsx(be.div,{ref:X,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:`absolute right-0 w-40 bg-white rounded shadow-lg z-10 ${O?"bottom-full mb-2":"bottom-full mt-2"}`,children:D!=="archive"&&t.jsxs("button",{onClick:()=>{k(s),F(null)},className:"flex items-center w-full px-4 py-2 hover:bg-gray-100 text-sm dark:bg-[#121212]",children:[t.jsx(ue,{className:"mr-2"})," View"]})})})]})})]},e==null?void 0:e.id)}):t.jsx("tr",{children:t.jsx("td",{colSpan:"10",className:"text-center p-4",children:"No shared deals available"})})})]})}),t.jsx(ge,{pagination:{total:i.total,currentPage:c.page,perPage:c.per_page>i.total?i.total:c.per_page,totalPages:Math.ceil(i.total/c.per_page)},setFilters:h})]})]})},Me=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"}));export{je as I,we as U,ke as a,Me as b};
