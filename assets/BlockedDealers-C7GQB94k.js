import{r as d,t as f,cG as g,m as e,z as p,cH as N,by as D,cI as y}from"./index-0vzpDfIT.js";import{D as v}from"./DeleteConfirmationModal-BPQTtrP4.js";const L=()=>{const[i,b]=d.useState([]),[u,x]=d.useState(!0),[r,n]=d.useState({isOpen:!1,dealerId:null,isLoading:!1}),{showSnackbar:o}=f();d.useEffect(()=>{h()},[]);const h=async()=>{var a,t,c,s;x(!0);try{const l=await g();b(((t=(a=l==null?void 0:l.data)==null?void 0:a.data)==null?void 0:t.blockedContacts)||[])}catch(l){console.error("Error fetching blocked dealers:",l),o(((s=(c=l==null?void 0:l.response)==null?void 0:c.data)==null?void 0:s.message)||"Failed to fetch blocked dealers. Please try again.","error")}finally{x(!1)}},j=a=>{n({isOpen:!0,dealerId:a,isLoading:!1})},m=()=>{n({isOpen:!1,dealerId:null,isLoading:!1})},k=async()=>{var a,t,c;n(s=>({...s,isLoading:!0}));try{const s=await y(r.dealerId);h(),m(),o(((a=s==null?void 0:s.data)==null?void 0:a.message)||"Dealer unblocked successfully","success")}catch(s){console.error("Error unblocking dealer:",s),o(((c=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:c.message)||"Failed to unblock dealer. Please try again.","error"),n(l=>({...l,isLoading:!1}))}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-center my-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Blocked Dealers"}),e.jsx("p",{className:"text-[#898E97]",children:"Manage your blocked dealers"})]})}),e.jsx("div",{className:"dark:bg-[#222632] bg-[#EBEBEC] rounded-lg overflow-hidden text-dark dark:text-white comparable-listing-table-wrap",children:u?e.jsx("div",{className:"flex justify-center items-center p-12",children:e.jsx(p,{})}):i.length===0?e.jsx("div",{className:"text-center p-12 text-dark dark:text-white",children:e.jsx("p",{children:"No blocked dealers found."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#6C5DD3] text-white",children:[e.jsx("th",{className:"p-4",children:"SN No."}),e.jsx("th",{className:"p-4",children:"Name"}),e.jsx("th",{className:"p-4",children:"Email"}),e.jsx("th",{className:"p-4",children:"Blocked Date"}),e.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:i.map((a,t)=>{var c,s;return e.jsxs("tr",{className:t%2===0?"":"dark:bg-[#191D27] bg-[#DEDEE0]",children:[e.jsx("td",{className:"p-4 border-0",children:t+1}),e.jsx("td",{className:"p-4 border-0",children:((c=a.blocked_user)==null?void 0:c.name)||"-"}),e.jsx("td",{className:"p-4 border-0",children:((s=a.blocked_user)==null?void 0:s.email)||"-"}),e.jsx("td",{className:"p-4 border-0",children:a.created_at?new Date(a.created_at).toLocaleDateString():"-"}),e.jsx("td",{className:"p-4 text-center border-0",children:e.jsx("div",{className:"flex justify-center space-x-3",children:e.jsx("button",{className:"text-[#6c5db5] hover:text-blue-400 bg-blue-100 hover:bg-blue-200 p-2 rounded-md",title:"Unblock dealer",onClick:()=>j(a.id),children:e.jsx(N,{className:"text-lg"})})})})]},a.id)})})]})})})]}),e.jsx(v,{isOpen:r.isOpen,onClose:m,onConfirm:k,isLoading:r.isLoading,title:"Unblock Dealer",message:"Are you sure you want to unblock this dealer?",children:r.isLoading&&e.jsx(D,{})})]})};export{L as default};
