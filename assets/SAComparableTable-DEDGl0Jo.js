import{u as c,w as y,v as w,ay as C,m as e,cz as _,aP as E,cs as D,ct as S,cu as A,cv as k,cw as o,cx as B,ap as F,aq as I,S as x,aK as m,cA as L,au as R}from"./index-BPP_8qLW.js";import{S as z}from"./SAComparablesMaps-EICxo0Yo.js";const $=()=>{var d,n;const r=c(s=>{var a;return(a=s==null?void 0:s.deal)==null?void 0:a.deal});c(s=>s.deal.SAnewComperableData);const t=y(),l=w(),p=c(s=>s.deal.currentStep),h="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{comparableDealId:b}=c(s=>s==null?void 0:s.deal),{handleApiCall:j}=C(),f=()=>{b&&l(L()),t("/create-deal/description")},u=()=>{l(R(!0));const s={_method:"PATCH"};j({apiFn:()=>m(r.id,s),onSuccess:a=>{var i;const v={...a==null?void 0:a.deal,id:(i=a==null?void 0:a.deal)==null?void 0:i.id};l(x(v))},onError:a=>{console.error("Error updating deal:",a)}}),l({type:"deal/setCurrentStep",payload:Math.max(p,4)}),t("/create-deal/summary")},N=()=>{t("/create-deal/sa-edit-comparable"),l(x(m))},g=(d=r==null?void 0:r.property_deal_sa_comparables)==null?void 0:d.some(s=>(s.lat||s.latitude)&&(s.lng||s.longitude));return e.jsxs("div",{children:[e.jsxs("div",{className:"sa-api-comparables-data-wrap",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsx("h5",{children:"Comparables"}),e.jsxs("button",{className:"purple-btn2 my-4  inline-flex items-center",onClick:N,children:[e.jsx("span",{className:"leading-none",children:"+ Edit Comparable"}),e.jsx(_,{className:"ml-1 text-white h-6 w-6 group-hover:text-[#6C5DD3] align-middle"})]})]}),g&&e.jsx("div",{className:"map-generated-sec mb-10",children:e.jsx("div",{className:"bg-[#EBEBEC] dark:bg-[#222632] flex items-center justify-center relative create-deal-upload-document-wrap",children:e.jsx(z,{locations:r.property_deal_sa_comparables,apiKey:h})})}),((n=r==null?void 0:r.property_deal_sa_comparables)==null?void 0:n.length)>0?r.property_deal_sa_comparables.map((s,a)=>e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-[260px_1fr_70px] gap-5 my-10 items-start",children:[e.jsx("div",{className:"w-full h-[200px] md:h-[200px] order-1 md:order-none",children:e.jsx("img",{src:(s==null?void 0:s.image_url)||(s==null?void 0:s.image)||E,alt:"Image",className:"w-full h-full object-cover rounded-[20px]"})}),e.jsxs("div",{className:"ai-api-data flex flex-col gap-1 order-2 md:order-none",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"font-semibold text-[20px]",children:[s.title," ",e.jsx("span",{className:"text-sm text-[#595959]",children:s.distance_meters?`${Number(s.distance_meters).toFixed(2)} ml`:""})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"ai-information flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{}),e.jsx("span",{className:"font-semibold text-base",children:s.no_of_bedroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{}),e.jsx("span",{className:"font-semibold text-base",children:s.no_of_bathroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{}),e.jsxs("span",{className:"font-semibold text-base",children:[s.beds," Guests"]})]})]}),e.jsxs("div",{className:"reviews flex items-center gap-1",children:[e.jsx(k,{className:"text-[#FB6E0A]"}),e.jsx("p",{children:s.rating||0}),e.jsxs("p",{children:["(",s.reviews||0," reviews)"]})]})]}),e.jsxs("div",{className:"ai-percentage grid grid-cols-2  md:flex  md:flex-nowrap  items-center  md:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:s.days_available||"-"}),e.jsx("h6",{className:"text-sm",children:"Days available"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:s.occupancy||"-"}),e.jsx("h6",{className:"text-sm",children:"Occupancy"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsxs("p",{className:"text-2xl",children:["£",s.adr||"-"]}),e.jsx("h6",{className:"text-sm",children:"ADR"})]}),e.jsxs("div",{className:"flex flex-col items-center px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:s!=null&&s.revenue?`£${s.revenue}`:"-"}),e.jsx("h6",{className:"text-sm",children:"Revenue"})]})]})]}),e.jsxs("div",{className:"links flex flex-row md:flex-col items-center gap-5 border-t md:border-t-0  md:border-l border-[#ECECEC]  pt-5 md:pt-0 order-3 md:order-none",children:[s.listing_url?e.jsx("a",{href:s.listing_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{className:"w-7 h-7 text-[#6C5DD3] cursor-pointer"})}):e.jsx(o,{className:"w-7 h-7 text-gray-400 cursor-not-allowed"}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${s.lat},${s.lng}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(B,{className:"w-7 h-7 text-[#6C5DD3]"})})]})]},a)):e.jsx("p",{className:"text-gray-500 my-5 text-center",children:"No comparable imported"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("button",{onClick:f,className:"w-fit items-center gap-5 justify-center flex",children:[e.jsx(F,{}),"Back"]}),e.jsxs("button",{onClick:u,className:"w-fit purple-btn items-center gap-5 justify-center  xyz",style:{display:"flex"},children:["Next",e.jsx(I,{})]})]})]})};export{$ as default};
