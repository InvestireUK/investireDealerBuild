import{u as v,b3 as S,r as f,a$ as j,aY as N,b1 as F,m as a,aJ as h,b2 as l,a_ as w,b0 as C}from"./index-C1l7Vm-F.js";const $=n=>{if(!n)return"0";const t=String(n).replace(/[,%]/g,""),o=parseFloat(t);return isNaN(o)||o===0?"0":o.toLocaleString("en-US")},D=n=>{if(n<=0)return"0";const t=Math.floor(n),o=(n-t)*12,c=Math.round(o);if(t===0)return c===1?"1 month":`${c} months`;if(c===0)return t===1?"1 year":`${t} years`;{const _=t===1?"1 year":`${t} years`,m=c===1?"1 month":`${c} months`;return`${_} ${m}`}},A=()=>{const n=v(e=>{var s;return(s=e==null?void 0:e.deal)==null?void 0:s.deal}),{currentCase:t}=S({deal_type_id:n==null?void 0:n.deal_type_id}),[o,c]=f.useState({});console.log("formData",o);const m=(()=>{switch(t){case"CASE_1":return l;case"CASE_2":return C;case"CASE_3":return(n==null?void 0:n.exit_type_id)===1?l:w;default:return l}})();f.useEffect(()=>{n&&(t==="CASE_2"?c(j(n)):t==="CASE_3"&&(n==null?void 0:n.exit_type_id)!==1?c(N(n)):c(F(n)))},[n,t]);const y=e=>{var d;const s=o[e.name];let r=s;console.log("displayValue",r),e.name==="return_on_cash_investment_percentage"?r=s?`${s}%`:"0%":e.isPercentage&&(r=s?`${s}%`:"0%"),e.name==="payback_period"?r=Number(o.after_refurb_money_left_in)<=0?"Pays Immediately":$(s):e.name=="profitable"&&(r="");const i=e.reversed;if((n==null?void 0:n.deal_type_id)===3&&(e.name==="no_of_dwelling"||e.name==="average_rent_per_unit"))return null;const p=a.jsx("div",{className:"purchase-price-label-wrap",children:a.jsx("label",{className:"text-sm text-[#595959] dark:text-[#C5C5C5]",children:e.name==="no_of_dwelling"?(n==null?void 0:n.deal_type_id)===2?"Number of Dwelling":"Number of Bedrooms":e.label})}),g=a.jsx("div",{className:"w-full",children:e.name!=="profitable"&&a.jsx("div",{className:`${e.name==="payback_period",""}`,children:a.jsxs("p",{className:"text-xl font-semibold dark:text-white text-[#242424] whitespace-nowrap mt-3",children:[console.log(o.after_refurb_money_left_in,"after_refurb_money_left_in5"),e.name==="payback_period"?Number((d=o.after_refurb_money_left_in)==null?void 0:d.toString().replace(/,/g,""))<=0?"Pays Immediately":D(r)||"0":e.name==="months_until_break_even"||e.name==="return_on_cash_investment_percentage"||e.name==="occupancy_rate_monthly"||e.name==="net_ROI"||e.name==="before_refurb_loan_to_value_percentage"||e.name==="before_refurb_interest_rate_percentage"||e.name==="deposit_percentage"||e.name==="contigency_percentage"||e.name==="after_refurb_loan_to_value_percentage"||e.name==="after_refurb_interest_rate_percentage"||e.name==="money_in_cash_invested_percentage"||e.name==="money_out_cash_invested_percentage"||e.name==="management_fee_percentage"||e.name==="gross_ROI"?e.name==="return_on_cash_investment_percentage"&&parseFloat(r)<=0?"Infinite":r||"0":a.jsxs(a.Fragment,{children:["Â£",r||"0"]})]})})});return a.jsx("div",{className:"summary-purchase-custom-grid",children:i?a.jsxs(a.Fragment,{children:[g,p]}):a.jsxs(a.Fragment,{children:[p,g]})})},x=e=>{const r=e.fields.filter(i=>!((n==null?void 0:n.deal_type_id)===3&&(i.name==="no_of_dwelling"||i.name==="average_rent_per_unit")));return r.length===0?null:a.jsx(a.Fragment,{children:r.map(i=>a.jsx("div",{children:y(i)},i.name))})},b=e=>a.jsx("div",{className:"financial-form-main-container-wrapper mb-4",children:a.jsx("div",{className:"dealview-financial-form-container-wrapper",children:a.jsxs("div",{className:"summary-financial-form-grid",children:[a.jsx("div",{className:"financial-form-heading-col mb-3",children:a.jsx("h3",{className:"text-lg text-[#6C5DD3] font-bold",children:e.title})}),a.jsx("div",{className:"financial-form-col-wrap relative grid grid-cols-2 gap-4 gap-y-3 md:gap-y-6 pt-4",children:e.fields.map((s,r)=>s.rows.map((i,u)=>a.jsx(h.Fragment,{children:x(i)},`${r}-${u}`)))})]})})});return a.jsx("div",{className:"grid grid-cols-1",children:m.map(e=>a.jsx(h.Fragment,{children:b(e)},e.id))})};export{A as F};
