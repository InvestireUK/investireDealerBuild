import{u as c,t as v,s as y,au as C,m as e,cs as w,aL as _,cl as E,cm as D,cn as S,co as A,cp as x,cq as k,al as B,am as L,N as o,aG as m,ct as F,aq as R}from"./index-DNQPOinU.js";import{S as G}from"./SAComparablesMaps-xuopG64c.js";const z=()=>{var n,i;const l=c(a=>{var s;return(s=a==null?void 0:a.deal)==null?void 0:s.deal});c(a=>a.deal.SAnewComperableData);const t=v(),r=y(),p=c(a=>a.deal.currentStep),h="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{comparableDealId:j}=c(a=>a==null?void 0:a.deal),{handleApiCall:f}=C(),b=()=>{j&&r(F()),t("/create-deal/description")},N=()=>{r(R(!0));const a={_method:"PATCH"};f({apiFn:()=>m(l.id,a),onSuccess:s=>{var d;const g={...s==null?void 0:s.deal,id:(d=s==null?void 0:s.deal)==null?void 0:d.id};r(o(g))},onError:s=>{console.error("Error updating deal:",s)}}),r({type:"deal/setCurrentStep",payload:Math.max(p,4)}),t("/create-deal/summary")},u=()=>{t("/create-deal/sa-edit-comparable"),r(o(m))};return e.jsxs("div",{children:[e.jsxs("div",{className:"sa-api-comparables-data-wrap",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h5",{children:"Comparables"}),e.jsxs("button",{className:"purple-btn2 my-4  inline-flex items-center",onClick:u,children:[e.jsx("span",{className:"leading-none",children:"+ Edit Comparable"}),e.jsx(w,{className:"ml-1 text-white h-6 w-6 group-hover:text-[#6C5DD3] align-middle"})]})]}),e.jsx("div",{className:"map-generated-sec mb-10",children:e.jsx("div",{className:"bg-[#EBEBEC] dark:bg-[#222632] flex items-center justify-center relative create-deal-upload-document-wrap",children:((n=l==null?void 0:l.property_deal_sa_comparables)==null?void 0:n.length)>0?e.jsx(G,{locations:l.property_deal_sa_comparables,apiKey:h}):e.jsx("p",{className:"text-gray-500 py-10 text-center",children:"No map available — no SA comparables imported"})})}),((i=l==null?void 0:l.property_deal_sa_comparables)==null?void 0:i.length)>0?l.property_deal_sa_comparables.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-[1fr_2fr_10%] gap-5 my-10 items-center",children:[e.jsx("div",{className:"w-full h-[200px]",children:e.jsx("img",{src:(a==null?void 0:a.image_url)||_,alt:(a==null?void 0:a.title)||"Dummy image",className:"w-full h-full object-cover rounded-[20px]"})}),e.jsxs("div",{className:"ai-api-data flex flex-col gap-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"font-semibold text-[20px]",children:[a.title,e.jsxs("span",{className:"text-sm text-[#595959]",children:[a.distance_meters,"ml"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"ai-information flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{}),e.jsx("span",{className:"font-semibold text-base",children:a.no_of_bedroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{}),e.jsx("span",{className:"font-semibold text-base",children:a.no_of_bathroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{}),e.jsxs("span",{className:"font-semibold text-base",children:[a.beds," Guests"]})]})]}),e.jsxs("div",{className:"reviews flex items-center gap-1",children:[e.jsx(A,{className:"text-[#FB6E0A]"}),e.jsx("p",{children:a.rating}),e.jsxs("p",{children:["(",a.reviews," reviews)"]})]})]}),e.jsxs("div",{className:"ai-percentage flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center border-r border-[#ECECEC] px-5",children:[e.jsx("p",{className:"text-2xl",children:a.days_available||"-"}),e.jsx("h6",{className:"text-sm",children:"Days available"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r border-[#ECECEC] px-5",children:[e.jsx("p",{className:"text-2xl",children:a.occupancy||"-"}),e.jsx("h6",{className:"text-sm",children:"Occupancy"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r border-[#ECECEC] px-5",children:[e.jsxs("p",{className:"text-2xl",children:["£",a.adr||"-"]}),e.jsx("h6",{className:"text-sm",children:"ADR"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r border-[#ECECEC] px-5",children:[e.jsx("p",{className:"text-2xl",children:a!=null&&a.revenue?`£${a.revenue}`:"-"}),e.jsx("h6",{className:"text-sm",children:"Revenue"})]})]})]}),e.jsxs("div",{className:"links flex flex-col items-center gap-5 border-l border-[#ECECEC]",children:[a.listing_url?e.jsx("a",{href:a.listing_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(x,{className:"w-7 h-7 text-[#6C5DD3] cursor-pointer"})}):e.jsx(x,{className:"w-7 h-7 text-gray-400 cursor-not-allowed"}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${a.lat},${a.lng}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(k,{className:"w-7 h-7 text-[#6C5DD3]"})}),e.jsx("p",{className:"w-6 h-6",children:"-"})]})]},s)):e.jsx("p",{className:"text-gray-500 my-5 text-center",children:"No comparable imported"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("button",{onClick:b,className:"w-fit items-center gap-5 justify-center flex",children:[e.jsx(B,{}),"Back"]}),e.jsxs("button",{onClick:N,className:"w-fit purple-btn items-center gap-5 justify-center  xyz",style:{display:"flex"},children:["Next",e.jsx(L,{})]})]})]})};export{z as default};
