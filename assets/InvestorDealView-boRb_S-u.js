import{ab as Se,r as n,w as cs,v as ds,u as _,ax as Ie,aa as ms,bH as us,t as xs,bI as hs,bJ as fs,bK as Pe,m as e,bL as Y,bM as S,bN as y,bO as gs,b6 as bs,bP as ps,aA as G,bQ as ws,bR as js,bS as vs,bT as Ns,bU as _s,bV as ys,bW as ks,bX as Cs,bY as Fs,bZ as Ss,b_ as Is,b$ as Ps,aO as Ls,aP as Es,c0 as As,c1 as Os}from"./index-_rvvEIkh.js";import{u as Rs}from"./useRefreshUser-nfMunSd0.js";import{S as Ms}from"./SendContactDealModal-DDkXID7s.js";import"./lodash-DpfdCPqs.js";const Ds=()=>{var de,me,ue,xe,he,fe,ge,be,pe,we,je,ve,Ne,_e,ye,ke,Ce,Fe;const{dealToken:b}=Se(),{id:I}=Se(),[m,$s]=n.useState(null),[U,F]=n.useState(!0),[zs,Le]=n.useState(null),[Ee,Ae]=n.useState(!1),q=cs(),h=ds();Rs();const K=_(s=>s.deal.currentStep),Oe=_(s=>s.deal.comparableMode);_(s=>s.deal.newComperableData),_(s=>s.deal.SAnewComperableData);const[W,Re]=n.useState(!1),[Hs,Me]=n.useState(!1),[Ts,X]=n.useState(!1),[Bs,J]=n.useState(!1),[$e,Q]=n.useState(!1),u=n.useRef(null),f=n.useRef(null),P="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{handleApiCall:ze,loading:He}=Ie(),{data:L}=ms(us,m==null?void 0:m.id,{type:Oe});(de=L==null?void 0:L.data)!=null&&de.dealComparables;const[Vs,Ys]=n.useState(!1),[Te,Be]=n.useState([]),[t,Ve]=n.useState(null),c=_(s=>s.deal.AivideoUrl),{showSnackbar:x}=xs();((...s)=>s.find(a=>Array.isArray(a)&&a.length>0)||[])(m==null?void 0:m.newcomperable,m==null?void 0:m.property_deal_comparables,m==null?void 0:m.property_deal_sa_comparables);const[Us,Ye]=n.useState([]),[qs,Ge]=n.useState(""),{token:p,role:w}=_(s=>s.user),[Ks,Z]=n.useState(!1),[l,Ue]=n.useState(null),{loading:D}=Ie(),[qe,E]=n.useState(!1),[A,O]=n.useState(!1),[Ke,R]=n.useState(!1),j=n.useCallback(async()=>{var s,a,d,r;F(!0);try{let o;if(b&&p&&w==="investor"?(o=await hs(b),Z(!0)):(o=await fs(b),Z(!0)),o&&o.data){const i=o.data.data;i!=null&&i.dealShare&&Ue(i.dealShare),i!=null&&i.propertyDeal&&(Ve(i.propertyDeal),i.propertyDeal.property_deal_comparables&&Ye(i.propertyDeal.property_deal_comparables),(s=i.propertyDeal)!=null&&s.ai_video_id&&Ge((a=i.propertyDeal)==null?void 0:a.ai_video_id))}}catch(o){console.error("API Error:",o),Le("Failed to load deal details"),x(((r=(d=o.response)==null?void 0:d.data)==null?void 0:r.error)||"Failed to load deal details","error")}finally{F(!1)}},[b,p,w]);n.useEffect(()=>{I&&j()},[j,I]);const ee=async s=>{if(!(!s||A)){F(!0);try{const d=await(await fetch(`https://api.heygen.com/v1/video_status.get?video_id=${s}`,{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"sk_V2_hgu_kKqknA6ytKH_2KwO3bxcX62IB12c285JDCoAIdiiuduk"}})).json();h(As(d.data)),O(!0)}catch(a){console.error("API error:",a)}finally{F(!1)}}};n.useEffect(()=>{t!=null&&t.ai_video_id&&!A&&!c&&ee(m==null?void 0:m.ai_video_id)},[t==null?void 0:t.ai_video_id,A,c]),n.useEffect(()=>{t!=null&&t.ai_video_id&&(t==null?void 0:t.ai_video_id)!==(c==null?void 0:c.video_id)&&(O(!1),ee(t==null?void 0:t.ai_video_id))},[t==null?void 0:t.ai_video_id]),n.useEffect(()=>{O(!1)},[I]);const k={description:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.description_ai)||"No AI description available":(t==null?void 0:t.description)||"No description available"},se={location:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.location_ai)||"No AI location available":(t==null?void 0:t.location)||"No location available"};n.useEffect(()=>{const s=(d,r)=>{if(!d.current)return;const i=parseFloat(window.getComputedStyle(d.current).lineHeight)*3,N=d.current.scrollHeight>i+1;r(N)};s(u,X),s(f,J);const a=new ResizeObserver(()=>{s(u,X),s(f,J)});return u.current&&a.observe(u.current),f.current&&a.observe(f.current),()=>a.disconnect()},[k,se]),n.useEffect(()=>{b&&j()},[j,b]),n.useEffect(()=>{!U&&t&&(document.querySelectorAll("[data-accordion-target]").forEach(a=>{const d=a.cloneNode(!0);a.parentNode.replaceChild(d,a)}),document.querySelectorAll("[data-accordion-target]").forEach(a=>{a.addEventListener("click",()=>{const d=a.getAttribute("data-accordion-target"),r=document.querySelector(d);if(r){r.classList.toggle("hidden");const o=r.classList.contains("hidden")?"false":"true";a.setAttribute("aria-expanded",o);const i=a.querySelector("[data-accordion-icon]");i&&(o==="true"?i.classList.remove("rotate-180"):i.classList.add("rotate-180"))}})}))},[U,t]),t!=null&&t.address_line_1,t!=null&&t.address_line_2,t!=null&&t.post_code,(me=t==null?void 0:t.country)!=null&&me.name;const te=(t==null?void 0:t.image_url)||null,M=(t==null?void 0:t.map_image_url)||null,$=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const a={lat:s.coords.latitude,lng:s.coords.longitude};setUserLocation(a),setAddressCoordinates(a)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},[z,We]=n.useState(!0),[H,Xe]=n.useState(!0),[T,Je]=n.useState(!0),[B,Qe]=n.useState(!0),[Ze,De]=n.useState(!1),[Ws,es]=n.useState(!1);n.useEffect(()=>{if(u.current){const a=parseFloat(getComputedStyle(u.current).lineHeight)*12;De(u.current.scrollHeight>a)}if(f.current){const a=parseFloat(getComputedStyle(f.current).lineHeight)*12;es(f.current.scrollHeight>a)}},[k,se]);const ss=()=>{Re(s=>{const a=!s;return a&&Me(!1),a})};n.useEffect(()=>(h(Pe(!0)),h({type:"deal/setCurrentStep",payload:Math.max(K,5)}),()=>{h(Pe(!1))}),[h,K]);const v=(l==null?void 0:l.intrust_status)||0,ts=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){x("Please login to mark as interested","error"),h(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),q("/login");return}if(!(l!=null&&l.id)){x("Deal information not available","error");return}R(!0)},as=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){x("Please login to mark as not interested","error"),h(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),q("/login");return}if(!(l==null?void 0:l.id)){x("Deal information not available","error");return}E(!0)},ns=s=>{const a=l==null?void 0:l.id;ze({apiFn:()=>Os(a,s),onSuccess:()=>{E(!1),j()},onError:()=>{}})},[ls,ae]=n.useState(!1),[ne,V]=n.useState(0),C=((ue=t==null?void 0:t.property_deal_media)==null?void 0:ue.map(s=>{var a;return(a=s==null?void 0:s.media)==null?void 0:a.media_url}))||[],le=s=>{V(s),ae(!0)},ie=s=>{s.stopPropagation(),ae(!1)},re=s=>{s.stopPropagation(),V(a=>(a+1)%C.length)},oe=s=>{s.stopPropagation(),V(a=>(a-1+C.length)%C.length)},is=s=>{var r,o,i,N;const a=[];if(s!=null&&s.no_of_dwelling){const g=(s==null?void 0:s.deal_type_id)===2?s.no_of_dwelling>1?" Beds":" Bed":s.no_of_dwelling>1?" Bedrooms":" Bedroom";a.push(s.no_of_dwelling+g)}if(s!=null&&s.deal_type&&a.push(s.deal_type.title),(r=s==null?void 0:s.sub_category)!=null&&r.title&&a.push(s.sub_category.title),(o=s==null?void 0:s.property_type_category)!=null&&o.title&&a.push((i=s.property_type_category)==null?void 0:i.title),(N=s==null?void 0:s.exit_type)!=null&&N.title){let g=s.exit_type.title.toLowerCase();g==="sell"?g="Flip":g==="refinance"&&(g="BRRR"),a.push(g)}return a.join(",")},rs=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`https://phplaravel-1547671-6035260.cloudwaysapps.com/storage/${s}`:null,ce=(t==null?void 0:t.ai_video_id)&&M&&(c==null?void 0:c.status)!=="failed",os=async()=>{try{const a=await(await fetch(c.video_url,{mode:"cors"})).blob(),d=window.URL.createObjectURL(a),r=document.createElement("a");r.href=d,r.download="ai-generated-video.mp4",document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(d)}catch(s){console.error("Video download failed",s),alert("Unable to download video")}};return e.jsxs("div",{className:"create-deal-summary-page-wrap",children:[e.jsx(Ms,{isOpen:Ee,onClose:()=>{Ae(!1),Be([])},selectedDeals:Te}),e.jsx("div",{className:"flex items-end justify-between my-5",children:e.jsx("div",{children:e.jsx("h4",{className:"text-[#333333] font-bold mb-4 light-black dark:text-[#F8F8F8]",children:"View Deal"})})}),He?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-add-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>We(!z),children:[e.jsx("h5",{className:"text-lg font-semibold",children:"Title"}),z?e.jsx(Y,{className:"text-gray-600",size:20}):e.jsx(S,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${z?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-property-map-wrap",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between purchased-price-with-location",children:[e.jsx("p",{className:"text-[#242424] font-medium property-location-text mb-4 dark:text-[#F8F8F8]",children:is(t)}),(t==null?void 0:t.deal_type_id)===2?e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Rent:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(xe=t==null?void 0:t.property_deal_sa_investment)!=null&&xe.rent?`£${parseFloat((he=t==null?void 0:t.property_deal_sa_investment)==null?void 0:he.rent).toLocaleString()}`:"0"})]}):e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Purchased Price:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(fe=t==null?void 0:t.property_deal_investment)!=null&&fe.purchase_price?`£${parseFloat((ge=t==null?void 0:t.property_deal_investment)==null?void 0:ge.purchase_price).toLocaleString()}`:"0"})]})]}),e.jsxs("div",{className:"summary-property-map-grid-wrap",children:[e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${((be=t==null?void 0:t.property_deal_media)==null?void 0:be.length)>0?"summary-property-col":""}`,children:[e.jsx("div",{className:"summary-property-subimages-div",children:(pe=t==null?void 0:t.property_deal_media)==null?void 0:pe.slice(0,4).map((s,a)=>{var o,i;const r=(((o=t==null?void 0:t.property_deal_media)==null?void 0:o.length)||0)-4;return e.jsx("div",{className:"summary-property-subimages relative",children:s?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(i=s==null?void 0:s.media)==null?void 0:i.media_url,alt:"Property",className:"w-full h-full object-cover cursor-pointer",onClick:()=>le(a)}),a===3&&r>0&&e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center text-white text-lg font-semibold cursor-pointer",onClick:()=>le(a),children:["+",r]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})},a)})}),e.jsx("div",{className:"summary-property-main-images-div h-full",children:e.jsx("div",{className:"w-full bg-gray-700 summary-property-div",children:te?e.jsx("img",{src:te,alt:"Property",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})})})]}),ls&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:ie,children:e.jsxs("div",{className:"relative max-w-4xl w-full p-4 flex items-center justify-center",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:C[ne],alt:"Large view",className:"max-h-[80vh] max-w-full object-contain mx-auto rounded-lg shadow-lg"}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),oe(s)}}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),re(s)}}),e.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),oe(s)},children:"❮"}),e.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),re(s)},children:"❯"}),e.jsx("button",{className:"fixed top-4 right-4 text-white text-3xl z-50",onClick:ie,children:e.jsx(gs,{})}),e.jsxs("div",{className:"absolute bottom-4 text-white text-center w-full",children:[ne+1," / ",C.length]})]})})]}),e.jsx("div",{className:"summary-map-loaction-col",children:e.jsxs("div",{className:"relative summary-map-wrapper min-h-[200px] flex items-center justify-center",children:[t!=null&&t.ai_video_id?e.jsxs(e.Fragment,{children:[(c==null?void 0:c.status)==="processing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(bs,{className:"text-white animate-spin text-3xl"}),e.jsx("p",{className:"text-white",children:"Generating..."})]}),(c==null?void 0:c.status)==="completed"&&e.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",onClick:()=>Q(!0),children:[e.jsx("img",{src:c.thumbnail_url,alt:"Generated video thumbnail",className:"mx-auto w-full max-w-md h-auto object-contain"}),e.jsx(ps,{className:"absolute inset-0 m-auto text-[#6C5DD3]",size:70,style:{pointerEvents:"none"}})]}),(c==null?void 0:c.status)==="failed"&&(M?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:$,children:e.jsx(G,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable}))]}):e.jsx(e.Fragment,{children:M?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:$,children:e.jsx(G,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable})}),$e&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b",children:[e.jsx("div",{className:"flex items-center gap-2 text-gray-700 font-medium",children:"← Download AI generated video"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-800 text-xl",onClick:()=>Q(!1),children:"✕"})]}),e.jsx("div",{className:"p-4",children:e.jsx("video",{src:c.video_url,controls:!0,autoPlay:!0,className:"w-full rounded-lg"})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{onClick:os,className:"flex items-center justify-center gap-2 w-full bg-[#6C5DD3] text-white py-3 rounded-lg hover:bg-[#5647b6] transition",children:"⬇ Download video"})})]})})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 py-5",children:[e.jsxs("div",{className:"flex items-start gap-4 border-t pt-6 w-full md:w-3/5",children:[((we=l==null?void 0:l.contact)==null?void 0:we.company_logo)&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden",children:e.jsx("img",{src:rs(l.contact.company_logo),alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-start gap-3 mb-4",children:[((je=l==null?void 0:l.contact)==null?void 0:je.company_name)&&e.jsx("p",{children:l.contact.company_name}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 flex-wrap",children:[((ve=l==null?void 0:l.contact)==null?void 0:ve.company_website)&&e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_website})]}),((Ne=l==null?void 0:l.contact)==null?void 0:Ne.company_email)&&e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_email})]}),((_e=l==null?void 0:l.contact)==null?void 0:_e.company_phone)&&e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_phone})]})]})]})]}),e.jsxs("div",{className:"flex justify-center w-full md:w-1/2",children:[e.jsxs("div",{className:"forecast-btn-group-wrap flex flex-wrap gap-4 justify-center",children:[e.jsxs("button",{type:"button",onClick:ts,disabled:v===1||D,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${v===1?"bg-green-700 text-white border-green-700":"border-green-700 text-green-700 hover:bg-green-700 hover:text-white"}`,children:[e.jsx(Ns,{}),v===0?"Interested":"Mark Interested"]}),e.jsxs("button",{type:"button",onClick:as,disabled:v===2||D,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${v===2?"bg-red-700 text-white border-red-700":"border-red-700 text-red-700 hover:bg-red-700 hover:text-white"}`,children:[e.jsx(_s,{}),v===0?"Not Interested":"Mark Not Interested"]})]}),e.jsx(ys,{isOpen:qe,onClose:()=>E(!1),onSubmit:ns}),Ke&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 max-w-md w-[90%] text-center transform transition-all scale-100",children:[e.jsx("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white text-lg font-bold transition","aria-label":"Close",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-3",children:"Before You Proceed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Please do your due diligence. This is not financial advice."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{R(!1);try{const s=await ks(l==null?void 0:l.id);(s==null?void 0:s.status)===200?(await j(),x("Marked as interested!","success")):x("Something went wrong, please try again.","error")}catch(s){console.error("Error marking interest:",s),x("Something went wrong, please try again.","error")}},className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 text-white font-medium shadow hover:opacity-90 transition",children:"OK"})})]})})]})]})]})})]}),e.jsxs("div",{className:"deal-summart-description-wrap mt-6",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Xe(!H),children:[e.jsx("h5",{className:"text-lg font-semibold dark:text-[#F8F8F8]",children:"Description"}),H?e.jsx(Y,{className:"text-gray-600",size:20}):e.jsx(S,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${H?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-description-text flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:`w-full ${ce?"md:w-[60%]":"md:w-full"}`,children:e.jsxs("div",{className:"summary-description-heading-wrap",children:[e.jsx("h4",{className:"text-lg text-[#333333] font-normal mb-2 dark:text-[#F8F8F8]",children:"Property description:"}),e.jsx("p",{ref:u,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${W?"":"line-clamp-12"}`,dangerouslySetInnerHTML:{__html:Cs(k==null?void 0:k.description)}}),Ze&&e.jsx("button",{onClick:ss,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:W?"Read less":"Read more"})]})}),ce&&e.jsxs("div",{className:"w-full md:w-[40%] relative bg-gray-700 summary-map-wrapper min-h-[200px]",children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full h-full",style:{border:0,borderRadius:"12px",minHeight:"358px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:$,children:e.jsx(G,{})})]})]})})]}),e.jsx("div",{className:"financial-page-inner-div-wrap my-6",children:(t==null?void 0:t.deal_type_id)===2?e.jsx(Fs,{deal:t}):e.jsx(Ss,{deal:t})}),e.jsxs("div",{className:"mt-6 DealsDetails-page-wrapper summary-financials-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Qe(!B),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.financials}),B?e.jsx(Y,{className:"text-gray-500 transition-transform duration-300",size:20}):e.jsx(S,{className:"text-gray-500 transition-transform duration-300",size:20})]}),e.jsx("div",{className:`transition-all duration-300 ${B?"opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"min-h-screen financial-page-main-div-wrap",children:e.jsx("div",{className:"financial-page-inner-div-wrap",children:e.jsx(Is,{deal:t})})})})]}),e.jsxs("div",{className:"summary-page-comparables-sec rounded-xl",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer bg-[#F8F8F8] px-4 py-2",onClick:()=>Je(s=>!s),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.comparables}),e.jsx(S,{className:`text-xl transition-transform duration-300 ${T?"rotate-180":""}`})]}),e.jsx("div",{className:"transition-all duration-300 ease-in-out overflow-hidden",style:{maxHeight:T?"":"0",opacity:T?1:0},children:e.jsx("div",{className:(m==null?void 0:m.deal_type_id)===2?"p-4":"",children:(t==null?void 0:t.deal_type_id)===2?((ye=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:ye.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"overflow-x-auto comparable-listing-table-wrap",children:(ke=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:ke.map((s,a)=>e.jsx(Ps,{comp:s},s.id||a))}):((Ce=t==null?void 0:t.property_deal_comparables)==null?void 0:Ce.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"border dark:border-[#333333]",children:e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F8F8F8] dark:bg-[#242424] text-dark dark:text-[#F8F8F8] text-[12px] border-b dark:border-b-[#333333]",children:[e.jsx("th",{className:"p-4",children:"SL NO."}),e.jsx("th",{className:"p-4",children:"PROPERTY"}),e.jsx("th",{className:"p-4",children:"CATEGORY"}),e.jsx("th",{className:"p-4",children:"BEDROOMS"}),e.jsx("th",{className:"p-4",children:"PRICE"}),e.jsx("th",{className:"p-4",children:"YEAR"}),e.jsx("th",{className:"p-4",children:"DISTANCE"})]})}),e.jsx("tbody",{children:(Fe=t==null?void 0:t.property_deal_comparables)==null?void 0:Fe.map((s,a)=>{var d,r,o,i;return e.jsxs("tr",{className:"border-b dark:border-b-[#333333]",children:[e.jsx("td",{className:"p-4",children:a+1}),e.jsxs("td",{className:"p-4 flex items-normal gap-2",children:[e.jsx("img",{src:(s==null?void 0:s.image_url)||Ls,alt:"Image",className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold truncate max-w-[100px]",children:s==null?void 0:s.address}),s!=null&&s.linked_search_url?e.jsx("a",{href:s.linked_search_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#3673D5] font-bold text-sm cursor-pointer",children:"Website"}):e.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Website"})]}),(s==null?void 0:s.type)==="ai"&&e.jsx("span",{className:"mr-1 inline-block w-4 h-4 align-top",children:e.jsx("img",{src:Es,alt:"AI",className:"w-full h-full object-contain"})})]}),e.jsx("td",{className:"p-4",children:(o=(r=(d=(s==null?void 0:s.property_type_string)||(s==null?void 0:s.sub_category))==null?void 0:d.toLowerCase())==null?void 0:r.replace(/_/g," "))==null?void 0:o.replace(/\b\w/g,N=>N.toUpperCase())}),e.jsx("td",{className:"p-4",children:s.no_of_bedroom}),e.jsxs("td",{className:"p-4",children:["£",Number(s.price).toLocaleString("en-GB",{maximumFractionDigits:0})]}),e.jsx("td",{className:"p-4",children:s.year}),e.jsx("td",{className:"p-4",children:(s==null?void 0:s.distance)!=null?`${(i=parseInt(s==null?void 0:s.distance))==null?void 0:i.toFixed(2)} Mile${(s==null?void 0:s.distance)>1?"s":""}`:"-"})]},s.id||a)})})]})})})})})]})]})]})};export{Ds as default};
