import{a7 as Pe,r as n,t as ds,s as ms,u as _,at as Le,a6 as us,bE as xs,q as hs,bF as fs,bG as gs,bH as Ee,m as e,bI as G,bJ as I,bK as y,bL as bs,b4 as ps,bM as ws,aw as q,bN as js,bO as Ns,bP as vs,bQ as _s,bR as ys,bS as ks,bT as Fs,bU as Cs,bV as Ss,bW as Re,bX as Is,bY as Ps,aK as Ls,aL as Es,bZ as Rs,b_ as As}from"./index-B1P5acEq.js";import{u as $s}from"./useRefreshUser-DfJI3zGb.js";import{S as Ms}from"./SendContactDealModal-DQyPbSIN.js";import"./lodash-B5fXgQtM.js";const Qs=()=>{var ue,xe,he,fe,ge,be,pe,we,je,Ne,ve,_e,ye,ke,Fe,Ce,Se,Ie;const{dealToken:b}=Pe(),{id:P}=Pe(),[c,Os]=n.useState(null),[W,S]=n.useState(!0),[Ts,Ae]=n.useState(null),[$e,Me]=n.useState(!1),K=ds(),f=ms();$s();const U=_(s=>s.deal.currentStep),Oe=_(s=>s.deal.comparableMode);_(s=>s.deal.newComperableData),_(s=>s.deal.SAnewComperableData);const[X,J]=n.useState(!1),[Q,Z]=n.useState(!1),[Hs,D]=n.useState(!1),[zs,ee]=n.useState(!1),u=n.useRef(null),x=n.useRef(null),L="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{handleApiCall:Te,loading:He}=Le(),{data:E}=us(xs,c==null?void 0:c.id,{type:Oe});(ue=E==null?void 0:E.data)!=null&&ue.dealComparables;const[Bs,Vs]=n.useState(!1),[ze,Be]=n.useState([]),[t,Ve]=n.useState(null),o=_(s=>s.deal.AivideoUrl),{showSnackbar:h}=hs();((...s)=>s.find(a=>Array.isArray(a)&&a.length>0)||[])(c==null?void 0:c.newcomperable,c==null?void 0:c.property_deal_comparables,c==null?void 0:c.property_deal_sa_comparables);const[Gs,Ye]=n.useState([]),[qs,Ge]=n.useState(""),{token:p,role:w}=_(s=>s.user),[Ws,se]=n.useState(!1),[l,qe]=n.useState(null),{loading:te}=Le(),[We,R]=n.useState(!1),[A,$]=n.useState(!1),[Ke,M]=n.useState(!1),j=n.useCallback(async()=>{var s,a,d,m;S(!0);try{let r;if(b&&p&&w==="investor"?(r=await fs(b),se(!0)):(r=await gs(b),se(!0)),r&&r.data){const i=r.data.data;i!=null&&i.dealShare&&qe(i.dealShare),i!=null&&i.propertyDeal&&(Ve(i.propertyDeal),i.propertyDeal.property_deal_comparables&&Ye(i.propertyDeal.property_deal_comparables),(s=i.propertyDeal)!=null&&s.ai_video_id&&Ge((a=i.propertyDeal)==null?void 0:a.ai_video_id))}}catch(r){console.error("API Error:",r),Ae("Failed to load deal details"),h(((m=(d=r.response)==null?void 0:d.data)==null?void 0:m.error)||"Failed to load deal details","error")}finally{S(!1)}},[b,p,w]);n.useEffect(()=>{P&&j()},[j,P]);const ae=async s=>{if(!(!s||A)){S(!0);try{const d=await(await fetch(`https://api.heygen.com/v1/video_status.get?video_id=${s}`,{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"sk_V2_hgu_kFHRWykcXEd_oisfR7mnYitgiX8vwtraF2NoDtg3J73V"}})).json();f(Rs(d.data)),$(!0)}catch(a){console.error("API error:",a)}finally{S(!1)}}};n.useEffect(()=>{t!=null&&t.ai_video_id&&!A&&!o&&ae(c==null?void 0:c.ai_video_id)},[t==null?void 0:t.ai_video_id,A,o]),n.useEffect(()=>{t!=null&&t.ai_video_id&&(t==null?void 0:t.ai_video_id)!==(o==null?void 0:o.video_id)&&($(!1),ae(t==null?void 0:t.ai_video_id))},[t==null?void 0:t.ai_video_id]),n.useEffect(()=>{$(!1)},[P]);const k={description:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.description_ai)||"No AI description available":(t==null?void 0:t.description)||"No description available"},F={location:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.location_ai)||"No AI location available":(t==null?void 0:t.location)||"No location available"};n.useEffect(()=>{const s=(d,m)=>{if(!d.current)return;const i=parseFloat(window.getComputedStyle(d.current).lineHeight)*3,v=d.current.scrollHeight>i+1;m(v)};s(u,D),s(x,ee);const a=new ResizeObserver(()=>{s(u,D),s(x,ee)});return u.current&&a.observe(u.current),x.current&&a.observe(x.current),()=>a.disconnect()},[k,F]),n.useEffect(()=>{b&&j()},[j,b]),n.useEffect(()=>{!W&&t&&(document.querySelectorAll("[data-accordion-target]").forEach(a=>{const d=a.cloneNode(!0);a.parentNode.replaceChild(d,a)}),document.querySelectorAll("[data-accordion-target]").forEach(a=>{a.addEventListener("click",()=>{const d=a.getAttribute("data-accordion-target"),m=document.querySelector(d);if(m){m.classList.toggle("hidden");const r=m.classList.contains("hidden")?"false":"true";a.setAttribute("aria-expanded",r);const i=a.querySelector("[data-accordion-icon]");i&&(r==="true"?i.classList.remove("rotate-180"):i.classList.add("rotate-180"))}})}))},[W,t]),t!=null&&t.address_line_1,t!=null&&t.address_line_2,t!=null&&t.post_code,(xe=t==null?void 0:t.country)!=null&&xe.name;const ne=(t==null?void 0:t.image_url)||null,O=(t==null?void 0:t.map_image_url)||null,T=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const a={lat:s.coords.latitude,lng:s.coords.longitude};setUserLocation(a),setAddressCoordinates(a)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},[H,Ue]=n.useState(!0),[z,Xe]=n.useState(!0),[B,Je]=n.useState(!0),[V,Qe]=n.useState(!0),[Ze,De]=n.useState(!1),[es,ss]=n.useState(!1);n.useEffect(()=>{if(u.current){const a=parseFloat(getComputedStyle(u.current).lineHeight)*3;De(u.current.scrollHeight>a)}if(x.current){const a=parseFloat(getComputedStyle(x.current).lineHeight)*3;ss(x.current.scrollHeight>a)}},[k,F]);const ts=()=>{J(s=>{const a=!s;return a&&Z(!1),a})},as=()=>{Z(s=>{const a=!s;return a&&J(!1),a})};n.useEffect(()=>(f(Ee(!0)),f({type:"deal/setCurrentStep",payload:Math.max(U,5)}),()=>{f(Ee(!1))}),[f,U]);const N=(l==null?void 0:l.intrust_status)||0,ns=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){h("Please login to mark as interested","error"),f(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),K("/login");return}if(!(l!=null&&l.id)){h("Deal information not available","error");return}M(!0)},ls=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){h("Please login to mark as not interested","error"),f(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),K("/login");return}if(!(l==null?void 0:l.id)){h("Deal information not available","error");return}R(!0)},is=s=>{const a=l==null?void 0:l.id;Te({apiFn:()=>As(a,s),onSuccess:()=>{R(!1),j()},onError:()=>{}})},[rs,le]=n.useState(!1),[ie,Y]=n.useState(0),C=((he=t==null?void 0:t.property_deal_media)==null?void 0:he.map(s=>{var a;return(a=s==null?void 0:s.media)==null?void 0:a.media_url}))||[],re=s=>{Y(s),le(!0)},oe=s=>{s.stopPropagation(),le(!1)},ce=s=>{s.stopPropagation(),Y(a=>(a+1)%C.length)},de=s=>{s.stopPropagation(),Y(a=>(a-1+C.length)%C.length)},os=s=>{var m,r,i,v;const a=[];if(s!=null&&s.no_of_dwelling){const g=(s==null?void 0:s.deal_type_id)===2?s.no_of_dwelling>1?" Beds":" Bed":s.no_of_dwelling>1?" Bedrooms":" Bedroom";a.push(s.no_of_dwelling+g)}if(s!=null&&s.deal_type&&a.push(s.deal_type.title),(m=s==null?void 0:s.sub_category)!=null&&m.title&&a.push(s.sub_category.title),(r=s==null?void 0:s.property_type_category)!=null&&r.title&&a.push((i=s.property_type_category)==null?void 0:i.title),(v=s==null?void 0:s.exit_type)!=null&&v.title){let g=s.exit_type.title.toLowerCase();g==="sell"?g="Flip":g==="refinance"&&(g="BRRR"),a.push(g)}return a.join(",")},cs=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`https://phplaravel-1547671-6035260.cloudwaysapps.com/storage/${s}`:null,me=(t==null?void 0:t.ai_video_id)&&O&&(o==null?void 0:o.status)!=="failed";return e.jsxs("div",{className:"create-deal-summary-page-wrap",children:[e.jsx(Ms,{isOpen:$e,onClose:()=>{Me(!1),Be([])},selectedDeals:ze}),e.jsx("div",{className:"flex items-end justify-between my-5",children:e.jsx("div",{children:e.jsx("h4",{className:"text-[#333333] font-bold mb-4 light-black dark:text-[#F8F8F8]",children:"View Deal"})})}),He?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-add-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Ue(!H),children:[e.jsx("h5",{className:"text-lg font-semibold",children:"Title"}),H?e.jsx(G,{className:"text-gray-600",size:20}):e.jsx(I,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${H?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-property-map-wrap",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between purchased-price-with-location",children:[e.jsx("p",{className:"text-[#242424] font-medium property-location-text mb-4 dark:text-[#F8F8F8]",children:os(t)}),(t==null?void 0:t.deal_type_id)===2?e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Rent:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(fe=t==null?void 0:t.property_deal_sa_investment)!=null&&fe.rent?`£${parseFloat((ge=t==null?void 0:t.property_deal_sa_investment)==null?void 0:ge.rent).toLocaleString()}`:"0"})]}):e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Purchased Price:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(be=t==null?void 0:t.property_deal_investment)!=null&&be.purchase_price?`£${parseFloat((pe=t==null?void 0:t.property_deal_investment)==null?void 0:pe.purchase_price).toLocaleString()}`:"0"})]})]}),e.jsxs("div",{className:"summary-property-map-grid-wrap",children:[e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${((we=t==null?void 0:t.property_deal_media)==null?void 0:we.length)>0?"summary-property-col":""}`,children:[e.jsx("div",{className:"summary-property-subimages-div",children:(je=t==null?void 0:t.property_deal_media)==null?void 0:je.slice(0,4).map((s,a)=>{var r,i;const m=(((r=t==null?void 0:t.property_deal_media)==null?void 0:r.length)||0)-4;return e.jsx("div",{className:"summary-property-subimages relative",children:s?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(i=s==null?void 0:s.media)==null?void 0:i.media_url,alt:"Property",className:"w-full h-full object-cover cursor-pointer",onClick:()=>re(a)}),a===3&&m>0&&e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center text-white text-lg font-semibold cursor-pointer",onClick:()=>re(a),children:["+",m]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})},a)})}),e.jsx("div",{className:"summary-property-main-images-div h-full",children:e.jsx("div",{className:"w-full bg-gray-700 summary-property-div",children:ne?e.jsx("img",{src:ne,alt:"Property",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})})})]}),rs&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:oe,children:e.jsxs("div",{className:"relative max-w-4xl w-full p-4 flex items-center justify-center",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:C[ie],alt:"Large view",className:"max-h-[80vh] max-w-full object-contain mx-auto rounded-lg shadow-lg"}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),de(s)}}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),ce(s)}}),e.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),de(s)},children:"❮"}),e.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),ce(s)},children:"❯"}),e.jsx("button",{className:"fixed top-4 right-4 text-white text-3xl z-50",onClick:oe,children:e.jsx(bs,{})}),e.jsxs("div",{className:"absolute bottom-4 text-white text-center w-full",children:[ie+1," / ",C.length]})]})})]}),e.jsx("div",{className:"summary-map-loaction-col",children:e.jsx("div",{className:"relative summary-map-wrapper min-h-[200px] flex items-center justify-center",children:t!=null&&t.ai_video_id?e.jsxs(e.Fragment,{children:[(o==null?void 0:o.status)==="processing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ps,{className:"text-white animate-spin text-3xl"}),e.jsx("p",{className:"text-white",children:"Generating..."})]}),(o==null?void 0:o.status)==="completed"&&e.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("img",{src:o.thumbnail_url,alt:"Generated video thumbnail",className:"mx-auto w-full max-w-md h-auto object-contain",onClick:()=>window.open(o.video_url,"_blank")}),e.jsx(ws,{className:"absolute inset-0 m-auto text-[#6C5DD3]",size:70,onClick:()=>window.open(o.video_url,"_blank"),style:{pointerEvents:"none"}})]}),(o==null?void 0:o.status)==="failed"&&(O?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${L}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:T,children:e.jsx(q,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable}))]}):e.jsx(e.Fragment,{children:O?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${L}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:T,children:e.jsx(q,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable})})})})]}),e.jsx("div",{className:"financial-page-inner-div-wrap my-6",children:(t==null?void 0:t.deal_type_id)===2?e.jsx(js,{deal:t}):e.jsx(Ns,{deal:t})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 py-5",children:[e.jsxs("div",{className:"flex items-start gap-4 border-t pt-6 w-full md:w-3/5",children:[((Ne=l==null?void 0:l.contact)==null?void 0:Ne.company_logo)&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden",children:e.jsx("img",{src:cs(l.contact.company_logo),alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-start gap-3 mb-4",children:[((ve=l==null?void 0:l.contact)==null?void 0:ve.company_name)&&e.jsx("p",{children:l.contact.company_name}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 flex-wrap",children:[((_e=l==null?void 0:l.contact)==null?void 0:_e.company_website)&&e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_website})]}),((ye=l==null?void 0:l.contact)==null?void 0:ye.company_email)&&e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_email})]}),((ke=l==null?void 0:l.contact)==null?void 0:ke.company_phone)&&e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:l.contact.company_phone})]})]})]})]}),e.jsxs("div",{className:"flex justify-center w-full md:w-1/2",children:[e.jsxs("div",{className:"forecast-btn-group-wrap flex flex-wrap gap-4 justify-center",children:[e.jsxs("button",{type:"button",onClick:ns,disabled:N===1||te,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===1?"bg-green-700 text-white border-green-700":"border-green-700 text-green-700 hover:bg-green-700 hover:text-white"}`,children:[e.jsx(ks,{}),N===0?"Interested":"Mark Interested"]}),e.jsxs("button",{type:"button",onClick:ls,disabled:N===2||te,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===2?"bg-red-700 text-white border-red-700":"border-red-700 text-red-700 hover:bg-red-700 hover:text-white"}`,children:[e.jsx(Fs,{}),N===0?"Not Interested":"Mark Not Interested"]})]}),e.jsx(Cs,{isOpen:We,onClose:()=>R(!1),onSubmit:is}),Ke&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 max-w-md w-[90%] text-center transform transition-all scale-100",children:[e.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white text-lg font-bold transition","aria-label":"Close",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-3",children:"Before You Proceed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Please do your due diligence. This is not financial advice."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{M(!1);try{const s=await Ss(l==null?void 0:l.id);(s==null?void 0:s.status)===200?(await j(),h("Marked as interested!","success")):h("Something went wrong, please try again.","error")}catch(s){console.error("Error marking interest:",s),h("Something went wrong, please try again.","error")}},className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 text-white font-medium shadow hover:opacity-90 transition",children:"OK"})})]})})]})]})]})})]}),e.jsxs("div",{className:"deal-summart-description-wrap mt-6",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Xe(!z),children:[e.jsx("h5",{className:"text-lg font-semibold dark:text-[#F8F8F8]",children:"Description"}),z?e.jsx(G,{className:"text-gray-600",size:20}):e.jsx(I,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${z?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-description-text flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:`w-full ${me?"md:w-[60%]":"md:w-full"}`,children:[e.jsxs("div",{className:"summary-description-heading-wrap",children:[e.jsx("h4",{className:"text-lg text-[#333333] font-normal mb-2 dark:text-[#F8F8F8]",children:"Property description:"}),e.jsx("p",{ref:u,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${X?"":"line-clamp-3"}`,dangerouslySetInnerHTML:{__html:Re(k==null?void 0:k.description)}}),Ze&&e.jsx("button",{onClick:ts,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:X?"Read less":"Read more"})]}),e.jsxs("div",{className:"summary-description-heading-wrap mt-6",children:[e.jsx("h4",{className:"text-lg text-[#333333] dark:text-[#F8F8F8] font-normal mb-2",children:"Location description:"}),e.jsx("p",{ref:x,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${Q?"":"line-clamp-3"}`,dangerouslySetInnerHTML:{__html:Re(F==null?void 0:F.location)}}),es&&e.jsx("button",{onClick:as,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:Q?"Read less":"Read more"})]})]}),me&&e.jsxs("div",{className:"w-full md:w-[40%] relative bg-gray-700 summary-map-wrapper min-h-[200px]",children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full h-full",style:{border:0,borderRadius:"12px",minHeight:"358px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${L}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:T,children:e.jsx(q,{})})]})]})})]}),e.jsxs("div",{className:"mt-6 DealsDetails-page-wrapper summary-financials-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Qe(!V),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.financials}),V?e.jsx(G,{className:"text-gray-500 transition-transform duration-300",size:20}):e.jsx(I,{className:"text-gray-500 transition-transform duration-300",size:20})]}),e.jsx("div",{className:`transition-all duration-300 ${V?"opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"min-h-screen financial-page-main-div-wrap",children:e.jsx("div",{className:"financial-page-inner-div-wrap",children:e.jsx(Is,{deal:t})})})})]}),e.jsxs("div",{className:"summary-page-comparables-sec rounded-xl",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer bg-[#F8F8F8] px-4 py-2",onClick:()=>Je(s=>!s),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.comparables}),e.jsx(I,{className:`text-xl transition-transform duration-300 ${B?"rotate-180":""}`})]}),e.jsx("div",{className:"transition-all duration-300 ease-in-out overflow-hidden",style:{maxHeight:B?"":"0",opacity:B?1:0},children:e.jsx("div",{className:(c==null?void 0:c.deal_type_id)===2?"p-4":"",children:(t==null?void 0:t.deal_type_id)===2?((Fe=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:Fe.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"overflow-x-auto comparable-listing-table-wrap",children:(Ce=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:Ce.map((s,a)=>e.jsx(Ps,{comp:s},s.id||a))}):((Se=t==null?void 0:t.property_deal_comparables)==null?void 0:Se.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"border dark:border-[#333333]",children:e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F8F8F8] dark:bg-[#242424] text-dark dark:text-[#F8F8F8] text-[12px] border-b dark:border-b-[#333333]",children:[e.jsx("th",{className:"p-4",children:"SL NO."}),e.jsx("th",{className:"p-4",children:"PROPERTY"}),e.jsx("th",{className:"p-4",children:"CATEGORY"}),e.jsx("th",{className:"p-4",children:"BEDROOMS"}),e.jsx("th",{className:"p-4",children:"PRICE"}),e.jsx("th",{className:"p-4",children:"YEAR"}),e.jsx("th",{className:"p-4",children:"DISTANCE"})]})}),e.jsx("tbody",{children:(Ie=t==null?void 0:t.property_deal_comparables)==null?void 0:Ie.map((s,a)=>{var d,m,r,i;return e.jsxs("tr",{className:"border-b dark:border-b-[#333333]",children:[e.jsx("td",{className:"p-4",children:a+1}),e.jsxs("td",{className:"p-4 flex items-normal gap-2",children:[e.jsx("img",{src:(s==null?void 0:s.image_url)||Ls,alt:"Image",className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold truncate max-w-[100px]",children:s==null?void 0:s.address}),s!=null&&s.linked_search_url?e.jsx("a",{href:s.linked_search_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#3673D5] font-bold text-sm cursor-pointer",children:"Website"}):e.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Website"})]}),(s==null?void 0:s.type)==="ai"&&e.jsx("span",{className:"mr-1 inline-block w-4 h-4 align-top",children:e.jsx("img",{src:Es,alt:"AI",className:"w-full h-full object-contain"})})]}),e.jsx("td",{className:"p-4",children:(r=(m=(d=(s==null?void 0:s.property_type_string)||(s==null?void 0:s.sub_category))==null?void 0:d.toLowerCase())==null?void 0:m.replace(/_/g," "))==null?void 0:r.replace(/\b\w/g,v=>v.toUpperCase())}),e.jsx("td",{className:"p-4",children:s.no_of_bedroom}),e.jsxs("td",{className:"p-4",children:["£",Number(s.price).toLocaleString("en-GB",{maximumFractionDigits:0})]}),e.jsx("td",{className:"p-4",children:s.year}),e.jsx("td",{className:"p-4",children:(s==null?void 0:s.distance)!=null?`${(i=parseInt(s==null?void 0:s.distance))==null?void 0:i.toFixed(2)} Mile${(s==null?void 0:s.distance)>1?"s":""}`:"-"})]},s.id||a)})})]})})})})})]})]})]})};export{Qs as default};
