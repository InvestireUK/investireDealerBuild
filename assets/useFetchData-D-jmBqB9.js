import{r as n,t as u}from"./index-BVpDJRyc.js";const g=({fetchFn:f,onSuccess:i,shouldFetch:t})=>{const[l,e]=n.useState(!1),{showSnackbar:r}=u();return n.useEffect(()=>{if(!t)return;(async()=>{var s,o,c;e(!0);try{const a=await f();if((s=a.data)!=null&&s.success)i((o=a.data)==null?void 0:o.data);else throw new Error("Failed to fetch data")}catch(a){((c=a.response)==null?void 0:c.status)===401?r("Unauthorized access. Please log in.","error"):r("Error fetching data. Try again later.","error")}finally{e(!1)}})()},[t]),{loading:l}};export{g as u};
