import{a9 as Fe,r as n,w as ls,v as rs,u as _,av as Se,a8 as os,bF as cs,t as ds,bG as ms,bH as us,bI as Ie,m as e,bJ as G,bK as S,bL as y,bM as xs,b5 as hs,bN as fs,ay as Y,bO as gs,bP as bs,bQ as ps,bR as ws,bS as js,bT as Ns,bU as vs,bV as _s,bW as ys,bX as ks,bY as Cs,bZ as Fs,aM as Ss,aN as Is,b_ as Ps,b$ as Ls}from"./index-usOavGx3.js";import{u as Es}from"./useRefreshUser-pr_9e626.js";import{S as As}from"./SendContactDealModal-CQ4Jy2zc.js";import"./lodash-B66gx5xD.js";const Js=()=>{var ce,de,me,ue,xe,he,fe,ge,be,pe,we,je,Ne,ve,_e,ye,ke,Ce;const{dealToken:b}=Fe(),{id:I}=Fe(),[c,Os]=n.useState(null),[q,F]=n.useState(!0),[$s,Pe]=n.useState(null),[Le,Ee]=n.useState(!1),K=ls(),h=rs();Es();const W=_(s=>s.deal.currentStep),Ae=_(s=>s.deal.comparableMode);_(s=>s.deal.newComperableData),_(s=>s.deal.SAnewComperableData);const[U,Oe]=n.useState(!1),[Ms,$e]=n.useState(!1),[Rs,X]=n.useState(!1),[zs,J]=n.useState(!1),u=n.useRef(null),f=n.useRef(null),P="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{handleApiCall:Me,loading:Re}=Se(),{data:L}=os(cs,c==null?void 0:c.id,{type:Ae});(ce=L==null?void 0:L.data)!=null&&ce.dealComparables;const[Hs,Ts]=n.useState(!1),[ze,He]=n.useState([]),[t,Te]=n.useState(null),o=_(s=>s.deal.AivideoUrl),{showSnackbar:x}=ds();((...s)=>s.find(a=>Array.isArray(a)&&a.length>0)||[])(c==null?void 0:c.newcomperable,c==null?void 0:c.property_deal_comparables,c==null?void 0:c.property_deal_sa_comparables);const[Vs,Be]=n.useState([]),[Gs,Ve]=n.useState(""),{token:p,role:w}=_(s=>s.user),[Ys,Q]=n.useState(!1),[i,Ge]=n.useState(null),{loading:Z}=Se(),[Ye,E]=n.useState(!1),[A,O]=n.useState(!1),[qe,$]=n.useState(!1),j=n.useCallback(async()=>{var s,a,d,m;F(!0);try{let r;if(b&&p&&w==="investor"?(r=await ms(b),Q(!0)):(r=await us(b),Q(!0)),r&&r.data){const l=r.data.data;l!=null&&l.dealShare&&Ge(l.dealShare),l!=null&&l.propertyDeal&&(Te(l.propertyDeal),l.propertyDeal.property_deal_comparables&&Be(l.propertyDeal.property_deal_comparables),(s=l.propertyDeal)!=null&&s.ai_video_id&&Ve((a=l.propertyDeal)==null?void 0:a.ai_video_id))}}catch(r){console.error("API Error:",r),Pe("Failed to load deal details"),x(((m=(d=r.response)==null?void 0:d.data)==null?void 0:m.error)||"Failed to load deal details","error")}finally{F(!1)}},[b,p,w]);n.useEffect(()=>{I&&j()},[j,I]);const D=async s=>{if(!(!s||A)){F(!0);try{const d=await(await fetch(`https://api.heygen.com/v1/video_status.get?video_id=${s}`,{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"sk_V2_hgu_kKqknA6ytKH_2KwO3bxcX62IB12c285JDCoAIdiiuduk"}})).json();h(Ps(d.data)),O(!0)}catch(a){console.error("API error:",a)}finally{F(!1)}}};n.useEffect(()=>{t!=null&&t.ai_video_id&&!A&&!o&&D(c==null?void 0:c.ai_video_id)},[t==null?void 0:t.ai_video_id,A,o]),n.useEffect(()=>{t!=null&&t.ai_video_id&&(t==null?void 0:t.ai_video_id)!==(o==null?void 0:o.video_id)&&(O(!1),D(t==null?void 0:t.ai_video_id))},[t==null?void 0:t.ai_video_id]),n.useEffect(()=>{O(!1)},[I]);const k={description:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.description_ai)||"No AI description available":(t==null?void 0:t.description)||"No description available"},ee={location:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.location_ai)||"No AI location available":(t==null?void 0:t.location)||"No location available"};n.useEffect(()=>{const s=(d,m)=>{if(!d.current)return;const l=parseFloat(window.getComputedStyle(d.current).lineHeight)*3,v=d.current.scrollHeight>l+1;m(v)};s(u,X),s(f,J);const a=new ResizeObserver(()=>{s(u,X),s(f,J)});return u.current&&a.observe(u.current),f.current&&a.observe(f.current),()=>a.disconnect()},[k,ee]),n.useEffect(()=>{b&&j()},[j,b]),n.useEffect(()=>{!q&&t&&(document.querySelectorAll("[data-accordion-target]").forEach(a=>{const d=a.cloneNode(!0);a.parentNode.replaceChild(d,a)}),document.querySelectorAll("[data-accordion-target]").forEach(a=>{a.addEventListener("click",()=>{const d=a.getAttribute("data-accordion-target"),m=document.querySelector(d);if(m){m.classList.toggle("hidden");const r=m.classList.contains("hidden")?"false":"true";a.setAttribute("aria-expanded",r);const l=a.querySelector("[data-accordion-icon]");l&&(r==="true"?l.classList.remove("rotate-180"):l.classList.add("rotate-180"))}})}))},[q,t]),t!=null&&t.address_line_1,t!=null&&t.address_line_2,t!=null&&t.post_code,(de=t==null?void 0:t.country)!=null&&de.name;const se=(t==null?void 0:t.image_url)||null,M=(t==null?void 0:t.map_image_url)||null,R=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const a={lat:s.coords.latitude,lng:s.coords.longitude};setUserLocation(a),setAddressCoordinates(a)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},[z,Ke]=n.useState(!0),[H,We]=n.useState(!0),[T,Ue]=n.useState(!0),[B,Xe]=n.useState(!0),[Je,Qe]=n.useState(!1),[qs,Ze]=n.useState(!1);n.useEffect(()=>{if(u.current){const a=parseFloat(getComputedStyle(u.current).lineHeight)*3;Qe(u.current.scrollHeight>a)}if(f.current){const a=parseFloat(getComputedStyle(f.current).lineHeight)*3;Ze(f.current.scrollHeight>a)}},[k,ee]);const De=()=>{Oe(s=>{const a=!s;return a&&$e(!1),a})};n.useEffect(()=>(h(Ie(!0)),h({type:"deal/setCurrentStep",payload:Math.max(W,5)}),()=>{h(Ie(!1))}),[h,W]);const N=(i==null?void 0:i.intrust_status)||0,es=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){x("Please login to mark as interested","error"),h(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),K("/login");return}if(!(i!=null&&i.id)){x("Deal information not available","error");return}$(!0)},ss=()=>{if(!p&&w!=="investor"||p&&w!=="investor"){x("Please login to mark as not interested","error"),h(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),K("/login");return}if(!(i==null?void 0:i.id)){x("Deal information not available","error");return}E(!0)},ts=s=>{const a=i==null?void 0:i.id;Me({apiFn:()=>Ls(a,s),onSuccess:()=>{E(!1),j()},onError:()=>{}})},[as,te]=n.useState(!1),[ae,V]=n.useState(0),C=((me=t==null?void 0:t.property_deal_media)==null?void 0:me.map(s=>{var a;return(a=s==null?void 0:s.media)==null?void 0:a.media_url}))||[],ne=s=>{V(s),te(!0)},ie=s=>{s.stopPropagation(),te(!1)},le=s=>{s.stopPropagation(),V(a=>(a+1)%C.length)},re=s=>{s.stopPropagation(),V(a=>(a-1+C.length)%C.length)},ns=s=>{var m,r,l,v;const a=[];if(s!=null&&s.no_of_dwelling){const g=(s==null?void 0:s.deal_type_id)===2?s.no_of_dwelling>1?" Beds":" Bed":s.no_of_dwelling>1?" Bedrooms":" Bedroom";a.push(s.no_of_dwelling+g)}if(s!=null&&s.deal_type&&a.push(s.deal_type.title),(m=s==null?void 0:s.sub_category)!=null&&m.title&&a.push(s.sub_category.title),(r=s==null?void 0:s.property_type_category)!=null&&r.title&&a.push((l=s.property_type_category)==null?void 0:l.title),(v=s==null?void 0:s.exit_type)!=null&&v.title){let g=s.exit_type.title.toLowerCase();g==="sell"?g="Flip":g==="refinance"&&(g="BRRR"),a.push(g)}return a.join(",")},is=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`https://phplaravel-1547671-6035260.cloudwaysapps.com/storage/${s}`:null,oe=(t==null?void 0:t.ai_video_id)&&M&&(o==null?void 0:o.status)!=="failed";return e.jsxs("div",{className:"create-deal-summary-page-wrap",children:[e.jsx(As,{isOpen:Le,onClose:()=>{Ee(!1),He([])},selectedDeals:ze}),e.jsx("div",{className:"flex items-end justify-between my-5",children:e.jsx("div",{children:e.jsx("h4",{className:"text-[#333333] font-bold mb-4 light-black dark:text-[#F8F8F8]",children:"View Deal"})})}),Re?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-add-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Ke(!z),children:[e.jsx("h5",{className:"text-lg font-semibold",children:"Title"}),z?e.jsx(G,{className:"text-gray-600",size:20}):e.jsx(S,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${z?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-property-map-wrap",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between purchased-price-with-location",children:[e.jsx("p",{className:"text-[#242424] font-medium property-location-text mb-4 dark:text-[#F8F8F8]",children:ns(t)}),(t==null?void 0:t.deal_type_id)===2?e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Rent:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(ue=t==null?void 0:t.property_deal_sa_investment)!=null&&ue.rent?`£${parseFloat((xe=t==null?void 0:t.property_deal_sa_investment)==null?void 0:xe.rent).toLocaleString()}`:"0"})]}):e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Purchased Price:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(he=t==null?void 0:t.property_deal_investment)!=null&&he.purchase_price?`£${parseFloat((fe=t==null?void 0:t.property_deal_investment)==null?void 0:fe.purchase_price).toLocaleString()}`:"0"})]})]}),e.jsxs("div",{className:"summary-property-map-grid-wrap",children:[e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${((ge=t==null?void 0:t.property_deal_media)==null?void 0:ge.length)>0?"summary-property-col":""}`,children:[e.jsx("div",{className:"summary-property-subimages-div",children:(be=t==null?void 0:t.property_deal_media)==null?void 0:be.slice(0,4).map((s,a)=>{var r,l;const m=(((r=t==null?void 0:t.property_deal_media)==null?void 0:r.length)||0)-4;return e.jsx("div",{className:"summary-property-subimages relative",children:s?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(l=s==null?void 0:s.media)==null?void 0:l.media_url,alt:"Property",className:"w-full h-full object-cover cursor-pointer",onClick:()=>ne(a)}),a===3&&m>0&&e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center text-white text-lg font-semibold cursor-pointer",onClick:()=>ne(a),children:["+",m]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})},a)})}),e.jsx("div",{className:"summary-property-main-images-div h-full",children:e.jsx("div",{className:"w-full bg-gray-700 summary-property-div",children:se?e.jsx("img",{src:se,alt:"Property",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:y.noImageAvailable})})})]}),as&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:ie,children:e.jsxs("div",{className:"relative max-w-4xl w-full p-4 flex items-center justify-center",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:C[ae],alt:"Large view",className:"max-h-[80vh] max-w-full object-contain mx-auto rounded-lg shadow-lg"}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),re(s)}}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),le(s)}}),e.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),re(s)},children:"❮"}),e.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),le(s)},children:"❯"}),e.jsx("button",{className:"fixed top-4 right-4 text-white text-3xl z-50",onClick:ie,children:e.jsx(xs,{})}),e.jsxs("div",{className:"absolute bottom-4 text-white text-center w-full",children:[ae+1," / ",C.length]})]})})]}),e.jsx("div",{className:"summary-map-loaction-col",children:e.jsx("div",{className:"relative summary-map-wrapper min-h-[200px] flex items-center justify-center",children:t!=null&&t.ai_video_id?e.jsxs(e.Fragment,{children:[(o==null?void 0:o.status)==="processing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(hs,{className:"text-white animate-spin text-3xl"}),e.jsx("p",{className:"text-white",children:"Generating..."})]}),(o==null?void 0:o.status)==="completed"&&e.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("img",{src:o.thumbnail_url,alt:"Generated video thumbnail",className:"mx-auto w-full max-w-md h-auto object-contain",onClick:()=>window.open(o.video_url,"_blank")}),e.jsx(fs,{className:"absolute inset-0 m-auto text-[#6C5DD3]",size:70,onClick:()=>window.open(o.video_url,"_blank"),style:{pointerEvents:"none"}})]}),(o==null?void 0:o.status)==="failed"&&(M?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:R,children:e.jsx(Y,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable}))]}):e.jsx(e.Fragment,{children:M?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:R,children:e.jsx(Y,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:y.noMapImageAvailable})})})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 py-5",children:[e.jsxs("div",{className:"flex items-start gap-4 border-t pt-6 w-full md:w-3/5",children:[((pe=i==null?void 0:i.contact)==null?void 0:pe.company_logo)&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden",children:e.jsx("img",{src:is(i.contact.company_logo),alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-start gap-3 mb-4",children:[((we=i==null?void 0:i.contact)==null?void 0:we.company_name)&&e.jsx("p",{children:i.contact.company_name}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 flex-wrap",children:[((je=i==null?void 0:i.contact)==null?void 0:je.company_website)&&e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_website})]}),((Ne=i==null?void 0:i.contact)==null?void 0:Ne.company_email)&&e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_email})]}),((ve=i==null?void 0:i.contact)==null?void 0:ve.company_phone)&&e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_phone})]})]})]})]}),e.jsxs("div",{className:"flex justify-center w-full md:w-1/2",children:[e.jsxs("div",{className:"forecast-btn-group-wrap flex flex-wrap gap-4 justify-center",children:[e.jsxs("button",{type:"button",onClick:es,disabled:N===1||Z,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===1?"bg-green-700 text-white border-green-700":"border-green-700 text-green-700 hover:bg-green-700 hover:text-white"}`,children:[e.jsx(ws,{}),N===0?"Interested":"Mark Interested"]}),e.jsxs("button",{type:"button",onClick:ss,disabled:N===2||Z,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===2?"bg-red-700 text-white border-red-700":"border-red-700 text-red-700 hover:bg-red-700 hover:text-white"}`,children:[e.jsx(js,{}),N===0?"Not Interested":"Mark Not Interested"]})]}),e.jsx(Ns,{isOpen:Ye,onClose:()=>E(!1),onSubmit:ts}),qe&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 max-w-md w-[90%] text-center transform transition-all scale-100",children:[e.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white text-lg font-bold transition","aria-label":"Close",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-3",children:"Before You Proceed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Please do your due diligence. This is not financial advice."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{$(!1);try{const s=await vs(i==null?void 0:i.id);(s==null?void 0:s.status)===200?(await j(),x("Marked as interested!","success")):x("Something went wrong, please try again.","error")}catch(s){console.error("Error marking interest:",s),x("Something went wrong, please try again.","error")}},className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 text-white font-medium shadow hover:opacity-90 transition",children:"OK"})})]})})]})]})]})})]}),e.jsxs("div",{className:"deal-summart-description-wrap mt-6",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>We(!H),children:[e.jsx("h5",{className:"text-lg font-semibold dark:text-[#F8F8F8]",children:"Description"}),H?e.jsx(G,{className:"text-gray-600",size:20}):e.jsx(S,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${H?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-description-text flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:`w-full ${oe?"md:w-[60%]":"md:w-full"}`,children:e.jsxs("div",{className:"summary-description-heading-wrap",children:[e.jsx("h4",{className:"text-lg text-[#333333] font-normal mb-2 dark:text-[#F8F8F8]",children:"Property description:"}),e.jsx("p",{ref:u,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${U?"":"line-clamp-12"}`,dangerouslySetInnerHTML:{__html:_s(k==null?void 0:k.description)}}),Je&&e.jsx("button",{onClick:De,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:U?"Read less":"Read more"})]})}),oe&&e.jsxs("div",{className:"w-full md:w-[40%] relative bg-gray-700 summary-map-wrapper min-h-[200px]",children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full h-full",style:{border:0,borderRadius:"12px",minHeight:"358px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${P}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:R,children:e.jsx(Y,{})})]})]})})]}),e.jsx("div",{className:"financial-page-inner-div-wrap my-6",children:(t==null?void 0:t.deal_type_id)===2?e.jsx(ys,{deal:t}):e.jsx(ks,{deal:t})}),e.jsxs("div",{className:"mt-6 DealsDetails-page-wrapper summary-financials-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Xe(!B),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.financials}),B?e.jsx(G,{className:"text-gray-500 transition-transform duration-300",size:20}):e.jsx(S,{className:"text-gray-500 transition-transform duration-300",size:20})]}),e.jsx("div",{className:`transition-all duration-300 ${B?"opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"min-h-screen financial-page-main-div-wrap",children:e.jsx("div",{className:"financial-page-inner-div-wrap",children:e.jsx(Cs,{deal:t})})})})]}),e.jsxs("div",{className:"summary-page-comparables-sec rounded-xl",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer bg-[#F8F8F8] px-4 py-2",onClick:()=>Ue(s=>!s),children:[e.jsx("h5",{className:"text-lg font-semibold",children:y.comparables}),e.jsx(S,{className:`text-xl transition-transform duration-300 ${T?"rotate-180":""}`})]}),e.jsx("div",{className:"transition-all duration-300 ease-in-out overflow-hidden",style:{maxHeight:T?"":"0",opacity:T?1:0},children:e.jsx("div",{className:(c==null?void 0:c.deal_type_id)===2?"p-4":"",children:(t==null?void 0:t.deal_type_id)===2?((_e=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:_e.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"overflow-x-auto comparable-listing-table-wrap",children:(ye=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:ye.map((s,a)=>e.jsx(Fs,{comp:s},s.id||a))}):((ke=t==null?void 0:t.property_deal_comparables)==null?void 0:ke.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"border dark:border-[#333333]",children:e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F8F8F8] dark:bg-[#242424] text-dark dark:text-[#F8F8F8] text-[12px] border-b dark:border-b-[#333333]",children:[e.jsx("th",{className:"p-4",children:"SL NO."}),e.jsx("th",{className:"p-4",children:"PROPERTY"}),e.jsx("th",{className:"p-4",children:"CATEGORY"}),e.jsx("th",{className:"p-4",children:"BEDROOMS"}),e.jsx("th",{className:"p-4",children:"PRICE"}),e.jsx("th",{className:"p-4",children:"YEAR"}),e.jsx("th",{className:"p-4",children:"DISTANCE"})]})}),e.jsx("tbody",{children:(Ce=t==null?void 0:t.property_deal_comparables)==null?void 0:Ce.map((s,a)=>{var d,m,r,l;return e.jsxs("tr",{className:"border-b dark:border-b-[#333333]",children:[e.jsx("td",{className:"p-4",children:a+1}),e.jsxs("td",{className:"p-4 flex items-normal gap-2",children:[e.jsx("img",{src:(s==null?void 0:s.image_url)||Ss,alt:"Image",className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold truncate max-w-[100px]",children:s==null?void 0:s.address}),s!=null&&s.linked_search_url?e.jsx("a",{href:s.linked_search_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#3673D5] font-bold text-sm cursor-pointer",children:"Website"}):e.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Website"})]}),(s==null?void 0:s.type)==="ai"&&e.jsx("span",{className:"mr-1 inline-block w-4 h-4 align-top",children:e.jsx("img",{src:Is,alt:"AI",className:"w-full h-full object-contain"})})]}),e.jsx("td",{className:"p-4",children:(r=(m=(d=(s==null?void 0:s.property_type_string)||(s==null?void 0:s.sub_category))==null?void 0:d.toLowerCase())==null?void 0:m.replace(/_/g," "))==null?void 0:r.replace(/\b\w/g,v=>v.toUpperCase())}),e.jsx("td",{className:"p-4",children:s.no_of_bedroom}),e.jsxs("td",{className:"p-4",children:["£",Number(s.price).toLocaleString("en-GB",{maximumFractionDigits:0})]}),e.jsx("td",{className:"p-4",children:s.year}),e.jsx("td",{className:"p-4",children:(s==null?void 0:s.distance)!=null?`${(l=parseInt(s==null?void 0:s.distance))==null?void 0:l.toFixed(2)} Mile${(s==null?void 0:s.distance)>1?"s":""}`:"-"})]},s.id||a)})})]})})})})})]})]})]})};export{Js as default};
