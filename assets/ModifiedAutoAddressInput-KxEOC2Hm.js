import{r as s,cc as x,m as E}from"./index-BYsrrQ78.js";const R=({value:u,onChange:m,onPlaceSelected:l,className:g,placeholder:f,required:h,...y})=>{const[A,a]=s.useState(null),n=s.useRef(null),c=s.useRef(null),d="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44";s.useEffect(()=>{var r,t;if((t=(r=window.google)==null?void 0:r.maps)!=null&&t.places){i();return}const o=document.querySelector("script[src*='maps.googleapis.com']");if(o){o.addEventListener("load",i);return}const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${d}&libraries=places`,e.async=!0,e.defer=!0,e.onload=i,e.onerror=()=>{a("Failed to load Google Maps API")},document.head.appendChild(e),()=>{e.onload=null,e.onerror=null}},[d]);const i=()=>{var o,e;if(!(!n.current||!((e=(o=window.google)==null?void 0:o.maps)!=null&&e.places)))try{c.current=new window.google.maps.places.Autocomplete(n.current,{types:["address"],fields:["address_components","formatted_address","geometry","place_id"],componentRestrictions:{country:"GB"}}),c.current.addListener("place_changed",w)}catch{a("Error initializing Google Places")}},w=async()=>{var e,r;const o=c.current.getPlace();if(!(o!=null&&o.formatted_address)){console.warn("Incomplete place data");return}try{const t=await x.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:o.formatted_address,key:d}}),p=(r=(e=t==null?void 0:t.data)==null?void 0:e.results)==null?void 0:r[0];p?l&&l(p):console.warn("No geocoded results found")}catch(t){console.error("Geocoding failed",t),a("Failed to fetch accurate address from Geocoding API")}};return E.jsx("input",{ref:n,type:"text",value:u||"",onChange:m,className:g||"form-control focus:outline-none",placeholder:f,required:h,minLength:2,maxLength:15,...y})};export{R as M};
