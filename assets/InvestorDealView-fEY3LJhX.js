import{a8 as Se,r as n,t as cs,s as ds,u as _,au as Ie,a7 as ms,bA as xs,q as us,bB as hs,bC as fs,bD as Pe,m as e,bE as V,bF as I,bG as C,bH as gs,b5 as bs,bI as ps,ax as Le,bJ as js,bK as ws,bL as Ns,bM as vs,bN as _s,bO as ys,bP as ks,bQ as Fs,bR as Cs,bS as Ee,bT as Ss,bU as Is,aL as Ps,aM as Ls,bV as Es,bW as As}from"./index-C1l7Vm-F.js";import{u as Ms}from"./useRefreshUser-DO3xyE-p.js";import{S as Ts}from"./SendContactDealModal-B7DUPavc.js";import"./lodash-ConlO1gX.js";const Js=()=>{var de,me,xe,ue,he,fe,ge,be,pe,je,we,Ne,ve,_e,ye,ke,Fe,Ce;const{dealToken:b}=Se(),{id:P}=Se(),[o,Os]=n.useState(null),[Y,S]=n.useState(!0),[Rs,Ae]=n.useState(null),[Me,Te]=n.useState(!1),G=cs(),f=ds();Ms();const q=_(s=>s.deal.currentStep),Oe=_(s=>s.deal.comparableMode);_(s=>s.deal.newComperableData),_(s=>s.deal.SAnewComperableData);const[W,U]=n.useState(!1),[K,Q]=n.useState(!1),[$s,J]=n.useState(!1),[zs,X]=n.useState(!1),x=n.useRef(null),u=n.useRef(null),Z="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{handleApiCall:Re,loading:$e}=Ie(),{data:L}=ms(xs,o==null?void 0:o.id,{type:Oe});(de=L==null?void 0:L.data)!=null&&de.dealComparables;const[Hs,Bs]=n.useState(!1),[ze,He]=n.useState([]),[t,Be]=n.useState(null),c=_(s=>s.deal.AivideoUrl),{showSnackbar:h}=us();((...s)=>s.find(a=>Array.isArray(a)&&a.length>0)||[])(o==null?void 0:o.newcomperable,o==null?void 0:o.property_deal_comparables,o==null?void 0:o.property_deal_sa_comparables);const[Ys,Ve]=n.useState([]),[Gs,Ye]=n.useState(""),{token:p,role:j}=_(s=>s.user),[qs,D]=n.useState(!1),[i,Ge]=n.useState(null),{loading:ee}=Ie(),[qe,E]=n.useState(!1),[A,M]=n.useState(!1),[We,T]=n.useState(!1),w=n.useCallback(async()=>{var s,a,d,m;S(!0);try{let r;if(b&&p&&j==="investor"?(r=await hs(b),D(!0)):(r=await fs(b),D(!0)),r&&r.data){const l=r.data.data;l!=null&&l.dealShare&&Ge(l.dealShare),l!=null&&l.propertyDeal&&(Be(l.propertyDeal),l.propertyDeal.property_deal_comparables&&Ve(l.propertyDeal.property_deal_comparables),(s=l.propertyDeal)!=null&&s.ai_video_id&&Ye((a=l.propertyDeal)==null?void 0:a.ai_video_id))}}catch(r){console.error("API Error:",r),Ae("Failed to load deal details"),h(((m=(d=r.response)==null?void 0:d.data)==null?void 0:m.error)||"Failed to load deal details","error")}finally{S(!1)}},[b,p,j]);n.useEffect(()=>{P&&w()},[w,P]);const se=async s=>{if(!(!s||A)){S(!0);try{const d=await(await fetch(`https://api.heygen.com/v1/video_status.get?video_id=${s}`,{method:"GET",headers:{"Content-Type":"application/json","X-API-KEY":"NmFhN2IxYTRkM2I0NDg5YThjOWExZDcwNjQ5NjdhMmMtMTc1Mzk5NzExNQ=="}})).json();f(Es(d.data)),M(!0)}catch(a){console.error("API error:",a)}finally{S(!1)}}};n.useEffect(()=>{t!=null&&t.ai_video_id&&!A&&!c&&se(o==null?void 0:o.ai_video_id)},[t==null?void 0:t.ai_video_id,A,c]),n.useEffect(()=>{t!=null&&t.ai_video_id&&(t==null?void 0:t.ai_video_id)!==(c==null?void 0:c.video_id)&&(M(!1),se(t==null?void 0:t.ai_video_id))},[t==null?void 0:t.ai_video_id]),n.useEffect(()=>{M(!1)},[P]);const y={description:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.description_ai)||"No AI description available":(t==null?void 0:t.description)||"No description available"},k={location:(t==null?void 0:t.description_type)==="ai"?(t==null?void 0:t.location_ai)||"No AI location available":(t==null?void 0:t.location)||"No location available"};n.useEffect(()=>{const s=(d,m)=>{if(!d.current)return;const l=parseFloat(window.getComputedStyle(d.current).lineHeight)*3,v=d.current.scrollHeight>l+1;m(v)};s(x,J),s(u,X);const a=new ResizeObserver(()=>{s(x,J),s(u,X)});return x.current&&a.observe(x.current),u.current&&a.observe(u.current),()=>a.disconnect()},[y,k]),n.useEffect(()=>{b&&w()},[w,b]),n.useEffect(()=>{!Y&&t&&(document.querySelectorAll("[data-accordion-target]").forEach(a=>{const d=a.cloneNode(!0);a.parentNode.replaceChild(d,a)}),document.querySelectorAll("[data-accordion-target]").forEach(a=>{a.addEventListener("click",()=>{const d=a.getAttribute("data-accordion-target"),m=document.querySelector(d);if(m){m.classList.toggle("hidden");const r=m.classList.contains("hidden")?"false":"true";a.setAttribute("aria-expanded",r);const l=a.querySelector("[data-accordion-icon]");l&&(r==="true"?l.classList.remove("rotate-180"):l.classList.add("rotate-180"))}})}))},[Y,t]),t!=null&&t.address_line_1,t!=null&&t.address_line_2,t!=null&&t.post_code,(me=t==null?void 0:t.country)!=null&&me.name;const te=(t==null?void 0:t.image_url)||null,O=(t==null?void 0:t.map_image_url)||null,ae=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const a={lat:s.coords.latitude,lng:s.coords.longitude};setUserLocation(a),setAddressCoordinates(a)},()=>{alert("Location access denied or unavailable.")}):alert("Geolocation is not supported by this browser.")},[R,Ue]=n.useState(!0),[$,Ke]=n.useState(!0),[z,Qe]=n.useState(!0),[H,Je]=n.useState(!0),[Xe,Ze]=n.useState(!1),[De,es]=n.useState(!1);n.useEffect(()=>{if(x.current){const a=parseFloat(getComputedStyle(x.current).lineHeight)*3;Ze(x.current.scrollHeight>a)}if(u.current){const a=parseFloat(getComputedStyle(u.current).lineHeight)*3;es(u.current.scrollHeight>a)}},[y,k]);const ss=()=>{U(s=>{const a=!s;return a&&Q(!1),a})},ts=()=>{Q(s=>{const a=!s;return a&&U(!1),a})};n.useEffect(()=>(f(Pe(!0)),f({type:"deal/setCurrentStep",payload:Math.max(q,5)}),()=>{f(Pe(!1))}),[f,q]);const N=(i==null?void 0:i.intrust_status)||0,as=()=>{if(!p&&j!=="investor"||p&&j!=="investor"){h("Please login to mark as interested","error"),f(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),G("/login");return}if(!(i!=null&&i.id)){h("Deal information not available","error");return}T(!0)},ns=()=>{if(!p&&j!=="investor"||p&&j!=="investor"){h("Please login to mark as not interested","error"),f(clearUser()),localStorage.setItem("deal_redirect_url",window.location.pathname),G("/login");return}if(!(i==null?void 0:i.id)){h("Deal information not available","error");return}E(!0)},is=s=>{const a=i==null?void 0:i.id;Re({apiFn:()=>As(a,s),onSuccess:()=>{E(!1),w()},onError:()=>{}})},[ls,ne]=n.useState(!1),[ie,B]=n.useState(0),F=((xe=t==null?void 0:t.property_deal_media)==null?void 0:xe.map(s=>{var a;return(a=s==null?void 0:s.media)==null?void 0:a.media_url}))||[],le=s=>{B(s),ne(!0)},re=s=>{s.stopPropagation(),ne(!1)},oe=s=>{s.stopPropagation(),B(a=>(a+1)%F.length)},ce=s=>{s.stopPropagation(),B(a=>(a-1+F.length)%F.length)},rs=s=>{var m,r,l,v;const a=[];if(s!=null&&s.no_of_dwelling){const g=(s==null?void 0:s.deal_type_id)===2?s.no_of_dwelling>1?" Beds":" Bed":s.no_of_dwelling>1?" Bedrooms":" Bedroom";a.push(s.no_of_dwelling+g)}if(s!=null&&s.deal_type&&a.push(s.deal_type.title),(m=s==null?void 0:s.sub_category)!=null&&m.title&&a.push(s.sub_category.title),(r=s==null?void 0:s.property_type_category)!=null&&r.title&&a.push((l=s.property_type_category)==null?void 0:l.title),(v=s==null?void 0:s.exit_type)!=null&&v.title){let g=s.exit_type.title.toLowerCase();g==="sell"?g="Flip":g==="refinance"&&(g="BRRR"),a.push(g)}return a.join(",")},os=s=>s?s.startsWith("blob:")||s.startsWith("http")?s:`https://phplaravel-1547671-6035260.cloudwaysapps.com/storage/${s}`:null;return e.jsxs("div",{className:"create-deal-summary-page-wrap",children:[e.jsx(Ts,{isOpen:Me,onClose:()=>{Te(!1),He([])},selectedDeals:ze}),e.jsx("div",{className:"flex items-end justify-between my-5",children:e.jsx("div",{children:e.jsx("h4",{className:"text-[#333333] font-bold mb-4 light-black dark:text-[#F8F8F8]",children:"View Deal"})})}),$e?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsx("div",{children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-[#6C5DD3] border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"summary-add-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Ue(!R),children:[e.jsx("h5",{className:"text-lg font-semibold",children:"Title"}),R?e.jsx(V,{className:"text-gray-600",size:20}):e.jsx(I,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${R?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-property-map-wrap",children:[e.jsxs("div",{className:"flex items-center justify-between purchased-price-with-location",children:[e.jsx("p",{className:"text-[#242424] font-medium property-location-text mb-4 dark:text-[#F8F8F8]",children:rs(t)}),(t==null?void 0:t.deal_type_id)===2?e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Rent:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(ue=t==null?void 0:t.property_deal_sa_investment)!=null&&ue.rent?`£${parseFloat((he=t==null?void 0:t.property_deal_sa_investment)==null?void 0:he.rent).toLocaleString()}`:"0"})]}):e.jsxs("p",{className:"text-[#595959] font-medium summary-map-price-label mb-4 text-right dark:text-[#F8F8F8]",children:["Purchased Price:"," ",e.jsx("span",{className:"text-[#242424] dark:text-[#F8F8F8]",children:(fe=t==null?void 0:t.property_deal_investment)!=null&&fe.purchase_price?`£${parseFloat((ge=t==null?void 0:t.property_deal_investment)==null?void 0:ge.purchase_price).toLocaleString()}`:"0"})]})]}),e.jsxs("div",{className:"summary-property-map-grid-wrap",children:[e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${((be=t==null?void 0:t.property_deal_media)==null?void 0:be.length)>0?"summary-property-col":""}`,children:[e.jsx("div",{className:"summary-property-subimages-div",children:(pe=t==null?void 0:t.property_deal_media)==null?void 0:pe.slice(0,4).map((s,a)=>{var r,l;const m=(((r=t==null?void 0:t.property_deal_media)==null?void 0:r.length)||0)-4;return e.jsx("div",{className:"summary-property-subimages relative",children:s?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:(l=s==null?void 0:s.media)==null?void 0:l.media_url,alt:"Property",className:"w-full h-full object-cover cursor-pointer",onClick:()=>le(a)}),a===3&&m>0&&e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center text-white text-lg font-semibold cursor-pointer",onClick:()=>le(a),children:["+",m]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:C.noImageAvailable})},a)})}),e.jsx("div",{className:"summary-property-main-images-div h-full",children:e.jsx("div",{className:"w-full bg-gray-700 summary-property-div",children:te?e.jsx("img",{src:te,alt:"Property",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:C.noImageAvailable})})})]}),ls&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:re,children:e.jsxs("div",{className:"relative max-w-4xl w-full p-4 flex items-center justify-center",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:F[ie],alt:"Large view",className:"max-h-[80vh] max-w-full object-contain mx-auto rounded-lg shadow-lg"}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),ce(s)}}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 cursor-pointer",onClick:s=>{s.stopPropagation(),oe(s)}}),e.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),ce(s)},children:"❮"}),e.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white text-3xl bg-black bg-opacity-40 px-3 py-2 rounded-full z-50",onClick:s=>{s.stopPropagation(),oe(s)},children:"❯"}),e.jsx("button",{className:"fixed top-4 right-4 text-white text-3xl z-50",onClick:re,children:e.jsx(gs,{})}),e.jsxs("div",{className:"absolute bottom-4 text-white text-center w-full",children:[ie+1," / ",F.length]})]})})]}),e.jsx("div",{className:"summary-map-loaction-col",children:e.jsx("div",{className:"relative summary-map-wrapper min-h-[200px] flex items-center justify-center",children:t!=null&&t.ai_video_id?e.jsxs(e.Fragment,{children:[(c==null?void 0:c.status)==="processing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(bs,{className:"text-white animate-spin text-3xl"}),e.jsx("p",{className:"text-white",children:"Generating..."})]}),(c==null?void 0:c.status)==="completed"&&e.jsxs("div",{className:"relative flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("img",{src:c.thumbnail_url,alt:"Generated video thumbnail",className:"mx-auto w-full max-w-md h-auto object-contain",onClick:()=>window.open(c.video_url,"_blank")}),e.jsx(ps,{className:"absolute inset-0 m-auto text-[#6C5DD3]",size:70,onClick:()=>window.open(c.video_url,"_blank"),style:{pointerEvents:"none"}})]}),(c==null?void 0:c.status)==="failed"&&e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("p",{className:"text-red-500 font-semibold",children:"Failed to generate video"})})]}):e.jsx(e.Fragment,{children:O?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full",style:{border:0,borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${Z}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:ae,children:e.jsx(Le,{})})]}):e.jsx("div",{className:"w-full flex items-center justify-center text-gray-500",children:C.noMapImageAvailable})})})})]}),e.jsx("div",{className:"financial-page-inner-div-wrap my-6",children:(t==null?void 0:t.deal_type_id)===2?e.jsx(js,{deal:t}):e.jsx(ws,{deal:t})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 py-5",children:[e.jsxs("div",{className:"flex items-start gap-4 border-t pt-6 w-full md:w-3/5",children:[((je=i==null?void 0:i.contact)==null?void 0:je.company_logo)&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden",children:e.jsx("img",{src:os(i.contact.company_logo),alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col items-start gap-3 mb-4",children:[((we=i==null?void 0:i.contact)==null?void 0:we.company_name)&&e.jsx("p",{children:i.contact.company_name}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 flex-wrap",children:[((Ne=i==null?void 0:i.contact)==null?void 0:Ne.company_website)&&e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_website})]}),((ve=i==null?void 0:i.contact)==null?void 0:ve.company_email)&&e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_email})]}),((_e=i==null?void 0:i.contact)==null?void 0:_e.company_phone)&&e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"text-[#595959] dark:text-[#C5C5C5]"}),e.jsx("p",{children:i.contact.company_phone})]})]})]})]}),e.jsxs("div",{className:"flex justify-center w-full md:w-1/2",children:[e.jsxs("div",{className:"forecast-btn-group-wrap flex flex-wrap gap-4 justify-center",children:[e.jsxs("button",{type:"button",onClick:as,disabled:N===1||ee,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===1?"bg-green-700 text-white border-green-700":"border-green-700 text-green-700 hover:bg-green-700 hover:text-white"}`,children:[e.jsx(ys,{}),N===0?"Interested":"Mark Interested"]}),e.jsxs("button",{type:"button",onClick:ns,disabled:N===2||ee,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition min-w-[120px] border
        ${N===2?"bg-red-700 text-white border-red-700":"border-red-700 text-red-700 hover:bg-red-700 hover:text-white"}`,children:[e.jsx(ks,{}),N===0?"Not Interested":"Mark Not Interested"]})]}),e.jsx(Fs,{isOpen:qe,onClose:()=>E(!1),onSubmit:is}),We&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 max-w-md w-[90%] text-center transform transition-all scale-100",children:[e.jsx("button",{onClick:()=>T(!1),className:"absolute top-4 right-4 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-white text-lg font-bold transition","aria-label":"Close",children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-3",children:"Before You Proceed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:"Please do your due diligence. This is not financial advice."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{T(!1);try{const s=await Cs(i==null?void 0:i.id);(s==null?void 0:s.status)===200?(await w(),h("Marked as interested!","success")):h("Something went wrong, please try again.","error")}catch(s){console.error("Error marking interest:",s),h("Something went wrong, please try again.","error")}},className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 text-white font-medium shadow hover:opacity-90 transition",children:"OK"})})]})})]})]})]})})]}),e.jsxs("div",{className:"deal-summart-description-wrap mt-6",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Ke(!$),children:[e.jsx("h5",{className:"text-lg font-semibold dark:text-[#F8F8F8]",children:"Description"}),$?e.jsx(V,{className:"text-gray-600",size:20}):e.jsx(I,{className:"text-gray-600",size:20})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${$?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"summary-description-text flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:`w-full ${t!=null&&t.ai_video_id&&O?"md:w-[60%]":""}`,children:[e.jsxs("div",{className:"summary-description-heading-wrap",children:[e.jsx("h4",{className:"text-lg text-[#333333] font-normal mb-2 dark:text-[#F8F8F8]",children:"Property description:"}),e.jsx("p",{ref:x,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${W?"":"line-clamp-3"}`,dangerouslySetInnerHTML:{__html:Ee(y==null?void 0:y.description)}}),Xe&&e.jsx("button",{onClick:ss,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:W?"Read less":"Read more"})]}),e.jsxs("div",{className:"summary-description-heading-wrap mt-6",children:[e.jsx("h4",{className:"text-lg text-[#333333] dark:text-[#F8F8F8] font-normal mb-2",children:"Location description:"}),e.jsx("p",{ref:u,className:`text-[#595959] dark:text-[#F8F8F8] whitespace-pre-line overflow-hidden transition-all duration-300 ${K?"":"line-clamp-3"}`,dangerouslySetInnerHTML:{__html:Ee(k==null?void 0:k.location)}}),De&&e.jsx("button",{onClick:ts,className:"mt-2 text-sm text-[#6C5DD3] font-semibold",children:K?"Read less":"Read more"})]})]}),(t==null?void 0:t.ai_video_id)&&O&&e.jsxs("div",{className:"w-full md:w-[40%] relative bg-gray-700 summary-map-wrapper min-h-[200px]",children:[e.jsx("iframe",{width:"600",height:"358",className:"rounded-lg w-full h-full",style:{border:0,borderRadius:"12px",minHeight:"358px"},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=${Z}&q=${t==null?void 0:t.lat},${t==null?void 0:t.lng}&zoom=16`,title:"Google Map"}),e.jsx("button",{type:"button",className:"absolute bottom-[30px] right-[60px] bg-black text-white px-2 py-2 rounded-full border border-white text-sm shadow transition",onClick:ae,children:e.jsx(Le,{})})]})]})})]}),e.jsxs("div",{className:"mt-6 DealsDetails-page-wrapper summary-financials-details-wrap",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer",onClick:()=>Je(!H),children:[e.jsx("h5",{className:"text-lg font-semibold",children:C.financials}),H?e.jsx(V,{className:"text-gray-500 transition-transform duration-300",size:20}):e.jsx(I,{className:"text-gray-500 transition-transform duration-300",size:20})]}),e.jsx("div",{className:`transition-all duration-300 ${H?"opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"min-h-screen financial-page-main-div-wrap",children:e.jsx("div",{className:"financial-page-inner-div-wrap",children:e.jsx(Ss,{deal:t})})})})]}),e.jsxs("div",{className:"summary-page-comparables-sec rounded-xl",children:[e.jsxs("div",{className:"deal-summary-header-wrap flex items-center justify-between cursor-pointer bg-[#F8F8F8] px-4 py-2",onClick:()=>Qe(s=>!s),children:[e.jsx("h5",{className:"text-lg font-semibold",children:C.comparables}),e.jsx(I,{className:`text-xl transition-transform duration-300 ${z?"rotate-180":""}`})]}),e.jsx("div",{className:"transition-all duration-300 ease-in-out overflow-hidden",style:{maxHeight:z?"":"0",opacity:z?1:0},children:e.jsx("div",{className:(o==null?void 0:o.deal_type_id)===2?"p-4":"",children:(t==null?void 0:t.deal_type_id)===2?((ye=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:ye.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"overflow-x-auto comparable-listing-table-wrap",children:(ke=t==null?void 0:t.property_deal_sa_comparables)==null?void 0:ke.map((s,a)=>e.jsx(Is,{comp:s},s.id||a))}):((Fe=t==null?void 0:t.property_deal_comparables)==null?void 0:Fe.length)===0?e.jsx("p",{className:"p-1",children:"No comparables available"}):e.jsx("div",{className:"border dark:border-[#333333]",children:e.jsx("div",{className:"overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F8F8F8] dark:bg-[#242424] text-dark dark:text-[#F8F8F8] text-[12px] border-b dark:border-b-[#333333]",children:[e.jsx("th",{className:"p-4",children:"SL NO."}),e.jsx("th",{className:"p-4",children:"PROPERTY"}),e.jsx("th",{className:"p-4",children:"CATEGORY"}),e.jsx("th",{className:"p-4",children:"BEDROOMS"}),e.jsx("th",{className:"p-4",children:"PRICE"}),e.jsx("th",{className:"p-4",children:"YEAR"}),e.jsx("th",{className:"p-4",children:"DISTANCE"})]})}),e.jsx("tbody",{children:(Ce=t==null?void 0:t.property_deal_comparables)==null?void 0:Ce.map((s,a)=>{var d,m,r,l;return e.jsxs("tr",{className:"border-b dark:border-b-[#333333]",children:[e.jsx("td",{className:"p-4",children:a+1}),e.jsxs("td",{className:"p-4 flex items-normal gap-2",children:[e.jsx("img",{src:(s==null?void 0:s.image_url)||Ps,alt:"Image",className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold truncate max-w-[100px]",children:s==null?void 0:s.address}),s!=null&&s.linked_search_url?e.jsx("a",{href:s.linked_search_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#3673D5] font-bold text-sm cursor-pointer",children:"Website"}):e.jsx("span",{className:"text-gray-400 font-bold text-sm",children:"Website"})]}),(s==null?void 0:s.type)==="ai"&&e.jsx("span",{className:"mr-1 inline-block w-4 h-4 align-top",children:e.jsx("img",{src:Ls,alt:"AI",className:"w-full h-full object-contain"})})]}),e.jsx("td",{className:"p-4",children:(r=(m=(d=(s==null?void 0:s.property_type_string)||(s==null?void 0:s.sub_category))==null?void 0:d.toLowerCase())==null?void 0:m.replace(/_/g," "))==null?void 0:r.replace(/\b\w/g,v=>v.toUpperCase())}),e.jsx("td",{className:"p-4",children:s.no_of_bedroom}),e.jsxs("td",{className:"p-4",children:["£",Number(s.price).toLocaleString("en-GB",{maximumFractionDigits:0})]}),e.jsx("td",{className:"p-4",children:s.year}),e.jsx("td",{className:"p-4",children:(s==null?void 0:s.distance)!=null?`${(l=parseInt(s==null?void 0:s.distance))==null?void 0:l.toFixed(2)} Mile${(s==null?void 0:s.distance)>1?"s":""}`:"-"})]},s.id||a)})})]})})})})})]})]})]})};export{Js as default};
