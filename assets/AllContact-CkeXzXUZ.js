import{r as t,ay as re,t as de,w as ie,a6 as pe,W as he,cC as fe,m as e,z as oe,bB as ge,Y as be,cD as je,cE as ve,cF as Ne,aC as Ce,u as Ue,A as $e,n as ze,o as qe,q as Te,B as Ve,cc as xe,cd as He,cG as Ye,cH as Ke}from"./index-BPP_8qLW.js";import{l as Qe}from"./lodash-BO8ePN9b.js";import{D as We}from"./DeleteConfirmationModal-B_asF0u-.js";import{I as we}from"./ImportContactsModal-EPuUV54R.js";const Ze=({isOpen:x,onClose:y,onSuccess:l})=>{var o;const[g,P]=t.useState(!1),{handleApiCall:I,loading:k}=re(),[F,b]=t.useState(!1),[$,j]=t.useState(!1);t.useRef(null);const[M,Y]=t.useState(!1),[W,z]=t.useState(!1),[q,K]=t.useState([]),{showSnackbar:B}=de(),T=ie(),m=(o=pe().state)==null?void 0:o.contactId,v=!!m,{register:S,handleSubmit:V,reset:A,setValue:d,formState:{errors:D}}=he({mode:"onChange",defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:""}}),[ce,ee]=t.useState({news:!1,deals:!1,investment:!1});t.useEffect(()=>{x&&m&&!F&&(b(!0),O()),x||(_(),b(!1))},[x,m,F]);const O=async()=>{var n,r,u,N,Q,H,c,C;P(!0);try{const f=await fe(m),R=(r=(n=f==null?void 0:f.data)==null?void 0:n.data)==null?void 0:r.contact;R&&(d("first_name",R.first_name),d("last_name",R.last_name),d("email",R.email),d("password",R.password),d("phone",R.phone))}catch(f){if(console.error("Error fetching contact:",f),((u=f.response)==null?void 0:u.status)===404||(H=(Q=(N=f.response)==null?void 0:N.data)==null?void 0:Q.message)!=null&&H.includes("could not be found")){B("Contact not found. Creating a new contact instead.","warning"),_();return}B(((C=(c=f==null?void 0:f.response)==null?void 0:c.data)==null?void 0:C.message)||"Failed to fetch contact details. Please try again.","error")}finally{P(!1)}},_=()=>{A({first_name:"",last_name:"",email:"",password:"",phone:""}),b(!1)},G=n=>{const r={...n};v&&!r.password&&delete r.password,I({apiFn:()=>v?je(m,r):ve(r),data:r,onSuccess:u=>{var N;B(((N=u==null?void 0:u.data)==null?void 0:N.message)||(v?"Contact updated successfully":"Contact added successfully"),"success"),y(),l&&l(),T("/all-contacts")}})},i=()=>{Y(!0),I({apiFn:()=>Ne(q),onSuccess:()=>{z(!1),K([]),y(),l&&l()}})};return x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-xs z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white text-black rounded-xl shadow-lg pt-3 w-full max-w-3xl min-h-[40vh] md:min-h-[70vh] mx-5 relative dark:bg-[#181818]",children:[(k||g)&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 z-10 flex items-center justify-center",children:g?e.jsx(oe,{}):e.jsx(ge,{})}),e.jsxs("div",{className:"flex justify-between items-center p-4 py-5 px-5 border-b border-gray-300",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl text-black font-semibold mb-1 dark:text-[#ECECEC]",children:v?"Edit Contact":"Add New Contact"})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:y,className:"text-gray-700 transition-colors p-1 dark:text-[#F8F8F8]",disabled:k||g,children:e.jsx(be,{size:20})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsx("div",{className:"add-contact-form-wrap",children:e.jsxs("form",{onSubmit:V(G),children:[e.jsxs("div",{className:"bg-[#FDFDFD] dark:bg-[#181818]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Full Name"}),e.jsx("input",{type:"text",...S("first_name",{required:"Full name is required",minLength:{value:2,message:"Min 2 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"Name should contain only letters and spaces"}}),className:"w-full border p-3 rounded-xl mb-4 text-sm dark:bg-[#121212] dark:text-[#F8F8F8] dark:border-[#454545]",placeholder:"Enter Full Name"}),D.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.first_name.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Email Address"}),e.jsx("input",{type:"email",...S("email",{required:"Email address is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"w-full border p-3 rounded-xl mb-4 text-sm dark:bg-[#121212] dark:text-[#F8F8F8] dark:border-[#454545]",placeholder:"Enter email address"}),D.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Phone Number"}),e.jsx("input",{type:"tel",inputMode:"numeric",onKeyDown:n=>{["e","E","+","-"].includes(n.key)&&n.preventDefault()},...S("phone",{validate:n=>n?/^0\d{9,10}$/.test(n)||"Phone number must start with 0 and be 10 or 11 digits long":!0}),className:"w-full border p-3 rounded-xl mb-1 text-sm dark:bg-[#121212] dark:text-[#F8F8F8] dark:border-[#454545]",placeholder:"Enter phone number"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Example: ",e.jsx("span",{className:"font-mono",children:"0**********"})]}),D.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:D.phone.message})]})]})]}),e.jsxs("div",{className:"flex justify-end mt-10 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(),className:"bg-gray-300 text-black px-6 py-2 rounded-xl hover:bg-gray-400 dark:text-[#F8F8F8] dark:bg-[#121212] dark:border-[#333333]",disabled:k,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k,className:`purple-btn ${k?"opacity-70 cursor-not-allowed":""}`,children:e.jsx("span",{className:"flex items-center gap-2",children:v?"Update Contact":"Add Contact"})})]})]})})})]})}),e.jsx(we,{isOpen:W,onClose:()=>z(!1),onConfirm:i,contacts:q,isLoading:M})]}):null},Ge=({isOpen:x,onClose:y,onSuccess:l,contactId:g})=>{const[P,I]=t.useState(!1),{handleApiCall:k,loading:F}=re(),[b,$]=t.useState(!1),[j,M]=t.useState(!1);t.useRef(null);const[Y,W]=t.useState(!1),[z,q]=t.useState(!1),[K,B]=t.useState([]),{showSnackbar:T}=de(),Z=ie();pe();const m=!!g,{register:v,handleSubmit:S,reset:V,setValue:A,formState:{errors:d}}=he({mode:"onChange",defaultValues:{first_name:"",last_name:"",email:"",password:"",phone:""}}),[D,ce]=t.useState({news:!1,deals:!1,investment:!1});t.useEffect(()=>{x&&g&&!b&&($(!0),ee()),x||(O(),$(!1))},[x,g,b]);const ee=async()=>{var i,o,n,r,u,N,Q,H;I(!0);try{const c=await fe(g),C=(o=(i=c==null?void 0:c.data)==null?void 0:i.data)==null?void 0:o.contact;C&&(A("first_name",C.first_name),A("last_name",C.last_name),A("email",C.email),A("password",C.password),A("phone",C.phone))}catch(c){if(console.error("Error fetching contact:",c),((n=c.response)==null?void 0:n.status)===404||(N=(u=(r=c.response)==null?void 0:r.data)==null?void 0:u.message)!=null&&N.includes("could not be found")){T("Contact not found. Creating a new contact instead.","warning"),O();return}T(((H=(Q=c==null?void 0:c.response)==null?void 0:Q.data)==null?void 0:H.message)||"Failed to fetch contact details. Please try again.","error")}finally{I(!1)}},O=()=>{V({first_name:"",last_name:"",email:"",password:"",phone:""}),$(!1)},_=i=>{const o={...i};m&&!o.password&&delete o.password,k({apiFn:()=>m?je(g,o):ve(o),data:o,onSuccess:n=>{var r;T(((r=n==null?void 0:n.data)==null?void 0:r.message)||(m?"Contact updated successfully":"Contact added successfully"),"success"),y(),l&&l(),Z("/all-contacts")}})},G=()=>{W(!0),k({apiFn:()=>Ne(K),onSuccess:()=>{q(!1),B([]),y(),l&&l()}})};return x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-xs z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white text-black rounded-xl shadow-lg pt-3 w-full max-w-3xl min-h-[40vh] md:min-h-[70vh] mx-5 relative dark:bg-[#181818]",children:[(F||P)&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 z-10 flex items-center justify-center",children:P?e.jsx(oe,{}):e.jsx(ge,{})}),e.jsxs("div",{className:"flex justify-between items-center p-4 py-5 px-5 border-b border-gray-300",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl text-black font-semibold mb-1 dark:text-[#ECECEC]",children:m?"Edit Contact":"Add New Contact"})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:y,className:"text-gray-700 transition-colors p-1 dark:text-[#ECECEC]",disabled:F||P,children:e.jsx(be,{size:20})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsx("div",{className:"add-contact-form-wrap",children:e.jsxs("form",{onSubmit:S(_),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Full Name"}),e.jsx("input",{type:"text",...v("first_name",{required:"Full name is required",minLength:{value:2,message:"Min 2 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"Name should contain only letters and spaces"}}),className:"w-full border p-3 rounded-xl mb-4 text-sm dark:bg-[#121212] dark:text-[#F8F8F8] dark:border-[#454545]",placeholder:"Enter Full Name"}),d.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.first_name.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Email Address"}),e.jsx("input",{type:"email",...v("email",{required:"Email address is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email address"}}),className:"form-control",placeholder:"Enter email address"}),d.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block form-label",children:"Phone Number"}),e.jsx("input",{type:"tel",inputMode:"numeric",onWheel:i=>i.target.blur(),onKeyDown:i=>{["e","E","+","-","ArrowUp","ArrowDown"].includes(i.key)&&i.preventDefault()},...v("phone",{required:"Phone number is required",pattern:{value:/^0\d{9,10}$/,message:"Phone number must start with 0 and be 10 or 11 digits long"}}),className:"form-control",placeholder:"Enter phone number"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Example: ",e.jsx("span",{className:"font-mono",children:"0**********"})]}),d.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.phone.message})]})]}),e.jsxs("div",{className:"flex justify-end mt-10 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(),className:"bg-gray-300 text-black px-6 py-2 rounded-xl hover:bg-gray-400 dark:text-[#F8F8F8] dark:bg-[#121212] dark:border-[#333333]",disabled:F,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F,className:`purple-btn ${F?"opacity-70 cursor-not-allowed":""}`,children:e.jsxs("span",{className:"flex items-center gap-2",children:[m?"":e.jsx(Ce,{}),m?"Update Contact":"Add Contact"]})})]})]})})})]})}),e.jsx(we,{isOpen:z,onClose:()=>q(!1),onConfirm:G,contacts:K,isLoading:Y})]}):null},ts=()=>{const{role:x,user:y}=Ue(s=>s.user);ie();const[l,g]=t.useState([]),[P,I]=t.useState(!0),[k,F]=t.useState(""),[b,$]=t.useState([]),[j,M]=t.useState(null),[Y,W]=t.useState({top:0,left:0}),[z,q]=t.useState(!1),[K,B]=t.useState(!1),[T,Z]=t.useState(!1),[m,v]=t.useState(null),S=t.useRef(null),V=t.useRef({}),A=t.useRef(null),{showSnackbar:d}=de(),{handleApiCall:D}=re(),[ce,ee]=t.useState(0),[O,_]=t.useState({isOpen:!1,contactId:null,isLoading:!1}),[G,i]=t.useState(!1),o=t.useRef(null);console.log("fileInputRef",o);const[n,r]=t.useState(null),[u,N]=t.useState(!1),[Q,H]=t.useState([]),c=()=>{o.current.click()},C=s=>{const a=s.target.files[0];a&&(console.log("Selected file:",a),r(a))},f=async()=>{if(!n)return;const s=new FormData;console.log("formData",s),s.append("file",n);try{N(!0),await Ye(s),await xe(),i(!1),r(null)}catch(a){console.error("Upload failed",a)}finally{N(!1)}},R=()=>{window.location.href="https://phplaravel-1547671-6035260.cloudwaysapps.com/api/v1/contacts/sample-excel"},ye=()=>{B(!0)},ke=()=>{ye()},Fe=()=>{B(!1)},Ee=s=>{v(s),Z(!0)},Se=()=>{Z(!1)},[E,Ae]=t.useState({currentPage:1,totalPages:1,from:0,to:0,total:0,hasMorePages:!1}),[L,se]=t.useState({page:1,per_page:(E==null?void 0:E.total)>=5?5:(E==null?void 0:E.total)||5,sortColumn:"created_at",sortOrder:"desc",search:"",status:"all",createdYear:""});t.useEffect(()=>{function s(U){S.current&&!S.current.contains(U.target)&&M(null)}function a(){j!==null&&M(null)}function p(){if(j!==null&&V.current[j]){const w=V.current[j].getBoundingClientRect(),h=window.innerHeight-w.bottom,ae=w.top;q(h<200&&ae>200),W({top:z?w.top-10:w.bottom+5,left:w.right-160})}}return p(),document.addEventListener("mousedown",s),document.addEventListener("scroll",a,!0),window.addEventListener("resize",p),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("scroll",a,!0),window.removeEventListener("resize",p)}},[j,z]);const De=Qe.debounce(s=>{se(a=>({...a,search:s,page:1}))},1e3),_e=s=>{const a=s.target.value;F(a),De(a)},Le=s=>{$(a=>a.includes(s)?a.filter(p=>p!==s):[...a,s])},Pe=s=>{const{name:a,value:p}=s.target;se({...L,[a]:p,page:1})},te=async()=>{var s,a,p,U,w;I(!0);try{const h=await xe({...L,perPage:L.per_page||10,status:L.status==="all"?null:L.status}),ae=((a=(s=h==null?void 0:h.data)==null?void 0:s.data)==null?void 0:a.contacts)||[],le=await He(),ne=((p=le==null?void 0:le.data)==null?void 0:p.blocked_by_users)||[];console.log("blockedList",ne),H(ne);const Oe=new Set(ne.map(X=>X.id)),Re=ae.map(X=>({...X,isBlocked:Oe.has(X.user_id)}));g(Re);const J=h.data.data.page_context;J&&Ae({currentPage:parseInt(J.page)||1,totalPages:Math.ceil(J.total_records/J.per_page),total:parseInt(J.total_records||0)})}catch(h){d(((w=(U=h==null?void 0:h.response)==null?void 0:U.data)==null?void 0:w.message)||"Failed to fetch contacts","error")}finally{I(!1)}},Ie=s=>{_({isOpen:!0,contactId:s,isLoading:!1})},me=()=>{_({isOpen:!1,contactId:null,isLoading:!1})},Me=()=>{_(s=>({...s,isLoading:!0})),D({apiFn:()=>Ke(O.contactId),onSuccess:()=>{te(),me(),d("Contact deleted successfully","success")},onError:s=>{_(a=>({...a,isLoading:!1}))}})},ue=()=>{te()};t.useEffect(()=>{te()},[L]);const Be=s=>{var a,p,U,w,h;return!(s!=null&&s.user_id)||((a=s==null?void 0:s.user)==null?void 0:a.deleted_at)!==null?"Inactive":((p=s==null?void 0:s.user)==null?void 0:p.deleted_at)===null&&((U=s==null?void 0:s.user)==null?void 0:U.is_active)===1?"Active":((w=s==null?void 0:s.user)==null?void 0:w.deleted_at)===null&&((h=s==null?void 0:s.user)==null?void 0:h.is_active)===0?"Disabled":"Inactive"};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex justify-between items-center  md:mb-8 flex-wrap mb-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Contacts"}),e.jsx("p",{className:"text-[#333333] dark:text-[#ECECEC]",children:"Manage your investor contacts"})]}),e.jsx("div",{children:x!=="team"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex space-x-4 flex-wrap gap-3 mt-4 md:mt-0",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-3 rounded-md bg-[#6C5DD3] text-white hover:bg-[#5a4bb2] transition-colors",onClick:ke,children:[e.jsx(Ce,{size:14}),e.jsx("span",{children:"Add Contact"})]})}),e.jsx("div",{onClick:()=>i(!0),className:"text-center rounded-md px-4 pt-5 font-medium text-sm cursor-pointer",children:"Import Bulk"}),G&&e.jsxs("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 w-[466px] shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Import Contact List"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"You can download the sample file, fill in your contact details, and upload it to import contacts in bulk."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:R,className:"flex-1 border rounded-md px-4 py-2 text-sm font-medium hover:bg-gray-100 transition",children:"Download Sample"}),e.jsx("button",{onClick:c,className:"purple-btn flex-1 text-sm font-medium",children:"Choose File"})]}),n&&e.jsxs("div",{className:"mt-5 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-blue-100 text-blue-600",children:"ðŸ“„"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"File ready to upload"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>r(null),disabled:u,className:"flex-1 rounded-md border px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:u,className:`flex-1 rounded-md px-2 py-1 text-sm font-medium text-white transition
                                ${u?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}
                                  `,children:u?"Uploading...":"Upload File"})]})]}),e.jsx("button",{onClick:()=>{i(!1),r(null)},className:"mt-5 text-sm text-gray-500 hover:underline w-full",children:"Close"})]}),e.jsx("input",{type:"file",ref:o,onChange:C,className:"hidden",accept:".csv,.xlsx"})]})]})})]}),e.jsxs("div",{className:"border rounded-xl dark:border-[#454545]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md-gap-0 space-x-4 items-start justify-between px-4 py-4",children:[e.jsxs("div",{className:"relative custom-input-w",children:[e.jsx("input",{type:"text",placeholder:"Search for contacts",className:"form-control",value:k,onChange:_e,style:{paddingLeft:"40px"}}),e.jsx($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),e.jsx("div",{className:"p-1 bg-[#F3F3F3] dark:bg-[#2B2B2B] rounded-xl",children:e.jsx("div",{className:"flex gap-2",children:[{label:"All Members",value:"all"},{label:"Active",value:"1"},{label:"Inactive",value:"0"}].map(s=>e.jsx("button",{onClick:()=>Pe({target:{name:"status",value:s.value}}),className:`px-4 py-2 rounded-md transition-colors duration-200 ${L.status===s.value?"bg-white text-dark shadow-xl dark:bg-[#121212] dark:text-white":"bg-[#F3F3F3] text-gray-800 dark:bg-[#2B2B2B] dark:text-gray-300"}`,children:s.label},s.value))})})]}),e.jsx("div",{ref:A,className:"dark:bg-[#222632] bg-[#EBEBEC] rounded-lg overflow-hidden text-dark dark:text-white comparable-listing-table-wrap",children:P?e.jsx("div",{className:"flex justify-center items-center p-12",children:e.jsx(oe,{})}):l.length===0?e.jsx("div",{className:"text-center p-12 text-dark dark:text-white",children:e.jsx("p",{children:"No contacts found. Add some contacts to see them here."})}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",onChange:s=>$(s.target.checked?l==null?void 0:l.map(a=>a.id):[]),checked:b.length===(l==null?void 0:l.length)&&(l==null?void 0:l.length)>0})}),e.jsx("th",{children:"NAME"}),e.jsx("th",{children:"EMAIL"}),e.jsx("th",{children:"PHONE NUMBER"}),e.jsx("th",{children:"STATUS"}),e.jsx("th",{children:"CREATED AT"}),x!=="team"&&e.jsx("th",{children:"ACTIONS"})]})}),e.jsx("tbody",{children:(l==null?void 0:l.length)>0?l==null?void 0:l.map(s=>e.jsxs("tr",{className:`
                          ${s.isBlocked?"opacity-50 pointer-events-none":""}
                          `,children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:b==null?void 0:b.includes(s==null?void 0:s.id),disabled:s.isBlocked,onChange:()=>Le(s==null?void 0:s.id)})}),e.jsx("td",{children:e.jsx("div",{className:"line-clamp-3 max-w-[200px] overflow-hidden text-ellipsis",children:s==null?void 0:s.first_name})}),e.jsx("td",{children:s==null?void 0:s.email}),e.jsx("td",{children:s==null?void 0:s.phone}),e.jsx("td",{className:"p-4",children:(()=>{if(s.isBlocked)return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border
          bg-gray-100 text-gray-600 border-gray-300 dark:bg-gray-800 dark:text-gray-400`,children:"Blocked"});const a=Be(s);return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border
          ${a==="Active"?"bg-[#ECFDF3] text-[#054F31] border-[#A6F4C5] dark:border-[#05603A] dark:bg-[#053321] dark:text-[#6CE9A6]":a==="Disabled"?"bg-red-100 text-red-700 border-red-300":"bg-[#FFF8E1] text-[#FB6E0A] border-[#FEDE82] dark:border-[#FC8D0B] dark:bg-[#E56306] dark:text-[#FED350]"}`,children:a})})()}),e.jsx("td",{children:s!=null&&s.created_at?new Date(s==null?void 0:s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"}),x!=="team"&&e.jsx("td",{className:"",children:e.jsx("div",{className:"flex justify-center relative",children:e.jsx("button",{ref:a=>V.current[s.id]=a,onClick:()=>M(j===(s==null?void 0:s.id)?null:s==null?void 0:s.id),className:"text-lg",children:e.jsx(ze,{className:"text-[#595959]"})})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center p-4",children:"No deals available"})})})]}),j!==null&&e.jsxs("div",{ref:S,style:{position:"fixed",top:`${Y.top}px`,left:`${Y.left}px`,zIndex:9999},className:"w-40 bg-white rounded-xl shadow-lg dark:bg-[#242424]",children:[e.jsx("button",{onClick:()=>{const s=l.find(a=>a.id===j);Ee(s==null?void 0:s.id),M(null)},className:"flex items-center w-full px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-sm",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(qe,{className:"mr-2"})," Edit details"]})}),e.jsxs("button",{onClick:()=>{Ie(j),M(null)},className:"flex items-center w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm text-red-600",children:[e.jsx(Te,{className:"mr-2"})," Delete"]})]})]})})]}),e.jsx(Ve,{pagination:{total:E.total,currentPage:L.page,perPage:E.total>=5?5:E.total,totalPages:Math.ceil(E.total/L.per_page)},setFilters:se})]}),e.jsx(We,{isOpen:O.isOpen,onClose:me,onConfirm:Me,isLoading:O.isLoading,title:"Delete Contact"}),e.jsx(Ze,{isOpen:K,onClose:Fe,onSuccess:ue}),e.jsx(Ge,{contactId:m,isOpen:T,onClose:Se,onSuccess:ue})]})};export{ts as default};
