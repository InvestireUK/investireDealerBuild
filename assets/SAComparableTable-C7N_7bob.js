import{u as c,t as v,s as y,at as w,m as e,cu as C,aK as _,cn as E,co as D,cp as S,cq as A,cr as o,cs as k,ak as B,al as F,N as x,aF as m,cv as I,ap as L}from"./index-Cj5t8Yje.js";import{S as R}from"./SAComparablesMaps-BDqIAOos.js";const z=()=>{var d,n;const r=c(a=>{var s;return(s=a==null?void 0:a.deal)==null?void 0:s.deal});c(a=>a.deal.SAnewComperableData);const t=v(),l=y(),p=c(a=>a.deal.currentStep),h="AIzaSyDhNgmQPNc-YzwdfY9n98YwF04E770ta44",{comparableDealId:b}=c(a=>a==null?void 0:a.deal),{handleApiCall:j}=w(),f=()=>{b&&l(I()),t("/create-deal/description")},N=()=>{l(L(!0));const a={_method:"PATCH"};j({apiFn:()=>m(r.id,a),onSuccess:s=>{var i;const g={...s==null?void 0:s.deal,id:(i=s==null?void 0:s.deal)==null?void 0:i.id};l(x(g))},onError:s=>{console.error("Error updating deal:",s)}}),l({type:"deal/setCurrentStep",payload:Math.max(p,4)}),t("/create-deal/summary")},u=()=>{t("/create-deal/sa-edit-comparable"),l(x(m))};return e.jsxs("div",{children:[e.jsxs("div",{className:"sa-api-comparables-data-wrap",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsx("h5",{children:"Comparables"}),e.jsxs("button",{className:"purple-btn2 my-4  inline-flex items-center",onClick:u,children:[e.jsx("span",{className:"leading-none",children:"+ Edit Comparable"}),e.jsx(C,{className:"ml-1 text-white h-6 w-6 group-hover:text-[#6C5DD3] align-middle"})]})]}),e.jsx("div",{className:"map-generated-sec mb-10",children:e.jsx("div",{className:"bg-[#EBEBEC] dark:bg-[#222632] flex items-center justify-center relative create-deal-upload-document-wrap",children:((d=r==null?void 0:r.property_deal_sa_comparables)==null?void 0:d.length)>0?e.jsx(R,{locations:r.property_deal_sa_comparables,apiKey:h}):e.jsx("p",{className:"text-gray-500 py-10 text-center",children:"No map available — no SA comparables imported"})})}),((n=r==null?void 0:r.property_deal_sa_comparables)==null?void 0:n.length)>0?r.property_deal_sa_comparables.map((a,s)=>e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-[260px_1fr_70px] gap-5 my-10 items-start",children:[e.jsx("div",{className:"w-full h-[200px] md:h-[200px] order-1 md:order-none",children:e.jsx("img",{src:(a==null?void 0:a.image_url)||(a==null?void 0:a.image)||_,alt:"Image",className:"w-full h-full object-cover rounded-[20px]"})}),e.jsxs("div",{className:"ai-api-data flex flex-col gap-1 order-2 md:order-none",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"font-semibold text-[20px]",children:[a.title," ",e.jsx("span",{className:"text-sm text-[#595959]",children:a.distance_meters?`${Number(a.distance_meters).toFixed(2)} ml`:""})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"ai-information flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{}),e.jsx("span",{className:"font-semibold text-base",children:a.no_of_bedroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{}),e.jsx("span",{className:"font-semibold text-base",children:a.no_of_bathroom})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{}),e.jsxs("span",{className:"font-semibold text-base",children:[a.beds," Guests"]})]})]}),e.jsxs("div",{className:"reviews flex items-center gap-1",children:[e.jsx(A,{className:"text-[#FB6E0A]"}),e.jsx("p",{children:a.rating||0}),e.jsxs("p",{children:["(",a.reviews||0," reviews)"]})]})]}),e.jsxs("div",{className:"ai-percentage grid grid-cols-2  md:flex  md:flex-nowrap  items-center  md:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:a.days_available||"-"}),e.jsx("h6",{className:"text-sm",children:"Days available"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:a.occupancy||"-"}),e.jsx("h6",{className:"text-sm",children:"Occupancy"})]}),e.jsxs("div",{className:"flex flex-col items-center border-r md:border-r border-b md:border-b-0 border-[#ECECEC] px-5 py-3",children:[e.jsxs("p",{className:"text-2xl",children:["£",a.adr||"-"]}),e.jsx("h6",{className:"text-sm",children:"ADR"})]}),e.jsxs("div",{className:"flex flex-col items-center px-5 py-3",children:[e.jsx("p",{className:"text-2xl",children:a!=null&&a.revenue?`£${a.revenue}`:"-"}),e.jsx("h6",{className:"text-sm",children:"Revenue"})]})]})]}),e.jsxs("div",{className:"links flex flex-row md:flex-col items-center gap-5 border-t md:border-t-0  md:border-l border-[#ECECEC]  pt-5 md:pt-0 order-3 md:order-none",children:[a.listing_url?e.jsx("a",{href:a.listing_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{className:"w-7 h-7 text-[#6C5DD3] cursor-pointer"})}):e.jsx(o,{className:"w-7 h-7 text-gray-400 cursor-not-allowed"}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${a.lat},${a.lng}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(k,{className:"w-7 h-7 text-[#6C5DD3]"})})]})]},s)):e.jsx("p",{className:"text-gray-500 my-5 text-center",children:"No comparable imported"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("button",{onClick:f,className:"w-fit items-center gap-5 justify-center flex",children:[e.jsx(B,{}),"Back"]}),e.jsxs("button",{onClick:N,className:"w-fit purple-btn items-center gap-5 justify-center  xyz",style:{display:"flex"},children:["Next",e.jsx(F,{})]})]})]})};export{z as default};
